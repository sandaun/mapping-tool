KNX System arguments

KNX Association

KNX BASIC COURSE

Table of Contents
1
2
3
4

KNX Association: A Brief Outline ...............................................................................3
Goals of the KNX Association ....................................................................................4
KNX: the Technology .................................................................................................5
KNX System specification ..........................................................................................6
4.1
4.2

KNX Media .........................................................................................................6
Areas of application for the various media ..........................................................7

4.2.1
5
6
7
8

Types of Configuration ...................................................................................7

KNX Interworking .......................................................................................................8
Success Rate .............................................................................................................9
The Advantages of KNX.............................................................................................9
Selling the benefits ...................................................................................................11

Home and Building Management Systems
KNX System arguments
Arguments_E1212a

KNX Association
2/11

KNX BASIC COURSE

1 KNX Association: A Brief Outline
KNX Association has been set up in 1999 with headquarters in Brussels as the merger
between three former European associations promoting intelligent homes and buildings,
i.e.:
BCI (France) promoting the Batibus system;
EIB Association (Belgium) promoting the EIB system;
European Home Systems Association (Holland) promoting the EHS system.
KNX Association has the following goals:
definition of a new truly open standard ‘KNX’ for intelligent homes and buildings;
establishing the KNX Trademark as a token for quality and multi-vendor interworking;
establishing KNX as the European and worldwide standard.
As long as needed, KNX Association also offers support for the legacy systems Batibus,
EIB and EHS, including certification according to these previous standards. As EIB is
backward compatible to KNX, most devices can be labelled both with the KNX as well as
the EIB logo.

Home and Building Management Systems
KNX System arguments
Arguments_E1212a

KNX Association
3/11

KNX BASIC COURSE

2 Goals of the KNX Association


Definition of testing and quality standards via working and expert groups
(KNX Specifications)



Technical Hotline for manufacturers developing KNX compatible devices



Issue of KNX Trademark on the basis of specifications through KNX
Certification



National and International Standardization Activities



Promotion of training measures by certification of training centers



Promotional activities (web site, trade fairs, brochures, …)



Encouraging forming of national groups



Scientific Partnership for Technical institutes



Rest specification work/promotion/certification of legacy systems

Figure 1: Goals of the KNX Association

KNX Association consisted of 9 members when it was founded: this number has
meanwhile increased to more than 300 (situation November 2012), including companies
that were before not a member in any of the legacy associations. These companies
represent more than 80% of the European market for installation devices and white
goods. The current membership list is available at any time under www.knx.org.
As far as the legacy associations is concerned,
the Batibus Club was transformed into the national group KNX France;
KNX Association has taken over the development and sale of the KNX software
packages from EIBA Brussels. This amongst others includes the ETS (Engineering
Tool Software) (see later);
EHSA was integrated in the KNX structures.
At the end of 2003, the KNX Standard was approved by CENELEC (European Committee
of Electrotechnical Standardisation) as the European Standard for Home and Building
Electronic Systems as part of the EN 50090 Series. The KNX Standard was also
approved by CEN (EN 13321-1 for media and protocol and EN 13321-2 for KNXnet/IP).
At the end of 2006, KNX was also approved as a world standard (ISO/IEC 14543-3).
In 2007, the Chinese translation of the international standard achieved GB/Z status as
GB/Z 20965. KNX is also approved in the USA as ANSI/ASHRAE 135.

Home and Building Management Systems
KNX System arguments
Arguments_E1212a

KNX Association
4/11

KNX BASIC COURSE

3 KNX: the Technology

Figure 2: KNX - the Technology

In the case of the most widely used medium “Twisted Pair 1”, a control cable is laid
parallel to the 230 V cable. This means that:
the amount of cabling compared to conventional installation technology is
considerably reduced when bus devices are arranged in a decentralized way
the number of possible system functions is increased
the transparency of the installation is improved.
This cable:
connects loads and switches
supplies the bus devices with energy in most cases.
A central control unit (e.g. PC) is not necessary as all the bus devices have their own
intelligence. KNX can therefore be used both in small installations (flats) and large
projects (hotels, administration buildings...).

Home and Building Management Systems
KNX System arguments
Arguments_E1212a

KNX Association
5/11

KNX BASIC COURSE

4 KNX System specification
4.1 KNX Media

Figure 3: KNX Media

Due to the flexibility of the KNX technology, a KNX installation can easily be adapted to
the changing circumstances of the user.
It is also possible to implement KNX on the existing 230 V cable (“Powerline transmission
medium”), on radio (“KNX Radio Frequency transmission medium”) and on Ethernet
(“KNX IP”). Via appropriate gateways, transmission of KNX telegrams is also possible on
other media, e.g. optical fibre.
One Twisted Pair solution exists (Twisted 1), one Power Line medium exists (Powerline
110), one RF and one IP solution. When connecting different media, appropriate media
couplers have to be used. The used medium of a device is visible on the product’s label.

Home and Building Management Systems
KNX System arguments
Arguments_E1212a

KNX Association
6/11

KNX BASIC COURSE

4.2 Areas of application for the various media

Figure 4: Areas of Application for the various media

4.2.1 Types of Configuration
Depending on what is marked on the label of the device, devices can be configured (i.e.
linked and parameters set) via:
Easy installation techniques (E-MODE): configuration is done without the help of a PC
but with a central controller, push buttons…
This type of configuration is intended for the skilled contractor with basic bus
knowledge. Easy compatible products normally have limited functionality and are
intended for medium size installations.
Last but not least, system installation techniques (S-MODE): planning of the
installation and configuration is done via a PC with the installed manufacturerindependent ETS Software, whereby the manufacturers’ product data is contained in
the ETS database.
This type of configuration is intended for KNX certified planners and contractors and
for large size installations.
Some devices allow configuration via easy installation techniques as well as system
mode 1. For instance, products with the LTE label are normally configured via the LTE
mechanisms: all devices however include a defined S-mode interface, which allows
linking of them with S-mode compliant devices.

1 In the case where the product is also labelled with the EIB logo only next to the KNX logo, this

implies that the product uses the medium TP1 and can be configured by ETS.

Home and Building Management Systems
KNX System arguments
Arguments_E1212a

KNX Association
7/11

KNX BASIC COURSE

5 KNX Interworking

Figure 5: KNX Interworking

Devices from different manufacturers and functional areas that are labelled with the KNX
trademark and using the same configuration mechanism can be linked to form a
functioning installation thanks to the KNX standardization of
Telegrams: devices usually transmit the standard telegrams, but there are also
devices that support the new telegram format;
Useful data in telegrams: for various functions (a.o. switching, dimming, shutter
control, HVAC…), the use of predetermined formats is an obligation for certification.
It is foreseen that ETS in future versions will also allow the linking of non S-mode
configured products.

Home and Building Management Systems
KNX System arguments
Arguments_E1212a

KNX Association
8/11

KNX BASIC COURSE

6 Success Rate 2
Millions of installed products
thousands of KNX registered and certified products (including legacy solutions)
more than 300 KNX members
more than 230 recognized training centres
7 European test sites
tens of thousands of implemented projects

7 The Advantages of KNX
Increased safety
Economic use of energy during the operation of buildings
Simple adaptation of the electrical installation to the changing requirements of the
user
Higher degree of convenience
future-proof installations
wide range of available off-the-shelf components from many manufacturers
large service network of qualified contractors/planners/integrators
The above arguments are evaluated differently from the point of view of the client or the
user of the installation e.g. functional building compared to residential building, ablebodied people compared to disabled people, young people compared to elderly
people,….
Example 1: Implementation of central functions – when you are leaving the building, all
the lights, the water supply and specific sockets (electric oven…) can be switched off, the
KNX alarm system can be activated and the blinds can be controlled dependent on the
time of day.
Example 2: In conference rooms, theatres as well as living rooms, it is possible to activate
different light scenes depending on the activity which can be modified by the user at any
time. For example in administration buildings, it is possible to achieve an energy saving of
up to 75% for the lighting system by implementing constant light control with only one
brightness sensor for each side of the building.
Example 3: All the states in a flat can be indicated and operated in clear text via display
units (fixed but also mobile devices such as smartphones or tablet computers). This can
be implemented in the same way in larger installations using PCs and visualisation
software.

3 For current figures, please consult the KNX web site (www.knx.org)

Home and Building Management Systems
KNX System arguments
Arguments_E1212a

KNX Association
9/11

KNX BASIC COURSE
Example 4: By interfacing a KNX installation with the telephone network, the user can
influence or query the building management functions (e.g. the heating) using a mobile
phone. Alarm signals can be automatically routed to any telephone number as required.
KNX installations can also be remotely serviced and configured by the installer using any
available media (e.g. the Internet). The time required for maintaining the building
management system is thus considerably reduced.
Example 5: It should be possible to divide a large conference room into several
independent areas if the need arises. By inserting partition walls, the KNX installation
automatically detects the required assignment of switches and lights per room section. It
is therefore not necessary to change the existing cabling.
Example 6: Any number of panic switches (e.g. activation of all the lights) can be
installed.
At night, the lights between the children’s bedroom and the bathroom can be activated by
pressing a button and deactivated after a set period.
Example 7: KNX enables individual room control of the heating and cooling system with
the creation of heating and cooling profiles per room. The heat or cold input for a room is
automatically adjusted when a window is opened. These measures make it possible to
achieve an energy saving of more than 30% per year.
The heat generation can also be controlled dependent on the heat requirement of the
individual rooms (heat is only produced when it is actually required).
Example 8: KNX enables presence simulation when the user is absent.
Example 9: The energy consumption of individual electric circuits can be monitored by
energy sensors /energy actuators and can be switched off when exceeding predefined
threshold values in order to improve load management. Combined with a gateway to
Smart Metering devices or renewable energy sources, it is therefore possible to ensure
the optimal use of self-generated energy (e.g. in combination with a future electric
vehicle).

Home and Building Management Systems
KNX System arguments
Arguments_E1212a

KNX Association
10/11

KNX BASIC COURSE

8 Selling the benefits

Figure 6: Selling the benefits

During a consultation with a future customer, the electrical contractor or planner should
discuss KNX only in terms of its benefits to the customer and that it is geared to the
requirements of the customer. Technology and costs should not be at the forefront for the
time being. The result of this discussion should be a quotation for the system and not for
components. The process should continue as follows:
Discuss the system quotation with the customer and again stress the benefits for the
customer;
If the price for the system cannot be accepted, functions should be re-planned (e.g.
switching instead of dimming);
In extreme cases, the price of the installation can be reduced using the following
components:




push button interfaces with conventional push buttons
push button BCU
multiple switch actuators

Home and Building Management Systems
KNX System arguments
Arguments_E1212a

KNX Association
11/11

KNX Communication

KNX Association

KNX BASIC COURSE

Table of Contents
1
2
3
4

Basic Method of Operation .........................................................................................3
Individual address ...................................................... Error! Bookmark not defined.
Group Address ...........................................................................................................6
Group object .............................................................. Error! Bookmark not defined.
4.1

5
6

Flags ..................................................................................................................9

Useful Data of a TP1 telegram .................................................................................10
Standardized Datapoint Types (DPT).......................................................................11
6.1
6.2
6.3
6.4
6.5

7
8
9
10
11
12

Switch (1.001) ..................................................................................................12
Functional block Shutter Control.......................................................................13
Switch Control (2.001) ......................................................................................14
Functional Block “Dimming”..............................................................................15
2 Octet Float Value (9.00x)...............................................................................17

TP1 Bit Structure......................................................................................................18
TP1 Telegram Collision ............................................................................................19
TP1 Symmetrical Transmission................................................................................20
Superimposing Data and Supply Voltage .................................................................21
Connection of the Power Supply Unit to the TP1 Bus ..............................................22
TP1 Cable Lengths ..................................................................................................23

12.1
12.2
12.3

Cable Length between TP1 Power Supply Unit and TP1 Bus Device ...............24
Cable Lengths between two TP 1 Bus Devices ................................................25
Total Cable Length per TP 1 Line Segment .....................................................25

Home and Building Management Systems
KNX Communication

Communication_E1212a

KNX Association
2/25

KNX BASIC COURSE

Definition
The following terms are used as synonyms in KNX literature:
Physical address and individual address
Communication object and group object
The terms individual address and group objects are commonly used In the KNX
training documentation as well as in ETS.

1 Basic Method of Operation

Figure 1: Basic method of operation

A minimum TP1 KNX installation consists of the following components:
a power supply unit (DC 30 V)
a choke (can also be integrated in the power supply unit)
sensors (a single switch sensor is represented in the figure above)
actuators (a single switch actuator is represented in the figure above)
bus cable (only two wires of the bus cable are required).

After the installation and in the case of S-mode compatible products, a KNX system is not
ready for operation until sensors and actuators have been loaded with application

Home and Building Management Systems
KNX Communication

Communication_E1212a

KNX Association
3/25

KNX BASIC COURSE
software with the help of the ETS program. The project engineer must first have carried
out the following configuration steps using ETS:
assignment of individual addresses to the different devices (for the unique
identification of a sensor or actuator in a KNX installation);
selection and setting (parameterisation) of the appropriate application software for
sensors and actuators;
assignment of group addresses (for linking the functions of sensors and actuators).
In the case of E-mode compatible products, the same steps as above have to be applied,
whereby:
the individual addresses
parameterisation of the appropriate application software for sensors and actuators
and;
the assignment of group addresses (for linking the functions of sensors and actuators)
is done via either local settings or automatically by a central controller.
After the above configuration, the installation could function as follows:
If the upper rocker of the single switch sensor (1.1.1) is pressed, it sends a telegram
which contains the group address (5/2/66) and the value (“1”) as well as
miscellaneous data.
This telegram is received and evaluated by all connected sensors and actuators.
Only the devices with the same group address:



send an acknowledgement telegram
read the value and behave accordingly. In our example, the switch actuator (1.1.2)
will close its output relay.

When the lower rocker is pressed, the same process occurs except that the value is set
to “0” this time and the output relay of the actuator is thereby opened.
The respective elements of the KNX system are explained in more detail on the following
pages.

Home and Building Management Systems
KNX Communication

Communication_E1212a

KNX Association
4/25

KNX BASIC COURSE

2 Individual address

Figure 2: Individual address

An individual address must be unique within a KNX installation. The individual address is
configured as described above. It has the following format: Area [4 bit] - Line [4 bit] – Bus
device [1 byte]. The bus device is normally prepared for the acceptance of its individual
address by pressing a programming button on the bus device. The programming LED is
lit during this process. The individual address is also used for the following purposes after
the commissioning stage:
Diagnosis, error rectification, modification of the installation by reprogramming
Addressing of the interface objects using commissioning tools or other devices.
Important: The individual address has no significance during normal operation of
the installation.

Home and Building Management Systems
KNX Communication

Communication_E1212a

KNX Association
5/25

KNX BASIC COURSE

3 Group Address

Figure 3: Group Address

Communication between devices in an installation is carried out via group addresses.
When setting the group address via ETS, it can be selected as a “2-level” (main group/
subgroup), “3-level” structure (main group/middle group/subgroup) or a freely defined
structure. The level structure can be changed in the project properties of each individual
project.. The group address 0/0/0 is reserved for so-called broadcast messages
(telegrams to all available bus devices).
The ETS project engineer can decide how the levels will be used e.g. as in the following
pattern:
Main group = floor
Middle group = functional domain (e.g. switching, dimming)
Subgroup = function of load or group of loads (e.g. kitchen light on/off, bedroom
window on/off, ceiling living room on/off, ceiling living room dimming,…).
One should stick to the selected pattern of group addresses in all projects.
Each group address can be assigned to the bus devices as required, regardless of where
the device is installed in the system.
Home and Building Management Systems
KNX Communication

Communication_E1212a

KNX Association
6/25

KNX BASIC COURSE
Actuators can listen to several group addresses. Sensors however can only send one
group address per telegram.
The group addresses are assigned to the group objects of the respective sensors and
actuators, either by creating and assigning them with the help of ETS (S-mode) or
automatically and invisible to the user in E-mode.
Note:
When using the main groups 14 resp. 15 or higher in ETS, you should take into
account that these group addresses are not filtered by TP1 couplers and could
therefore negatively influence the dynamics of the entire bus system.
The number of group addresses that can be attributed to a sensor or actuator is
variable and depends on the size of the memory.

Home and Building Management Systems
KNX Communication

Communication_E1212a

KNX Association
7/25

KNX BASIC COURSE

4 Group object

Figure 4: Group object

KNX group objects are memory locations in bus devices. The size of these objects can be
between 1 bit and 14 bytes. The size of the group objects is dependent on its function.
As only two states (0 and 1) are required for switching, 1 bit group objects are used. The
data involved in text transmission is more comprehensive and therefore group objects
with a maximum size of 14 bytes are used.
The ETS only allows to link objects with the same size using group addresses. Several
group addresses can be assigned to one group object, but only one is the sending group
address.
An object value is sent on the bus in the following way:
a) If the upper left rocker is pressed for example, the two-fold switch sensor writes a “1”
to its group object with the number 0. As the communication and transmit flag are set
for this object, this device will send a telegram on the bus with the information “Group
address 1/1/1, write value, 1”.
b) All the bus devices throughout the KNX installation that also have the group address
1/1/1 will then write “1” in their own group object.
c) In our example, the “1” is written in group object no. 0 of the actuator.
d) The application software of the actuator establishes that the value in this group object
has changed and executes the switching process.

Home and Building Management Systems
KNX Communication

Communication_E1212a

KNX Association
8/25

KNX BASIC COURSE

4.1 Flags
Each group object has flags which are used to set the following properties:

Communication

READ

WRITE

TRANSMIT

UPDATE

READ ON INIT



The group object has a normal link to the bus.



Telegrams are acknowledged. The group object is not modified.



The object value can be read via the bus.



The object value CANNOT be read via the bus.



The object value can be modified via the bus.



The object value CANNOT be modified via the bus.



A telegram is transmitted when the object value (at the sensor) has been
modified.



The group object will generate a response only when receiving a read request.



Value response telegrams are interpreted as a write command. The value of
the group object is updated (always enabled in System 1 devices)



Value response telegrams are NOT interpreted as a write command. The
value of the group object remains unchanged.



The device independently sends Read value commands for the initialisation of
the group object after return of current (only available on certain masks)



After return of current the device does not initialise the value of the assigned
group object via Read Value commands

Please note: The default flags should only be changed in exceptional circumstances.
For further information you can consult the topic “Flags” in the chapter “Project Design” of
the basic course documentation or the chapter “Flags” in the advanced course
documentation.

Home and Building Management Systems
KNX Communication

Communication_E1212a

KNX Association
9/25

KNX BASIC COURSE

Figure 5: Useful data of TP1 telegram

5 Useful Data of a TP1 telegram
The actual payload determines the type of command. The actual payload is explained in
the above figure using the example of a 1-bit telegram. In the case of the “write”
command the last bit on the right contains a “1” or a “0” for “Switch on” or “Switch off”.
A “read” command requests the addressed group object to report its status. The reply
may be a 1-bit message as in the example of the “write” command, or it can use up to 13
bytes (bytes 2 to 15).
The length of the data is dependent on the datapoint type used.

Home and Building Management Systems
KNX Communication

Communication_E1212a

KNX Association
10/25

KNX BASIC COURSE

Figure 6: Standardized Datapoint types

6 Standardized Datapoint Types (DPT)
Datapoint types were standardised to guarantee the compatibility of similar devices from
different manufacturers (e.g. dimmers, clock).
The standardisation includes requirements on the data format and structure of the group
objects as well as for sensor and actuator functions. The combination of several
standardised datapoint types (e.g. in dimming actuators) is called a functional block.
The designation of a datapoint type is geared towards the application for which it was
conceived. This does not always imply that the use of the DPT is limited to this area of
application. For example “Scaling” (Type 5.001) can also be used both for setting a
dimming brightness or for setting a heating valve position.
A selection of frequently used datapoint types is given on the following pages. The full list
of standardised datapoint types can be downloaded from the KNX web site
(www.knx.org).

Home and Building Management Systems
KNX Communication

Communication_E1212a

KNX Association
11/25

KNX BASIC COURSE

Figure 7: DPT Switch (1.001)

6.1 Switch (1.001) 1
The switch function is used for switching an actuator function. Other one bit datapoint
types are defined for logical operations (Boolean [1.002]), Enable [1.003]), etc...).
Other functions or extensions to the pure switching function (inversion, time delay and
toggle switch functions) are not part of the DPT description but parameters of the
functional block specification, in which this DPT is used (e.g. functional block light switch).

1 previously referred to as EIS1

Home and Building Management Systems
KNX Communication

Communication_E1212a

KNX Association
12/25

KNX BASIC COURSE

Figure 8: Functional block Shutter Control

6.2 Functional block Shutter Control 2
The functional block “Shutter control” is principally used for the control of shutter and blind
drive mechanisms and provides at least the following datapoint types as group objects
Up/Down (1.008)
Step (1.007).
By writing on the Up/Down, a drive is set in motion from an idle state or changes direction
while moving.
By writing on the Step, a drive which is already in motion is brought to a stop or a halted
drive is set in motion for short periods (step-by-step).
Important: Group objects which use this function should never reply to read requests via
the bus as they may unintentionally stop moving drives or set halted drives in motion. The
“read” flag should therefore be deactivated in the relevant group objects – both in sensors
as well as actuators. This especially applies for central functions.

2 previously referred to as EIS7

Home and Building Management Systems
KNX Communication

Communication_E1212a

KNX Association
13/25

KNX BASIC COURSE

Figure 9: Switch Control (2.001)

6.3 Switch Control (2.001) 3
The Switch Control is used to operate actuators – next to the normal operation via the
Switch – by a group object with higher priority.
The switching function of a connected device depends on the state of the two group
objects Switch and Switch Control.
The group object of type Switch Control has a size of 2 bits.
If the value of the 2 bit object is 0 or 1, the connected actuator is controlled via the
switching object.
If the value of the priority object is 2, the output is switched off respectively on when the
value is 3. The value of the switching object is in both cases ignored.

3 Previously referred to as EIS 8

Home and Building Management Systems
KNX Communication

Communication_E1212a

KNX Association
14/25

KNX BASIC COURSE

Figure 10: Functional Block "Dimming"

6.4 Functional Block “Dimming” 4
Apart from the 4 bit object (Dim Step – 3.007), the functional block dimming consists of at
least a switching object (corresponds to Switch) and a value object (corresponds to
Scaling – 5.001).
A dimming command, relative to the current brightness setting, is transmitted to the
dimming actuator using the Dim Step.
Bit 3 of the useful data determines whether the addressed device dims down or up
compared to the current brightness value.
Bits 0 to 2 determine the dimming range. The area of brightness (0-100%) is divided into
64 dimming levels. The dimming actuator always dims to the next dimming level. For
example: a dimming actuator has a brightness level of 30%. If a sensor sends 1011 B as
useful data, a dimming brighter command is carried out until the next dimming threshold
is reached (or 100% divided by 4 = 25%, i.e. the next level is 50%).
The dimming code 0 (i.e. useful data 00 HEX or 80 HEX ) means “Stop Dimming”. The
dimming process is interrupted and the current brightness value is retained.

4 previously referred to as EIS 2

Home and Building Management Systems
KNX Communication

Communication_E1212a

KNX Association
15/25

KNX BASIC COURSE

Figure 11: Value object

With the Scaling, a brightness value between 1 (minimum) and 255 (maximum) is set
directly.
Depending on the manufacturer‘s application, it may be possible to switch on (1 ≤ value ≤
255) or off (value = 0) a connected device using this DPT.
The DPT has a size of 1 byte.

Home and Building Management Systems
KNX Communication

Communication_E1212a

KNX Association
16/25

KNX BASIC COURSE

Figure 12: 2 octet Float Value

6.5 2 Octet Float Value (9.00x) 5
With this data format (which has a number of different datapoint types according to the
nature of the sent value, e.g. room temperature °C – 9.001), numbers which represent
physical values can be transmitted.
“S” is the sign for the mantissa.
The four-digit exponent “E” is an integer exponent to the base of 2.
A resolution of 0.01 is defined for the mantissa “M”. Positive values (“S” = 0) take the form
of normal binary numbers. Negative values (“S” = 1) are coded by the mantissa as two‘s
complement numbers.
The size of the DPT is 2 bytes.

5 previously referred to as EIS 5

Home and Building Management Systems
KNX Communication

Communication_E1212a

KNX Association
17/25

KNX BASIC COURSE

Figure 13: TP1 bit structure

7 TP1 Bit Structure
“0” and “1” are the two logical states a bit can possess.
Technical logic in KNX TP1:
During logical state “1”, no signal voltage is available
During logical state “0”, signal voltage is available
If several bus devices transmit simultaneously, the logical state “0” prevails!

Home and Building Management Systems
KNX Communication

Communication_E1212a

KNX Association
18/25

KNX BASIC COURSE

Figure 14: TP1 Telegram Collision

8 TP1 Telegram Collision
A bus device with data to transmit may start transmission immediately if it finds the bus
unoccupied.
The simultaneous sending request of several bus devices is controlled by the CSMA/CA
procedure (Carrier Sense Multiple Access with Collision Avoidance).
The bus devices listen to the bus while transmitting. As soon as a bus device with the
logical state “1” detects the logical state “0” (= flow of current on the line), it stops
transmitting to give way to the other sending device.
The bus device that terminated its transmission continues to listen to the network to await
the end of the telegram transmission and then retries its transmission.
In this way, if several bus devices are attempting to transmit simultaneously, the
CSMA/CA procedure ensures that only one of these bus devices can terminate its
transmission uninterruptedly. The data throughput is therefore not reduced.

Home and Building Management Systems
KNX Communication

Communication_E1212a

KNX Association
19/25

KNX BASIC COURSE

Figure 15: TP1 Symmetrical Transmission

9

TP1 Symmetrical Transmission

The data is transmitted symmetrically over the pair of cores. Bus devices evaluate the
difference in voltage between the two cores.
As radiated noise affects both cores with the same polarity, it has no influence on the
difference in the signal voltage.

Home and Building Management Systems
KNX Communication

Communication_E1212a

KNX Association
20/25

KNX BASIC COURSE

Figure 16: Superimposing Data and Supply Voltage

10 Superimposing Data and Supply Voltage
Data is transmitted in the form of a.c. voltage. The capacitor reacts with a low resistance
to a.c. voltage, i.e. it acts as a conductor and closes the circuit on the primary side. When
acting as a transmitter, the transformer sends the data to the primary side (in the form of
a.c. voltage) where it is superimposed onto the d.c. voltage.
When acting as a receiver, the transformer sends the data to the secondary side where it
is separately available from the d.c. voltage.

Home and Building Management Systems
KNX Communication

Communication_E1212a

KNX Association
21/25

KNX BASIC COURSE

Figure 17: Connection of Power supply to TP1 bus

11 Connection of the Power Supply Unit to the TP1 Bus
The power is supplied to the installation bus via a choke.
When d.c. voltage is supplied, the choke reacts with low resistance (as the frequency is
equal to 0 Hz).The data is transmitted in the form of a.c. voltage (frequency is not equal
to 0). The choke reacts with high resistance to a.c. voltage.
Hence the power supply unit’s influence on the data is negligible.

Home and Building Management Systems
KNX Communication

Communication_E1212a

KNX Association
22/25

KNX BASIC COURSE

Figure 18: TP1 Cable lengths

12 TP1 Cable Lengths
Within a bus line, the following cable lengths are permitted:
Power Supply Unit - Bus device ................................................................... max. 350 m
Bus device - Bus device............................................................................... max. 700 m
Total bus line length................................................................................... max. 1000 m
Distance between 2 power supply units in one line…As specified by the manufacturer
When using a decentralised power supply, please check the chapter ‘installation’.

Home and Building Management Systems
KNX Communication

Communication_E1212a

KNX Association
23/25

KNX BASIC COURSE

Figure 19: Cable Length between TP1 power supply unit and TP1 bus device

12.1 Cable Length between TP1 Power Supply Unit and TP1 Bus Device
The bus device only transmits a half wave (shown in the picture as a negative half wave
at the positive core).
The choke as part of the power supply unit produces - together with the transformers of
the bus devices - the positive equalisation pulse.
As the choke has a major part in the forming of the equalisation pulse, the bus devices
may be installed up to 350 m cable length away from the choke (power supply unit).

Home and Building Management Systems
KNX Communication

Communication_E1212a

KNX Association
24/25

KNX BASIC COURSE

Figure 20: Cable lengths between two TP1 bus devices

12.2 Cable Lengths between two TP 1 Bus Devices
A telegram transmission over the cable requires a certain transit time.
If several bus devices try to transmit simultaneously, the occurring collision can be
resolved up to a distance of 700 m (delay time of the signal tv = 10 µs).

12.3 Total Cable Length per TP 1 Line Segment
The signal of the sending bus device will be damped by the continuous loading and
unloading of the cable capacity. At the same time, the signal edges are rounded by the
cable capacity. The signal level drops due to the resistive load (bus cable and device) of
the signal.
To enable the data to be reliably transmitted despite these two effects, the total cable
length per line segment may not exceed 1,000 m and the maximum number of devices
per line segment may never exceed 64 (regardless of the used power supply unit type).

Home and Building Management Systems
KNX Communication

Communication_E1212a

KNX Association
25/25

KNX TP1 Topology

KNX Association

KNX BASIC COURSE

Table of Contents
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19

Topology – Overall view ............................................................................................ 3
Topology ................................................................................................................... 4
Topology: Area.......................................................................................................... 5
Topology: Several Areas ........................................................................................... 6
Individual address ...................................................... Error! Bookmark not defined.
Coupling Unit: Gate Function .................................................................................... 8
Coupler: Block Diagram ............................................................................................ 9
Coupling Unit: Types and Functions .........................................................................10
Coupling Unit: Fields of Application ..........................................................................10
Connecting Several Lines ........................................................................................11
Practical Example for explanation of functionality .....................................................12
Internal Line Telegram .............................................................................................13
Line-crossing Telegram ............................................................................................14
Area-crossing Telegram ...........................................................................................15
Coupling Unit: Routing Counter ................................................................................16
KNX – Internal and External Interfaces ....................................................................17
Topology – Structure in building ...............................................................................18
Taking into account higher telegram rates: IP Network ............................................20
Limits to the use of IP routers ...................................................................................22

Home and Building Management Systems
KNX TP1 Topology

Topology_E1212c

KNX Association
2/22

KNX BASIC COURSE

Figure 1: Maximum topological size of a KNX TP installation

1 Topology – Overall view
In the figure above the maximum topological size of a KNX TP installation is shown.

Home and Building Management Systems
KNX TP1 Topology

Topology_E1212c

KNX Association
3/22

KNX BASIC COURSE

Figure 2: Topology - Line

2 Topology
Each bus device (DVC) can exchange information with any other device by means of
telegrams.
One line consists of a maximum of 4 line segments, each with a maximum of 64 bus
devices. Each segment requires an appropriate power supply. 1
The actual number of devices is dependent on the power supply selected and the power
input of the individual devices.

1 This chapter assumes the use of central power supply units only. For distributed power supply

units, consult chapter ‘TP1 installation’.

Home and Building Management Systems
KNX TP1 Topology

Topology_E1212c

KNX Association
4/22

KNX BASIC COURSE

Figure 3: Topology - Area

3 Topology: Area
If more than 1 line is to be used or if a different structure is to be selected, then up to 15
lines can be connected to a main line via a line coupler (LC). This is called an area.
It is also possible to have up to 64 bus devices on the main line. The maximum number of
bus devices on the main line decreases by the number of line couplers in use.
Each line, including the main line, must have its own power supply unit.
Line repeaters may not be used on backbone or main lines.

Home and Building Management Systems
KNX TP1 Topology

Topology_E1212c

KNX Association
5/22

KNX BASIC COURSE

Figure 4: Topology - Several areas

4 Topology: Several Areas
The KNX TP1 bus can be expanded by means of a backbone line.
The backbone coupler (BC) connects its area to the backbone line.
It is also possible to have bus devices on the backbone line. The maximum number of bus
devices on the backbone line decreases by the number of backbone couplers in use.
Within a maximum of 15 functional areas, more than 58,000 bus devices can be
connected to the bus system.
By dividing the KNX TP1 installation into lines and areas, the functional reliability is
increased considerably.

Home and Building Management Systems
KNX TP1 Topology

Topology_E1212c

KNX Association
6/22

KNX BASIC COURSE

Figure 5: Individual address

5 Individual address
The individual address serves to clearly identify the bus device and describes its location
within the topology.
F =
F =

1-15
0

addresses the areas 1-15
addresses the bus devices on the backbone line

L =
L =

1-15
0

addresses the lines 1-15 in the areas defined by F
addresses the main line

D =
D =

1-255
0

addresses the bus devices on the line defined by L
addresses the coupler

The address of an unloaded bus coupler is 15.15.255.

Home and Building Management Systems
KNX TP1 Topology

Topology_E1212c

KNX Association
7/22

KNX BASIC COURSE

Figure 6: Coupling unit: Gate function

6 Coupling Unit: Gate Function
When the parameters are assigned, the coupling unit is provided with a filter table.
All received group telegrams are routed if they are listed in the filter table.
In this way, each line works independently. Only line-crossing telegrams are routed.
The yellow LEDs of the coupler flicker when a telegram is received on the respective line.
The line repeater passes on all telegrams; it has no filter table.

Home and Building Management Systems
KNX TP1 Topology

Topology_E1212c

KNX Association
8/22

KNX BASIC COURSE

Figure 7: Coupler: Block Diagram

7 Coupler: Block Diagram
The coupler is designed for DIN rail mounting. The primary line is connected via a bus
terminal.
The secondary line is connected through the data rail or via a bus terminal. New types of
couplers (from July 2003 onwards) can be programmed from both the secondary as well
as the primary line.
In the old line coupler type (until June 2003), the secondary line supplies the power for
both bus coupling units, the logic and the filter table memory.
The new coupler has only 1 controller and is supplied by the primary line. This has the
advantage, that the coupler can report secondary line power cuts.
A lithium battery with a life span of more than 10 years (also without connection to the
bus) provides the backup supply for the memory containing the filter table in the old line
coupler type. The new type is equipped with a Flash ROM memory, which does not need
backup battery power. The coupler electrically isolates the lines from each other as ruled
by SELV standard.

Home and Building Management Systems
KNX TP1 Topology

Topology_E1212c

KNX Association
9/22

KNX BASIC COURSE

8 Coupling Unit: Types and Functions
The coupling unit can be used as:
Backbone coupler BC
Connection: Backbone line to Main line
Line coupler LC
Connection: Main line to Secondary line
Line repeater LR
For expanding a line by a line segment with up to 64 additional bus devices and an
additional cable length of 1,000 m.
Bus and line couplers only pass on line-crossing telegrams, whereas a line repeater
passes on all telegrams.
Backbone coupler, line coupler and line repeater are identical devices. The tasks to be
carried out are dependent on the location and the corresponding designated individual
address.

Figure 8: Coupling unit: Fields of application

9 Coupling Unit: Fields of Application
It is the assigned individual address that designates a coupler either as a backbone
coupler, a line coupler or a line repeater. The address 1.1.0, for example, defines a
coupling unit as the line coupler for line 1 in area 1.
The coupler monitors data communication between main line and secondary line and vice
versa. Only the telegrams of which the group addresses are stored in its filter table are
routed.

Home and Building Management Systems
KNX TP1 Topology

Topology_E1212c

KNX Association
10/22

KNX BASIC COURSE

Figure 9: Connecting several lines

10 Connecting Several Lines
In an installation comprising several lines, each line must have its own power supply unit
and choke.
The above figure shows a power supply unit with separate choke as well as a line coupler
of the former generation (wide design).
The secondary line (e.g. line 1) is connected via pressure contacts or via a bus terminal
onto the data rail. The primary line (line 0) is connected by means of bus terminals.

Home and Building Management Systems
KNX TP1 Topology

Topology_E1212c

KNX Association
11/22

KNX BASIC COURSE

Figure 10: Practical example

11 Practical Example for explanation of functionality
The push button T1 shall switch the lights L11, L12 and L13.
During Configuration, Group address 1/1/1 is attributed to the push button. The same
address is also attributed to the actuators in the before-said lamps.
The push button T2 shall switch the lights L21, L22 and L23. The group address 1/1/2 is
assigned to it. Again the same address is attributed to the actuators of these lamps.
The brightness sensor S1 shall also switch the lights next to the window. Group address
1/1/11 is therefore attributed to the sensor as well as to the actuators controlling the
window lights.
The window lights can therefore be switched via the push button as well as the brightness
sensor.

Home and Building Management Systems
KNX TP1 Topology

Topology_E1212c

KNX Association
12/22

KNX BASIC COURSE

Figure 11: Internal line telegram

12 Internal Line Telegram
Pressing push button P1 sends a telegram with the group address 1/1/1.
Although all bus devices listen in when the telegram is transmitted, only the actuators of
lamps L11, L12 and L13 with the common group address 1/1/1 execute the command.
If the brightness sensor sends the group address 1/1/11, all the bus devices on this line
listen in but only the actuators of the window lamps L11 and L21 execute the command.

Home and Building Management Systems
KNX TP1 Topology

Topology_E1212c

KNX Association
13/22

KNX BASIC COURSE

Figure 12: Line-crossing telegram

13 Line-crossing Telegram
If the brightness sensor is not connected in the same line as the lamp it has to control, it is
necessary to transmit its telegrams via the main line.
The parameters assigned to line coupler LC2 contain all the necessary information for this
line coupler. LC2 is thus aware of the fact that there are bus devices outside its own “line
2” which respond to telegrams transmitted by the brightness sensor. LC2 therefore routes
the group telegram 1/1/11 onto the main line.
Line coupler LC1 is aware of bus devices on its “line 1” that respond to the group telegram
1/1/11 and therefore transmits the telegram to its line.
All the bus devices on this line listen to the telegram from the brightness sensor but only
the actuators of lamps L11 and L12 execute the command.

Home and Building Management Systems
KNX TP1 Topology

Topology_E1212c

KNX Association
14/22

KNX BASIC COURSE

Figure 13: Area-crossing telegram

14 Area-crossing Telegram
Even if brightness sensor S1 is assigned to a different function area, it can still address all
bus devices through the backbone line.
If the group address 1/1/11 is assigned to the brightness sensor, the telegram is routed to
line 1 by backbone couplers BC1 and BC2 and line coupler LC1.
The actuators of lamps L11 and L21 in function area 1/line 1 then execute the command.

Home and Building Management Systems
KNX TP1 Topology

Topology_E1212c

KNX Association
15/22

KNX BASIC COURSE

Figure 14: Coupling unit: Routing counter

15 Coupling Unit: Routing Counter
The telegram transmitted by the sending device contains a routing counter, of which the
initial count value is 6.
Each coupler decrements the routing counter and passes on the telegram as long as the
value is not 0.The filter table entries are observed.
If the service device, for example, transmits a telegram containing a routing count value of
7, the coupling units do not alter this value. In this case the filter table is ignored and all
line couplers in the installation route the telegram. It finally reaches the bus devices it is
intended for, no matter which line they are connected to.
If the installation has a line-crossing structure, the routing counter limits the number of
telegrams that cross lines.

Home and Building Management Systems
KNX TP1 Topology

Topology_E1212c

KNX Association
16/22

KNX BASIC COURSE

Figure 15: KNX - Internal and External Interfaces

16 KNX – Internal and External Interfaces
KNX is open to any other system. The backbone line (or any other line) can be connected
via a gateway unit to e.g. SPS, ISDN, building management technology, Internet etc.
The gateway unit carries out a bi-directional conversion of the protocol.
The respective media couplers connect KNX media of different types (e.g. Twisted Pair 1
and Power Line 110).
Parts of KNX installations can also be linked via optical fibres. The benefits of this are
electrical isolation and greater cable lengths.

Home and Building Management Systems
KNX TP1 Topology

Topology_E1212c

KNX Association
17/22

KNX BASIC COURSE

Figure 16: Division of lines in a medium-sized project (example)

17 Topology – Structure in building
After the above theoretical introduction, some practical information (the above picture is
by the way explained in detail in chapter “ETS Project Design – Advanced”).
Ideally, a building does not have more than 50 bus devices installed per floor. Or one can
– as shown in the above picture, make a division according to the different wings of the
building. It is clear that in this case the better overview will be realised when line numbers
correspond to floor numbers and area numbers correspond to building - or wing numbers.

Home and Building Management Systems
KNX TP1 Topology

Topology_E1212c

KNX Association
18/22

KNX BASIC COURSE

Figure 17: The above picture is clearer with the required couplers

Of course it will not be possible to realize this under all circumstances. As line repeaters
can be installed (as already indicated before), such a floor may be equipped with up to
253 devices, without having to violate the above structure (taking into account that line
repeaters have to be counted double as discussed before, the normal maximum number
of devices of 256 is reduced by 3). With that many devices it is possible to realize nearly
any application, in view of the current evolution in the development of KNX devices and
the availability of input - / output devices with in the mean while more than 16 channels.

Home and Building Management Systems
KNX TP1 Topology

Topology_E1212c

KNX Association
19/22

KNX BASIC COURSE

Figure 18: Replacing line couplers by so-called “IP Routers”

18 Taking into account higher telegram rates: IP Network
As explained in the previous paragraph, on all levels gateways to other systems can be
installed. Increasingly, this is demanded in bigger projects as a result of higher customer
demands.
An important reason is the increased telegram load, which can occur when the user
makes use of visualisation software and devices with a higher number of channels, all of
which automatically returning multiple status acknowledgements.. In the latter case, a
pure TP topology is overloaded due to the fact that transmission speed on main – and
backbone lines is limited to 9,6 kBit / sec. In such a case one can easily use an IP network
as a substitute for main – or backbone lines, by using the coupler that was designed for
this purpose.
As you can see from above picture, the main line has been replaced by an IP network.
This has the advantage that all vertical operations e.g. the (bi-directional) communication
between a building central and KNX is only determined by the bit rate of the secondary
line (Ethernet is at least 1000 times faster; with the so-called “Gigabit” – switches it is
possible to transmit data on the Ethernet 100 000 times faster). The parallel connection of
several lines is no longer an issue. The standardized type of communication applied here
is called “Tunnelling”. It is in other words the well-known gateway function, which is also

Home and Building Management Systems
KNX TP1 Topology

Topology_E1212c

KNX Association
20/22

KNX BASIC COURSE
used by ETS for remote programming across IP. A building central can be connected
simultaneously to several gateways, multiplying the total data rate.
A different story is the direct communication between the individual KNX lines. The IP
router makes use of another procedure which is called “routing”, or the actual line coupler
function. Principally it works in the same way as routing across a TP main line: An IP
router wanting to send a line-crossing telegram, will send this with a so-called “Multicast”
IP address into Ethernet. All other IP routers are connected to this multicast address, and
are able to receive and evaluate this telegram. The normal line coupler function is now
again applied, i.e. the comparison with the compulsory filter table (group telegrams) or the
line address (individual addressed telegrams) resulting in the ad hoc blocking or routing of
telegrams.
Please note the following with regard to multicast addresses:
a) There is a dedicated worldwide registered KNX multicast address, which is preprogrammed in the software of the IP router. This multicast address can be
changed within the limits of the available address range for IP communication.
b) The network switch and area router in the LAN network must be fit to handle
multicast telegrams. In case of doubt you should discuss this matter in advance
with your network administrator.
c) The multicast addresses cannot be used across Internet, except across a VPN
connection.

Our picture again: line couplers have now been replaced by IP routers. This picture represents the
underneath explained case 1.

Home and Building Management Systems
KNX TP1 Topology

Topology_E1212c

KNX Association
21/22

KNX BASIC COURSE
Just like the TP/TP coupler, the IP router can be used as a line coupler as well as a
backbone coupler. If the IP router replaces the line coupler, all main lines and basically
also the backbone line are replaced by Ethernet. (Case 1).
If backbone couplers are replaced by IP routers, the normal line couplers can remain, as
only the backbone line is replaced by the LAN (case 2).
Which case is more appropriate depends more or less on the to be expected telegram
rate requirements on main – and backbone lines. Theoretically, a third case is possible, as
a combination of case 1 and 2, with normal TP areas with an IP router on top and also
with lines with IP routers instead of line couplers. This option should however be chosen
in exceptional cases. The topic is described in more detail in the KNX advanced course.

19 Limits to the use of IP routers
Even if the high bit rate of Ethernet considerably facilitates heavy telegram traffic and
minimizes telegram loss, one should warn not to thoughtlessly program bus devices
sending out telegrams too frequently. The fast Ethernet will not help if for instance
telegrams are sent out simultaneously from all lines into one single line. To explain it with
a metaphor: the case would be similar to all cars accessing a 1000 lane motorway via 100
entries but all of them also wanting to exit via a single lane exit. This is by the way not a
KNX related problem it is common to all mash structured data networks.
Only a meaningful organisation of communication between bus devices and lines will be
able to prevent a very unlikely but still possible loss of data.
This however should be easily possible with sufficient knowledge on bus devices and their
respective parameters.

Home and Building Management Systems
KNX TP1 Topology

Topology_E1212c

KNX Association
22/22

KNX Bus Devices

KNX Association

KNX BASIC COURSE

Table of Contents
1
2
3
4

Introduction ................................................................................................................3
Internal structure of a Bus Coupling Unit ....................................................................5
Type Definition of an Application Module ...................................................................8
Overview of principal KNX standardised system profiles ............................................9
4.1
4.2

System 1 (TP1/PL110) – TP1 System 2 – TP1 System 7 ...................................9
System 2 and System 7 Characteristics ...........................................................10

4.2.1
4.2.2
4.2.3
5
6
7
8
9
10

Access control ..............................................................................................10
Serial number ...............................................................................................10
Interface Objects ..........................................................................................10

Application Function: Dimming with Start/Stop Telegram .........................................11
Dimming with Cyclical Telegrams.............................................................................12
Application Function: 'Dimming Actuator' .................................................................13
Application: Drive Control Sensor.............................................................................14
Application: Drive Control .........................................................................................15
Drive Control Object Structure .................................................................................16

Home and Building Management Systems
KNX Bus Devices

Busdevices_E0608c

KNX Association
2/16

KNX BASIC COURSE

Figure 1: Bus device

1 Introduction
A functioning bus device (e.g. dimming actuator/drive control, multi-functional push
button, fire sensor…) principally consists of three parts:
bus coupling unit (BCU)
application module (AM)
application program (AP)
Bus coupling units and application modules are offered on the market either separated or
integrated into one housing. They must however be from the same manufacturer. If
separated, the application module is connected to the BCU via a standardised application
interface, the Physical External Interface or PEI. This 10 or 12 pin PEI serves as
an interface to exchange messages between both parts (5 pins)
the power supply of the application module (2 pins)
Some application modules can only be connected to a specific BCU type. When the bus
coupling unit is a separate part of the bus device, it is mostly available in a wall mounted
design. In case of TP1 devices, the connection to the bus is mostly ensured via the
standardised bus terminal (dark grey/red); in case of DIN rail devices via contact blocks to
the data rail.
When the BCU is an integrated part of the bus device, it has mostly been built into the
bus device via a BIM (Bus Interface Module) or via a chip set by the manufacturer of the
bus device. Principally a BIM is derived from a bus coupling unit by omitting the latter's

Home and Building Management Systems
KNX Bus Devices

Busdevices_E0608c

KNX Association
3/16

KNX BASIC COURSE
housing and a number of other components. A chip set consists of the core of a BIM, i.e.
the controller and the transceiver 1.
BCUs are currently available for connection to two different media: Twisted Pair 1 (Safety
Extra Low Voltage 32V) or Powerline 110 (mains power). A RF BCU is not available: KNX
RF compatible devices are integrated solutions.
Each bus device has its own intelligence owing to the integrated BCU: this is the reason
why KNX is run as a decentralised system and does not need a central supervising unit
(e.g. a computer). Central functions (e.g. supervision) can however if needed be assumed
by visualisation and control software installed on PCs.
Bus devices can principally be divided into three classes: sensors, actuators and
controllers.
In the case of a sensor, the application module transfers information to the BCU. The
latter codes this data and sends it on the bus. The BCU therefore checks the state of
the application module at appropriate intervals.
In the case of an actuator, the BCU receives telegrams from the bus, decodes them
and passes on this information to the application module.
A controller will influence the interaction between sensors and actuators (e.g. logical
module).
In case of S-mode compatible KNX devices, a device receives its specific function once
the appropriate application program for the application module has been loaded into the
(universal) BCU (via the ETS). An S-mode compatible KNX push button mounted on a
BCU can only generate dimming signals, after the suitable application program has been
programmed in the device via the ETS.
In case of E-mode compatible KNX devices, a device is normally shipped with loaded
application program. The linking of such KNX devices and the setting of the relevant
parameters is either ensured via appropriate hardware settings or via a central controller.

1

This can be a discrete solution, an ASIC or in case of TP 1, the so called TP-UART.

Home and Building Management Systems
KNX Bus Devices

Busdevices_E0608c

KNX Association
4/16

KNX BASIC COURSE

Figure 2: Internal structure of a bus coupling unit

2 Internal structure of a Bus Coupling Unit
A KNX BCU principally consists of two parts: a controller and a transceiver suitable for the
connected medium. In the different types of a memory of the microprocessor (µP) inside
the controller, the following data is stored:
The system software: the different standardised KNX system software profiles are
identified by their “mask version” or “device descriptor type 0”. The mask version
consists of 2 bytes where




the first digit y refers to the corresponding medium – 0 for TP1, 1 for PL110, 2 for
RF and 5 for KNXnet/IP. All software profiles not always contain the previously
mentioned media.
The last digit x refers to the current version of the software profile
ETS is informed about the underneath mentioned system profiles by the following
mask versions:





2

y01xh: System 1
y02xh: System 2 3
y70xh: System 7 4
y7Bxh: System B

2

previously referred to as BCU1
previously referred to as BCU2
4
previously referred to as BIM M 112
3

Home and Building Management Systems
KNX Bus Devices

Busdevices_E0608c

KNX Association
5/16

KNX BASIC COURSE






y300h: LTE
091xh: TP1 Line/area coupler – Repeater
190xh: Media coupler TP1-PL110
2010h: RF bi-directional devices
2110h: RF unidirectional devices

Devices based on the latter two system profiles can for the time being not be handled by
ETS. The system software is usually stored in ROM or Flash memory and can mostly not
be overwritten.
temporary values of the system and the application: these are usually stored in RAM
memory and lost (if not stored to EEPROM or Flash memory before power loss).
the application program, the physical and group addresses: these are usually stored
in EEPROM or Flash memory and can be overwritten.
In the case of S-mode compatible devices, the manufacturer makes the application
program available to the installer as an ETS database, who then loads it into the device.
The manufacturer's code for the application program and the bus coupling unit must be
identical to be able to load the application program.
In case of E-mode devices, the device will report its supported functionality (as regards
supported easy channels) by means of the device descriptor 2.

Home and Building Management Systems
KNX Bus Devices

Busdevices_E0608c

KNX Association
6/16

KNX BASIC COURSE

Figure 3: TP1- Transceiver

The TP1 transceiver has the following functions:
Separation or superimposing of the direct current and data
Reverse voltage protection (RPP)
Generation of stabilised voltages of 5 respectively 24V
Initiating a data back-up (Usave) if the bus voltage drops below 18V
Triggering a processor reset if the voltage drops below 4.5 V
Driver for transmitting and receiving
Sending and receiving logic

Home and Building Management Systems
KNX Bus Devices

Busdevices_E0608c

KNX Association
7/16

KNX BASIC COURSE

3 Type Definition of an Application Module

Figure 4: Type Definition of an application module

Via a resistor (R-Type) in the application module, the bus coupling unit is able to detect
via pin 6 of the PEI, whether the application module mounted on the BCU fits to the
loaded application program. When the R-Type does not correspond to the one indicated
in the application program, the BCU automatically halts the application program.
The table below gives an overview of the principal PEI types.
Type

Voltage V

Function

0

0.00

No application module connected

2

0.50

4 binary (analogue) inputs, 1 binary output

4

1.00

2 binary (analogue) inputs, 2+1 binary outputs

6

1.50

3 binary (analogue) inputs, 1+1 binary outputs

12

3.00

serial synchronous

14

3.50

serial synchronous fixed length

16

4.00

serial asynchronous

19

4.75

4+1 binary outputs

20

5.00

Download

Home and Building Management Systems
KNX Bus Devices

Busdevices_E0608c

KNX Association
8/16

KNX BASIC COURSE

4 Overview of principal KNX standardised system profiles
4.1 System 1 (TP1/PL110) – TP1 System 2 – TP1 System 7
System 1 technology is the first generation of KNX devices. Products based on System 1
and System 7, have also been available on the market for some time. The table below
gives an overview of the principal characteristics of these KNX system components:
System 1
(TP1 + PL110)

System 2/7

Maximum number of group objects

12

255

Maximum number of group addresses

64

254

Support of interface objects

No

Yes

Support serial number

No

Yes

Support access control

No

Yes

The System 7 technology is especially intended for more complex bus devices, which
assume centralised functions (e.g. application controllers, gateways...).
Application programs designed for System 1 technology can also be loaded into a
System 2.

Home and Building Management Systems
KNX Bus Devices

Busdevices_E0608c

KNX Association
9/16

KNX BASIC COURSE

4.2 System 2 and System 7 Characteristics
The characteristics of System 2 and System 7 outlined above are explained in detail
below:
4.2.1 Access control
When a tool wants to access memory of System 2 and 7 devices (reading and/or writing),
it must first get authorisation by means of an authorisation key of 4 Byte.
A manufacturer can define up to 16 such keys for a System 7 product or 4 keys for a
System 2 product: however some of these are reserved for access to system relevant
memory (amongst others the highest access key 0) and are therefore not communicated
to the customers. The ETS (from version 1.1 onwards) is able to address these access
mechanisms of the above mentioned device types.
Access control is never needed for normal communication via group addresses. In this
case access is always possible.
4.2.2 Serial number
System 2 and System 7 devices use a serial number: this number, which is assigned to
each device before leaving the factory, allows writing or reading the individual address of
a device without having to press the programming button of the device. This feature is
however not yet supported in ETS.
4.2.3 Interface Objects
Interface Objects contain certain system and application properties (e.g. address table,
parameters …), which can be read and/or written by a tool (e.g. ETS during download)
without explicit knowledge of the device’s memory map. The ETS end user cannot
manipulate such objects.

Home and Building Management Systems
KNX Bus Devices

Busdevices_E0608c

KNX Association
10/16

KNX BASIC COURSE

100%

0%

Start
dimming
long
operation

Stop
dimming
release
dimming
rocker plate

Switch off:
short
operation of
rocker plate

Switch on:
short
operation of
rocker plate

Start
dimming
long
operation

Stop
dimming:
release
rocker plate

Dimming actuator switches to last reached
value (parameter dependant)

Figure 5: Dimming with Start/Stop Telegram

5 Application Function: Dimming with Start/Stop Telegram
The duration of the key operation determines whether the switching function or the
dimming function is activated. If the time the key is pressed is shorter than t2 (e.g. < 500
ms), a switch telegram is transmitted. Longer periods of key operation after the period t2
cause the transmission of a 'start dimming' telegram. As soon as the key is released
again, a 'stop dimming' telegram is transmitted. The time t1 is used for key debouncing.
Different group addresses are used for the switching and dimming telegrams to ensure
that the dimming actuator executes the correct functions.

Home and Building Management Systems
KNX Bus Devices

Busdevices_E0608c

KNX Association
11/16

KNX BASIC COURSE
Dimming speed of the actuator shall be adapted to the cyclical transmission of dimming telegrams
Brightness
100%
7/8
6/8
5/8
4/8
3/8
2/8
1/8

+ 12.5%

+ 12.5%

+ 12.5%

+ 12.5% + 12.5% + 12.5%

+ 12.5%

+ 12.5%

Time

Figure 6: Dimming with Cyclical Telegrams

6 Dimming with Cyclical Telegrams
In a system controlled by infrared light, the light beam might be interrupted as somebody
passes by. In order to avoid a situation where the dimming actuator does not receive
telegrams (e.g. the stop telegram), in most cases one will choose the setting 'cyclical
dimming' during parameterisation of an infrared control. The infrared sensor in these
settings transmits the telegram 'increase brightness by 12.5%‘. The consequences of
losing such a telegram are not as serious as the loss of a stop telegram, which is only
sent once.

Home and Building Management Systems
KNX Bus Devices

Busdevices_E0608c

KNX Association
12/16

KNX BASIC COURSE

BCU

PEI

AC 230 V

AU

SR

DAC

24 V
5V

0-10 V

Dimming
electronic
choke

15 V

BCU = Bus coupling unit
AU = Application unit
PEI = Phys. extern. interface

SR
= Shift register
DAC = Digital-analogue converter

Figure 7: Application function: 'Dimming actuator'

7 Application Function: 'Dimming Actuator'
During the dimming period, the bus coupling unit increases or decreases the digital
brightness value according to the set regulating time. The brightness value is
continuously passed on to the shift register (SR) in the application unit.
The 8 bit long data word allows the generation of 28 = 256 brightness values.
The data word is fed into the digital/analogue converter (DAC), which then generates the
appropriate control voltage in the range of 0 to 10V. The dimmer's electronic choke uses
the voltage to control the light emission of a fluorescent tube. The power circuit breaker in
the application unit is used to (dis)connect the mains voltage.

Home and Building Management Systems
KNX Bus Devices

Busdevices_E0608c

KNX Association
13/16

KNX BASIC COURSE

8 Application: Drive Control Sensor

Figure 8: Application: Drive Control Sensor

The time t2 (e.g. 500 ms) acts as a "boundary" between the commands "slats open/close
1 step' and 'blinds up/down'.

Home and Building Management Systems
KNX Bus Devices

Busdevices_E0608c

KNX Association
14/16

KNX BASIC COURSE

Figure 9: Application: Drive Control

9 Application: Drive Control
Depending on the telegram received, the BCU transmits the command 'up' or the
command 'down' to the power circuit breaker S2. On receiving the telegrams 'slats
open/close 1 step', the BCU energises the circuit breaker S1 for the appropriate duration.
If the motor was already switched on, this telegram halts the blind. On receiving the
telegram 'blinds up/down', the BCU energises the circuit breaker S1 for a period longer
than the time the blind is in movement. As usual the limit switches bring the motor to a
halt when one of the limit positions is reached.

Home and Building Management Systems
KNX Bus Devices

Busdevices_E0608c

KNX Association
15/16

KNX BASIC COURSE

Figure 10: Drive Control Object Structure

10 Drive Control Object Structure
If, for example, the sensor responsible for measuring the position of the sun triggers the
telegram 'blinds down' using the group address 2/31, the object group "up/down" is
addressed and the corresponding command is executed.
Brief operation of the key sensor transmits the 2/13 telegram 'adjust slats' and long
operation of the key sensor sends the 2/12 telegram 'open/close blinds completely'.
Telegram 2/99 triggered by the wind sensor addresses the object group ‘security’. If a
gale is developing, telegram 2/99 orders the blinds to be opened completely and disables
any further operation. When the storm has eased off, a telegram is sent that enables
blind operation again.

Home and Building Management Systems
KNX Bus Devices

Busdevices_E0608c

KNX Association
16/16

KNX TP1 Installation

KNX Association

KNX BASIC COURSE

Table of Contents
1
2
3
4
5
6

Safety Low Voltage Networks ....................................................................................3
SELV Safety Extra Low Voltage Network ...................................................................4
Types of Bus Cable ....................................................................................................5
Installation of Cables ..................................................................................................7
Bus Devices in Distribution Boards ............................................................................8
Power Supply Unit......................................................................................................9
6.1
6.2

7
8
9
10
11
12
13
14
15
16
17
18
19

Power Supply for Two Lines .............................................................................12
Two Power Supply Units on One Line ..............................................................13

Distributed power supply ..........................................................................................14
Data Rails and Data Rail Covers ..............................................................................15
Bus Cables in Wall Boxes ........................................................................................16
Installation of Flush-mounted Bus Devices...............................................................17
Standardised TP1 Bus Connection Block .................................................................18
Lightning Protection Measures .................................................................................19
Bus Cables Installed between Buildings ...................................................................21
The Prevention of Loops ..........................................................................................22
Basic Immunity of Bus Devices ................................................................................23
Bus Devices on Cable Ends .....................................................................................23
The Overvoltage Arrester Terminal ..........................................................................24
Recommendations to the use of overvoltage arresters ............................................24
Checking the Installation ..........................................................................................25

Home and Building Management Systems
KNX TP1 Installation

Installation_E1212a

KNX Association
2/26

KNX BASIC COURSE

Figure 1: Safety Low Voltage Networks

1 Safety Low Voltage Networks
General: for the bus and mains installation the relevant installation requirements of the respective
country shall be observed.

SELV stands for Safety Extra Low Voltage
Clearance and creepage distances:
The clearance and creepage distances indicated above apply for:
Pollution degree 2 (offices)
Overvoltage category 3 (permanently connected to mains, high availability)
Insulation material class 3
Permitted voltage range:
Alternating current: ≤ 50 V
Direct current: ≤ 120 V
No special protection against direct contact if required if the voltages do not exceed 25 V_
or 60 V_.
Earthing:
A SELV network must not be earthed!

Home and Building Management Systems
KNX TP1 Installation

Installation_E1212a

KNX Association
3/26

KNX BASIC COURSE

Figure 2: SELV Safety Extra Low Voltage Network

2 SELV Safety Extra Low Voltage Network
A safety transformer generates the SELV voltage for the KNX TP1 Installation Bus.
Voltage used:
DC 30 V
Insulation:
Safe isolation from other networks.
Basic insulation to earth.
No insulation on the user’s side.
Attention:
The SELV network must NOT be earthed!
Cables that are intended for the installation of heavy-current networks may not be
used for the installation of TP1 networks!

Home and Building Management Systems
KNX TP1 Installation

Installation_E1212a

KNX Association
4/26

KNX BASIC COURSE

Figure 3: Types of bus cable

3 Types of Bus Cable
Twisted Pair 1 cable which fulfils the KNX requirements in volume 9 of the KNX
Specifications (e.g. YCYM 2×2×0.8 or J-Y(St)Y 2×2×0.8 in TP1 design) can be
recognised (without KNX logo) or certified (with KNX logo) by KNX Association 1. Only the
standard green KNX TP1 cable guarantees:
max. cable length of a line
max. distance between two bus devices on a line
max. number of bus devices per line

This is based on the loop resistance of 75 Ω and the loop capacitance of 100 nF per 1000
m. For all other cables, the maximum length given in the data sheet of the cable must be
observed.
It is not normally necessary to connect the shielding of the installed cable types.

1 For the current list of KNX certified/approved cable types, please consult the KNX web site

(www.knx.org)

Home and Building Management Systems
KNX TP1 Installation

Installation_E1212a

KNX Association
5/26

KNX BASIC COURSE
When installing a standard cable with a test voltage of 4 kV, the following conditions
apply.
Used wire pair:
Red: plus
Black: minus
Spare wire pair: Permitted use of the spare wire pair:
no connection at all
for other SELV low voltage methods
Test voltage according to EN 50090:
The specified test voltage must be applied to all connected wire cores (shielding drain
wire included) and the outer surface of the cable sheath.
Note:
Please make sure that the cables are properly identified and marked!

Home and Building Management Systems
KNX TP1 Installation

Installation_E1212a

KNX Association
6/26

KNX BASIC COURSE

Figure 4: Installation of cables

4 Installation of Cables
The requirements for the installation of bus cables are generally the same as for the
installation of 230/400 V networks.
Special requirements:
Insulated wire cores of sheathed mains cables and KNX TP1 bus cables may be
installed next to each other without any clearance space.
A minimum clearance space of 4 mm must be observed between the insulated wire
cores of KNX TP1 bus cables and those of sheathed mains cables. Alternatively, the
wire cores must be provided with an equivalent insulation, such as a spacer or
insulation sleeving (DIN VDE 0110-1, Basic insulation). This also applies to wire cores
of other cables that are not part of SELV/PELV circuits.
An adequate distance to the external lightning protection system (lightning arrester)
must be ensured.
All cables should be permanently marked as KNX TP1 or BUS cables.
A terminating resistor is not required.

Home and Building Management Systems
KNX TP1 Installation

Installation_E1212a

KNX Association
7/26

KNX BASIC COURSE

Use standardised distribution
boards
Install bus cables with sheath up
to terminals
Cover unused section of data
rail
Do not install bus devices above
mains devices with significant
power losses
Standardised
power distribution boards

Requirements

Figure 5: Bus devices in distribution boards

5 Bus Devices in Distribution Boards
Any commercial, standardised electric power distribution boards equipped with EN 50022
35x7.5mm DIN rails may be used, on which KNX TP1 DIN rail mounted devices can be
installed. Some of these KNX TP1 DIN-rail mounted devices use spring contact blocks to
a standard data rail glued into DIN rails, others provide the normal bus connector (see
later) for connection to the bus.
Unused parts of data rail must be protected by cover strips.
If the mains section is separated from the installation bus, no special installation
requirements need to be observed.
If the mains section is not separated from the installation bus, the bus cables must be
sheathed up to the terminals.
Possible contact between mains cores and bus cable cores must be prevented by
adequate wiring and/or mounting.
Bus devices should not be mounted above mains devices with significant power losses,
as this could cause excessive heat development in the installation.
When a lightning arrester is installed on a DIN rail containing a data rail, the following
requirements must be met:
Overall insulation of the arrester (e.g. do not use any uncovered air sparking gaps).
As DIN rails may not be used for earthing, arresters must be provided with a separate
earthing terminal.
Home and Building Management Systems
KNX TP1 Installation

Installation_E1212a

KNX Association
8/26

KNX BASIC COURSE

Figure 6: Power supply unit (with TP1 connectors)

Figure 7: Power supply unit (DIN Rail with data rail)

6 Power Supply Unit
Note: if not explicitly said underneath, the underneath clauses deal with the centralised
power supply units.
Power supply units produce and monitor the system voltage of 30 V that is necessary for
the operation of a KNX TP1 installation. Each line has its own power supply unit for the
bus devices. The power supply unit has an integrated voltage and current control and is
therefore resistant to short circuits.
A buffer with a stored-energy time of 100 ms is able to bridge short power gaps.

Home and Building Management Systems
KNX TP1 Installation

Installation_E1212a

KNX Association
9/26

KNX BASIC COURSE
Bus devices require a minimum of 21 V for safe operation and constitute a load of up to
200 mW on the bus except some devices whose energy requirement should be taken
from the data sheet of the respective manufacturer (e.g. heating valves).
With a power supply of e.g. 640 mA, it is possible to connect 64 devices with a maximum
capacity of 200 mW and an almost identical distribution on the line.

Figure 8: Example and features of a power supply unit (on DIN-Rail without data rail)

Figure 9: Example and features of a power supply unit (on DIN-Rail with data rail)

To prevent static charges on the bus side, the power supply unit has high ohmic
resistances connected from each bus core to earth.
Home and Building Management Systems
KNX TP1 Installation

Installation_E1212a

KNX Association
10/26

KNX BASIC COURSE
The power supply unit should be earthed. To do so, connect the earth point of the low
voltage section to the power supply unit. This connection should be marked yellow/green.
It does not have any protective effect according to safety regulations and does not
contradict the conditions that apply to SELV networks.
Some power supply types or the external chokes have a reset switch and a red control
LED. The connected line can be set to 0 V with this switch.
The chokes prevent the short-circuiting of bus telegrams (alternating voltage 9600 Hz) via
the filter or charging capacitor of the power supply unit.
Many types of power supply units are available, depending on the supplied output current
(160 mA, 320 mA, 640 mA)). It goes without saying that the number of installable devices
in a line depends on type of PSU used and the individual power consumption of the
devices in that line. Some PSU types have an integrated choke, some need an additional
external choke.
Most of the power supply units are DIN-rail mounted types, whereby only the two outer
printed conductors of the data rail make contact with the power supply unit.
Some types have an additional output, with which it is possible to supply other lines using
an external choke.
Uninterruptible power supply types are also available.
Some PSU types have a floating relay output providing information about normal
operation/mains failure for evaluation purposes.
Most of the PSU types have LEDs, indicating the operating mode of the power supply unit
e.g.
Green: The power supply is active.
Red: The power supply unit is overloaded, maybe due to a short circuit between bus
wires.
Yellow: An external voltage higher than 30 V has been applied to the bus side.

Home and Building Management Systems
KNX TP1 Installation

Installation_E1212a

KNX Association
11/26

KNX BASIC COURSE

Figure 10: Power supply for two lines (DIN-Rail without data rail)

Figure 11: Power supply for two lines (DIN-Rail with data rail)

6.1 Power Supply for Two Lines
If additional current is needed, one power supply unit for two lines can be implemented.
An additional choke may be required depending on the type of power supply unit.

Home and Building Management Systems
KNX TP1 Installation

Installation_E1212a

KNX Association
12/26

KNX BASIC COURSE

Figure 12: Two power supply units on one line

6.2 Two Power Supply Units on One Line
If more than 30 bus devices are connected within a short distance to each other (e.g. on a
distribution board), the power supply unit should be installed in the vicinity of this group.
If an additional power supply unit is to be installed, the minimum distance shall be taken
from the product specifications. One line may only have a maximum of two power supply
units connected to it.

Figure 13: Cable length

Home and Building Management Systems
KNX TP1 Installation

Installation_E1212a

KNX Association
13/26

KNX BASIC COURSE

7 Distributed power supply
Instead of a centralised bus power supply, the bus is powered in a distributed way by
some devices connected to the line containing each a Decentralised Power Supply Unit
(DPSU) with integrated choke module. Stand-alone DPSU (non-communicating devices)
are also possible.
A DPSU is especially intended for small installations with few devices.
Different types of DPSU exist, depending on the supply current (25, 40 and 80 mA).
In most cases, it is possible to combine DPSU with up to two standard central PSUs.
The DPSU can be located at any point in the bus line. There are no limitations concerning
minimal distances between two DPSUs or DPSU and standard central PSU.
Up to eight DPSUs can be mounted in one single bus line. More than eight can have a
negative effect on the communication. In case of mounting up to 8 DPSUs in a single line
together with a central PSU, the maximum resulting short circuit current of these devices
(as given in the product data sheet and/or ETS database) shall not exceed 3A.
In most cases it is possible to manually disable the DPSU on the device (e.g. by jumper or
configuration of a parameter).
The to be observed cable length in conjunction with the use of central and decentralised
power supply units is given in the above figure.

Home and Building Management Systems
KNX TP1 Installation

Installation_E1212a

KNX Association
14/26

KNX BASIC COURSE

Figure 14: Data rails and data rail covers

8 Data Rails and Data Rail Covers
Some DIN rail type bus devices, such as binary outputs, dimmers, power supply unit etc.,
use a data rail to connect to the KNX TP1 bus.
The self-adhesive data rail is mounted on the 35 mm DIN rail according to EN 50022.
The lengths of ready-made data rails match the various widths of the standardised
electric power distribution boards available. The length of a data rail may not be changed,
for instance by cutting it shorter, as this would change the creepage and clearance
distances.
When DIN-rail mounted KNX TP1 bus devices use the data rail to connect to the TP1 bus
when snapped on the DIN rail, they do so by means of a pressure contact mechanism. In
order to protect unused sections of data rail from pollution or from accidental contact with
mains cables, they should be covered by a data rail cover.

Home and Building Management Systems
KNX TP1 Installation

Installation_E1212a

KNX Association
15/26

KNX BASIC COURSE

Figure 15: Bus cables in wall boxes

9 Bus Cables in Wall Boxes
SELV circuits require double or reinforced insulation (protective separation) between
mains and bus cables, i.e. unsheathed bus cable cores should never be in contact with
mains cables.
Junctions can be installed:
in separate boxes or
in a common box with a partition, ensuring 8 mm clearance and creepage distances
e.g. for TN/TT networks in office buildings.

Home and Building Management Systems
KNX TP1 Installation

Installation_E1212a

KNX Association
16/26

KNX BASIC COURSE

Area
Line
Device

?

Area

230/400V

Line
Device

Use of wall boxes for screw mounting

Permitted use of flush-mounted devices in combination with mains devices
depends on the environmental conditions and the design of the bus devices
(e.g. pollution degree, overvoltage category).

Figure 16: Installation of flush-mounted bus devices

10 Installation of Flush-mounted Bus Devices
Only wall boxes suitable for screw mounting may be used. Clamp mounting is not
possible in most cases.
In order to provide sufficient room for cables, wall boxes with a depth of 50 mm, for
instance, should be installed.

‘Combinations’ refer to the use of mains devices (e.g. socket outlets) and bus devices
(e.g. pushbuttons) or other electric circuits underneath a common cover.
Both components must be safely isolated from each other. This can be achieved by using
basic insulation for the power devices and basic 230 V insulation for the bus device.
Please do not forget to enquire with the manufacturer of the bus device whether this
particular device may be installed together with power devices.
Please note:
The installation of a bus device in combination with power devices must be explicitly
approved by the manufacturer of the bus device!
The manufacturer may specify certain bus installation requirements, which must be
strictly observed (e.g. connection of the frame to the protective earth conductor).
Mains devices must at all times be protected against accidental contact, even when
the common box cover is removed.

Home and Building Management Systems
KNX TP1 Installation

Installation_E1212a

KNX Association
17/26

KNX BASIC COURSE

Joints, extensions or connections
are realised by means of bus
connection blocks
Bus cable shall only end either at the
device itself or at this terminal
Removal of bus devices without
interrupting the bus
Mechanical protection against mismating

Bus connection block

Usage

Figure 17: Bus connection block

11 Standardised TP1 Bus Connection Block
The bus connection block is used for
branching the bus cable
extending the bus cable
protecting the bus cable ends
connecting the bus cable to bus devices
To avoid confusion with other electrical circuits, the bus connection block should only be
used for the KNX TP1 installation bus.
The bus connection block consists of two parts:
the PLUS part (red) and
the MINUS part (grey)
which are mechanically linked by means of a dovetail joint. Up to four bus wires (6 mm
stripped) can be connected to each part by means of screwless terminals.
Standardised TP1 bus connection blocks allow the removal of bus devices without
interrupting the bus wire.

Home and Building Management Systems
KNX TP1 Installation

Installation_E1212a

KNX Association
18/26

KNX BASIC COURSE

Figure 18: Lightning protection measures

12 Lightning Protection Measures
The KNX TP1 bus network should be integrated into the protection measures of the
mains power network.
The need for lightning protection for buildings may be the result of:
the local building regulations (e.g. in Germany of the federal states);
a risk analysis of the construction (e.g. in Germany according VDE 0815 part 2)
a requirement from an insurance company (in Germany according VdS 2010).
In general, lightning protection measures are required for buildings which can be easily
struck by lightning or to which lightning can inflict heavy damage. These especially
include conference rooms, public buildings etc.
The internal lightning protection constitutes the most indispensable part of a lightning
protection system. Its most significant component is the lightning protection equipotential
bonding bar.
All conducting elements or systems, such as the water supply system, gas pipes, central
heating system, metal walls, etc. must be connected to the equipotential bonding strip
(EBS). In the currently valid guidelines (DIN VDE 0185 Part 1 to 4, IEC 1024-1, IEC
61312-1), the lightning protection equipotential bonding strip is a binding requirement also
for active conductors; they must be indirectly connected by means of lightning surge
arresters. This is referred to as ‘primary protection’.
Home and Building Management Systems
KNX TP1 Installation

Installation_E1212a

KNX Association
19/26

KNX BASIC COURSE
Primary protection is achieved by using:
For the AC 230/400 V mains:




nominal discharge current at least 12,5 kA (10/350 µs) per conductor
protection level: < 4 kV
Surge protection device (SPD) Type 1 according EN 61643-11:2001

For the bus line




nominal discharge current at least 2,5 kA (10/350 µs) per conductor
protection level: < 600 V
Surge protection device (SPD) Category D1 according 61643-21:2002

Home and Building Management Systems
KNX TP1 Installation

Installation_E1212a

KNX Association
20/26

KNX BASIC COURSE

Figure 19: Bus cables installed between buildings

13 Bus Cables Installed between Buildings
If lightning protection measures have been installed, special measures must be taken if
the installation contains bus cables that extend over more than one building. It is
recommended to take these measures even if such lightning protection systems are not
installed.
Either a lightning current arrester should be installed at the next corner of the building
(which should be connected to the main equipotential bonding), or the bus cable should
be installed in-between the buildings in a metal conduit or duct, which should be
connected to earth on both sides, at the entrance to the building. In order to discharge
parts of the lightning current, a minimum cross-sectional area of 16 mm2 CU or 25 mm2
Al or 50 mm2 FE is required according to VDE 0185 part 3.
In either case, the connected bus devices in the building should be connected to an
overvoltage arrester terminal for secondary protection. The bus devices and the
overvoltage arrester terminal should be mounted apart at a distance of some (cable)
metres to make sure that the overvoltage arrester terminal is not forced to accommodate
parts of the primary protection.

Home and Building Management Systems
KNX TP1 Installation

Installation_E1212a

KNX Association
21/26

KNX BASIC COURSE

Figure 20: Prevention of loops

14 The Prevention of Loops
As a consequence of the impact of lightning, major overvoltages are generated in loops,
which can cause flash-overs in bus devices. The larger the loop area, the larger the
(peak) overvoltage to be expected.
Loops are created when for instance both the bus cable and the 230 V cable are
connected to one bus device, as in this case also the power supply unit is connected to
both networks. Both devices are therefore at risk when struck by lightning.
However, loops are also created when a connection is made to the water supply system,
the central heating system, metal walls etc. The loop is closed by means of the
equipotential bonding strip.
If possible, care should be taken as early as the planning stage to prevent the creation of
loops. Bus and mains cables should be installed as close to each other as possible. An
appropriate distance should be observed from the water supply or central heating system,
etc. If line-crossing loops occur in a KNX TP1 installation, it may not be possible to
program the installation under certain circumstances.

Home and Building Management Systems
KNX TP1 Installation

Installation_E1212a

KNX Association
22/26

KNX BASIC COURSE

15 Basic Immunity of Bus Devices
The basic immunity of bus devices is tested according to the standard EN 50090-2-2 by
applying a 2 kV surge voltage core to earth. As a consequence, bus devices are
protected against overvoltages often caused by switching operations.
In general this provides sufficient protection.
More significant interference can however be caused:
when bus cables and powerful mains are installed in parallel over a longer distance
in the vicinity of lightning rods and arresters
when bus lines and conductive parts of an installation (through which lightning current
can flow) are installed in parallel
in loops
in bus devices connected to conductive sections such as metal walls, central heating
pipes etc.

16 Bus Devices on Cable Ends
In this case, additional secondary protection should be provided.

Figure 21: The overvoltage arrester terminal

Home and Building Management Systems
KNX TP1 Installation

Installation_E1212a

KNX Association
23/26

KNX BASIC COURSE

17 The Overvoltage Arrester Terminal
The overvoltage arrester terminal should be used as a secondary protection and shall
meet the following requirements:
nominal discharge current at least 5 kA (8/20 µs)
protection level: < 350 V
KNX certified
The overvoltage arrester terminal is a symmetrical safety device discharging both bus
wires, thus preventing large voltage differences. Single pole arresters should not be used.
Due to their higher capacity, varistors are not suitable for this purpose.
Via the connection wires sticking out of the bus overvoltage arrester (which have an
identical colour marking as the bus cable, i.e. red and black), the arrester can be
connected by means of a conventional bus connection block to the bus cable or directly to
a bus device. However, the bus overvoltage arrester cannot be used to branch the bus
cable. The third green connection wire is the earthing conductor which should be
connected to the nearest earthing point of the installation (i.e. protective earth conductor).
In the case of flush-mounted bus devices and couplers, the overvoltage arrester terminal
is directly connected to the bus device instead of using a bus connection block. In this
case, the connection between wires is ensured by means of an externally mounted bus
connection block.
The arrester terminal also replaces the bus connection block when couplers are to be
connected in the main line.
In the case of DIN rail mounted bus devices in general, e.g. power supply units and
secondary lines of couplers, the overvoltage arrester terminal should be connected to a
data rail connector.
The earthing conductor of the distribution board must be connected to the protective earth
conductor (PE) by means of a non-earthed DIN rail terminal.

18 Recommendations to the use of overvoltage arresters
The use of overvoltage arresters is recommended for:
bus devices with protection class 1
bus devices with more connections than just bus (AC 230/400 V respectively conduits
of the heating system)
In distribution boards, it is sufficient to equip each bus line with one overvoltage arrester.
In this case also the outer conductor and the neutral conductor with overvoltage arresters.
For luminaries with built-in switching actuators the installation of overvoltage arresters is
only necessary when the bus and the mains form large-surface loops.

Home and Building Management Systems
KNX TP1 Installation

Installation_E1212a

KNX Association
24/26

KNX BASIC COURSE

1.

Check whether permitted cable lengths have been observed

2.

Run a visual check of the marking of the bus cable ends

3.

Check installation for inadmissible cable connections

4.

Measure the insulation resistance of the bus cables

5.

Check polarity of all bus devices

6.

Measure voltage at each bus cable end (minimum 21V)

7.

Record your test results

Checking an installation
Figure 22: Checking the installation

19 Checking the Installation
1)

Voltage drops and telegram run times occur due to the ohmic resistance, the capacity
and inductance of the bus cables. This produces the physical limits of a KNX TP1
installation as outlined below.
Length of a line segment

max. 1000 m

Distance between power supply unit and bus device

max. 350 m

Distance between two power supply units, including chokes

As specified by the
manufacturer

Distance between two bus devices

max. 700 m

It may be helpful to measure the loop resistance of the bus line under test.

2.

The ends of the bus cables should be clearly identified as KNX TP1 installation bus
cable by marking them KNX TP1 or BUS. An extra indication of the area and line will
make it easier to locate a specific bus cable for test, commissioning or maintenance.

3.

Bus cables from different lines may never be linked together. Inadmissible
connections between the individual lines can be checked by switching off the power
supply unit of the line under test. If the power LED of the line coupler continues to
light, an inadmissible connection has been detected.

Home and Building Management Systems
KNX TP1 Installation

Installation_E1212a

KNX Association
25/26

KNX BASIC COURSE
4.

The measurement of the isolation resistance of the bus cable should be carried out at
DC 250 V (DIN VDE 0100 T600). The isolation resistance shall be at least 500 kΩ.
The measurement is carried out as conductor against PE and not conductor against
conductor.
Please note: Overvoltage arrester terminals should always be removed before
carrying out the test so that the measurement is not influenced and the overvoltage
arrester is not damaged.

5.

A polarity check should be carried out on all bus devices. To do so, set the bus
device to the programming mode by pressing the programming button. If the
programming LED lights up, the bus device is correctly connected. To finish the
check, press the programming pushbutton again. This switches the bus device back
to normal operating mode and resets the programming LED.

6.

After having mounted all bus devices, check the bus voltage at the end of each bus
cable using a voltmeter. The voltage should be at least 21 V.

7.

Record all test results and add them to the documents of the KNX TP1 installation.

Home and Building Management Systems
KNX TP1 Installation

Installation_E1212a

KNX Association
26/26

KNX Project Design ETS4:
Basic

KNX Association

KNX BASIC COURSE

Table of contents
1

General information about ETS ................................................................................. 4
1.1
1.2
1.3
1.4
1.5
1.6
1.7
1.8

General aspects ................................................................................................ 4
The ETS concept .............................................................................................. 4
System requirements ........................................................................................ 5
Installation of ETS ............................................................................................. 5
Licences ............................................................................................................ 6
Project design with ETS – The principles .......................................................... 8
Starting ETS ...................................................................................................... 9
Dashboard tabs ............................................................................................... 10

1.8.1
1.8.2
1.8.3
1.8.4
1.8.5
1.9

The import functions ........................................................................................ 15

1.9.1
1.9.2
1.9.3
1.10
2

Product data import ..................................................................................... 16
Project import .............................................................................................. 18
Particularities for plug-in software ................................................................ 18

The export functions ........................................................................................ 19

Opening a project with ETS .................................................................................... 20
2.1
2.2
2.3

Creating a new project .................................................................................... 20
Opening existing projects ................................................................................ 21
Project details .................................................................................................. 22

2.3.1
2.3.2
2.3.3
2.4

General index card ...................................................................................... 22
Project log index card .................................................................................. 23
Project files index card ................................................................................ 23

Project design views ........................................................................................ 23

2.4.1
2.4.2
2.4.3
2.4.4
2.4.5
2.4.6
3

Overview tab ............................................................................................... 10
Projects tab ................................................................................................. 11
Catalogs tab ................................................................................................ 11
Database tab ............................................................................................... 12
Settings tab ................................................................................................. 14

Buildings window ......................................................................................... 25
Group Addresses window ............................................................................ 26
Topology window ......................................................................................... 27
Devices window ........................................................................................... 28
Project Root window and Catalogs window ................................................. 28
Side Bar ...................................................................................................... 28

Quick project design with ETS ................................................................................ 29
3.1
3.2
3.3

Starting the project design ............................................................................... 29
Creating a building structure............................................................................ 30
Product Finder ................................................................................................. 31

3.3.1

Finding products .......................................................................................... 32

Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
2/41

KNX BASIC COURSE
3.3.2
3.4

Properties of the devices ................................................................................. 33

3.4.1
3.5
3.6

Product information ..................................................................................... 33

Device parameters .......................................................................................... 34
Editing group objects ....................................................................................... 35

3.6.1
3.7
3.8

Inserting devices ......................................................................................... 32

Setting the flags........................................................................................... 36

Configuring group addresses .......................................................................... 38
Assignment of group addresses ...................................................................... 39

3.8.1
3.8.2

Sending group address ............................................................................... 40
Group speaker flag ...................................................................................... 41

Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
3/41

KNX BASIC COURSE

1 General information about ETS
1.1 General aspects
KNX is a fully integrated system for home and building automation for the implementation
of upward compatible, flexible and cost-effective solutions. Its functional versatility cannot
only be used in simple and limited installations but also enables solutions for the entire
building sector. KNX thus corresponds to the requirements of the electrical trade including
project design and installation, commissioning, operation of the bus system and
maintenance.
The planning, project design and commissioning of a KNX installation requires a software
tool for building designers and electrical installers that is clearly structured and simple to
use.
An extensive online Help file is available to the user. The user can at any time access
help for the currently opened window via the F1 button.
The project design of a building, in which KNX should be used, initially does not differ
from conventional electrical planning. The following aspects must be clarified by the
planner in the preliminary stages:
the type and use of the building,
the building system components that are to be implemented and their functions,
type and frequency of changes of use,
special requirements of the clients,
budget
The planning of the electrical installation is carried out as for a conventional installation
according to the generally recognised rules of technology, the connection conditions of
the utility as well as the usual planning guidelines, implementary regulations and
dimensioning provisions.

1.2 The ETS concept
For the planning, project design and commissioning of KNX systems, a uniform program
for the project design and commissioning of the KNX system is available for planners and
installers. ETS stands for Engineering Tool Software. ETS ™ is a registered trademark of
the KNX Association. ETS4 is the current version of ETS. On the one hand, ETS4 is a
newly developed software program: during its development particular emphasis was
placed on keeping the user interface very similar to that of the previous versions.
On the other hand, the display and operating philosophy of the user interface of ETS4
has been completely reworked. Display and operation has been adapted to current
standards. In this way, operation and orientation has been clearly simplified in comparison
to ETS3.

Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
4/41

KNX BASIC COURSE

1.3 System requirements
The following operating systems (as 32/64 bit) are supported in principle:
MS Windows XP
MS Windows Vista
MS Windows 7
MS Windows 8
MS Windows Server 2003/2008
Details about this and the required hardware can be found on the KNX home page on
http://www.knx.org/knx-tools/ETS/requirements/.

1.4 Installation of ETS
You can only obtain ETS from KNX Association via internet in the KNX online shop
(address https://onlineshop.knx.org.)
If you have downloaded the software from the internet and have unzipped the
downloaded file, you start the installation by executing the installation program
ETS4Setup.exe.

Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
5/41

KNX BASIC COURSE

Figure 1: Licensing

1.5 Licences
There are four versions available, all as a PC-dependent key or a non PC-dependant
dongle (except for the demo):
Demo: Full functionality, max. 3 devices per project, this version is free of charge.
Lite: Full functionality, max. 20 devices per project.
Professional: Full functionality, no restrictions as regards number of devices which
can be installed and the number of projects which can be created
There is also the Supplementary version. This version is intended as an additional
licence for the full Professional version on a second PC (commissioning
PC/Notebook).
In all cases, the ETS program is installed in full. The mode, in which ETS subsequently
runs, depends on the type of licence key. After installation, the program first runs as a
demo version. You can start the process for purchasing and installing licences, by clicking
the Licensing… button in the Version Information box in the ETS dash board, which is
opened after starting ETS.
Pressing the Request Licence button leads directly to the KNX online shop. This requires
an active online connection. On the pages of the online shop, you will also find detailed
information about the licensing process.

Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
6/41

KNX BASIC COURSE
The following key types exist:
PC dependent key: this key activates the license only on the PC on which the ETS
license has been installed.
PC independent key: this key does not refer to the PC hardware, but refers to a
“dongle” which also has to be ordered from KNX Association. This dongle must be
inserted in the USB port of the computer. This type of key is a little bit more expensive
ETS also allows distant configuration or maintenance of installations (via Internet, called
iETS)
Since the introduction of ETS 4.1 it is possible to extend the functionality of ETS via
programs called “Apps”. These Apps are also available in the KNX Online Shop and they
are licensed in the same way as described before. Some Apps are developed by KNX
Association, others by KNX manufacturers. Examples of such Apps are: online product
catalog, graphical configuration of ETS projects, Project compare, Replace product….
For some of these apps a fee needs to be paid.
In order to prepare yourself for a future KNX basic course and to get acquainted with
ETS, you can sign up for the ETS eCampus. This is free of charge and you only need to
register yourself in the Online Shop.

Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
7/41

KNX BASIC COURSE

1.6 Project design with ETS – The principles
The following steps represent the chronological order for project design with ETS.
Carry out the ETS settings
Read in or convert product databases
Create the project with the necessary data
Set up the structure of the project (building structure/bus topology)
Insert KNX products (devices with corresponding application) into the building
structure
Set the parameters of the KNX products according to requirements
Create group addresses
Link the group objects of the KNX products with the group addresses
Assign the configured KNX products to the bus topology (final definition of the
individual address)
Assign the configured KNX products to the installed functions (optional)
Check the project design
Print out the documentation
Save the project
It is possible to deviate from this sequence in individual cases. Some steps can be
omitted for smaller projects. Additional steps are necessary in large projects (team
projects).

Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
8/41

KNX BASIC COURSE

1.7 Starting ETS
After the installation, ETS can be started by clicking the icon

on the desktop or via the newly created program group called KNX.
When you open up ETS, a window appears which is referred to as the dashboard.

Figure 2: “Dashboard”

It contains the following elements:
A “Quick Actions” bar (1) for frequently required functions.
A menu bar (2). If you click on elements of the menu bar, you directly access the project
design view of ETS.
A tab (3) via which you select what is currently displayed in the workspace (4).
You can access the dashboard again at any time by clicking on the small green ETS field
in the top left-hand corner of the ETS window.

Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
9/41

KNX BASIC COURSE

1.8 Dashboard tabs
1.8.1 Overview tab
When ETS is opened, the Overview tab is selected so that the fields displayed in figure 3
are visible in the workspace:

Figure 3: Dashboard, Overview tab selected

By double clicking on a project in window area A, you select the project that is to be
edited. Via area B, you access the licensing feature. If you have an existing connection to
the internet, current news about the KNX Association is shown in areas C and D.

Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
10/41

KNX BASIC COURSE
1.8.2 Projects tab

Figure 4: Dashboard, Projects tab selected

You can create a new project here, select a project for editing and set the properties of
the projects. Further information can be found below in section 2: “Opening a project with
ETS”.
Projects can likewise be imported and exported via this window. Further information about
the import and export is described below in a separate section.
1.8.3 Catalogs tab
The product data of the manufacturers is managed under Catalogs.
After the installation, the ETS database is empty. To be able to work with ETS, product
data from the manufacturers must be imported into this database. The import function of
ETS is used for this purpose. Details about the import and export are described below in
a separate section.
The manufacturers’ product databases can be obtained free of charge on a CD or via the
internet.
The window that is shown after selecting the Catalogs tab is displayed again during the
project design stage when selecting devices. This window is therefore described in more
detail further down in this section (see: Catalogs)

Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
11/41

KNX BASIC COURSE
1.8.4 Database tab

Figure 5: Dashboard, Database tab selected

In the Database window, you can select the currently edited database, generate a new
database or create a backup of the database.
Select database: If you are working with several databases, you can select here the
database you wish to use. You can specify under Settings (see next tab) in which
directory the databases are located.

Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
12/41

KNX BASIC COURSE

Figure 6: Select database

•

•

•

You can likewise generate a new database via the New… button. The result is
however an empty database, into which you need to import the product data of the
manufacturers.
Backup now or Restore backup. You require this function on the one hand to create
a backup copy of your database and on the other hand to port a database to another
computer. The file that was created during the backup process must be inserted via
the option Restore backup on the other computer. Only then does ETS work with this
database. A database that has simply been copied cannot be handled by ETS
(protective function of the MS database system).
An automatic backup function can also be set under the Settings tab. Further details
about this can be found in the explanatory notes on the settings.
Central database repository

Figure 7: Central database repository

Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
13/41

KNX BASIC COURSE


A further function under the Database tab makes it possible to store the database not
on the local computer but e.g. on a network drive. This is especially useful, when
working with several users in one database. However, only one user can work with the
database at one time. If required, you must select the option Use central database
repository and when you wish to work with this database, you must check out this
database to avoid that some else simultaneously carries out changes to the database
content. Once you have finished editing the database, you must check this database
back into the central database repository again. A prerequisite for this procedure is
that the database in question has only been added once to the central database
repository. The path of the central database repository can also be entered in this
window.

1.8.5 Settings tab

Figure 8: Dashboard, Settings tab selected

The settings are divided over eight different areas, which one can select by clicking on
the terms in the left half of the window:
Presentation General. Here you can influence the properties and appearance of ETS
in some cases. For details, please refer to the online Help feature in ETS.
Presentation Language. Here you can select the language of ETS.
Communication. Here you can set the interface that is used for bus access. For
details about this topic, please refer to the commissioning chapter of this training
documentation.

Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
14/41

KNX BASIC COURSE
Database

Figure 9: Dashboard, Settings tab, Database submenu

In addition to selecting the path where the ETS databases should be stored, you can
select here, whether you wish to create a backup each time you close ETS. If you have
ticked the option Append date and time on backup file name, the current date and time is
attached to the file name for each backup file.
Software Updates. When enabled, ETS checks automatically via the internet
whether there are new updates of ETS available. If this is the case, ETS signals this
and the new update is installed if requested.
Troubleshooting. Here you define the logging level for documenting your work in
ETS log files for potential troubleshooting by the KNX Association.
Import. Setting the behaviour of the Import Wizard and the installation of plug-ins. For
further details, see below under the description of the import functions.
Shortcuts. Here all shortcuts are displayed, which can be adapted according to your
habits. Shortcuts enable the experienced user to work quicker with ETS.

1.9 The import functions
The import function enables both the import of product data as well as projects. You can
retrieve this function from different places in ETS. This can be done via the “Quick
Actions” bar on the dashboard and in the Projects and Catalogs tabs via the Import...
button. You can also retrieve the import function at any time when working in the project
design view of ETS by selecting the Import… button in the Catalogs window.

Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
15/41

KNX BASIC COURSE

Figure 10: Import Wizard

When importing data, one can be guided by the Import Wizard, which is particularly
advisable in the beginning. To do so, this function must be enabled in the ETS settings
(see section 1.8.5).
1.9.1 Product data import
You can obtain product data from the manufacturers either on a CD or via the internet. It
is also possible to import product data from existing ETS3 databases.
Databases from which you can import data can be recognised by their file extensions:
Files with the extension .knxprod are databases in XML data format for ETS4.
Product databases for ETS3 and ETS2 have the file extension .vd?. The question
mark stands for the numbers 1 – 5 or an x, depending on which ETS version the data
was originally intended for.
Databases with the ending .db are databases from ETS3 or ETS2.
You select a file by pressing the
button in the Import Wizard on page 1 File. You
will then see the selection box displayed in the screenshot. This window is also directly
displayed, if the export function is retrieved without Wizard.

Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
16/41

KNX BASIC COURSE

Figure 11: Import Wizard, file selection

Product data of previous ETS versions is converted by ETS into XML format. On the next
page of the Import Wizard you are asked whether you wish to save the converted files, to
avoid having to convert again during later imports.
Take care when importing files from CDs. If you have selected the option Save the
converted output file, the point of origin of the file is entered automatically as the location
where the converted file will be stored. In the case of CDs, this leads to problems as it is
not generally possible to write to a CD. You should therefore in this case select a path
that is also writeable.
If you do not wish to import the complete product database of a manufacturer, you can
select which products you wish to import on the next page of the Import Wizard. For this,
you must first select Import only selected products. A list of all the existing products in the
database is subsequently created and displayed. When selecting the products, a search
function and a filter function are available. Mark any products that are to be imported
simply by clicking on them. With the help of the Shift key, you can mark a whole range of
products. With the Ctrl button, you can select several products.

Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
17/41

KNX BASIC COURSE

Filter
Search
function

Figure 12: Import Wizard, product selection

Finally you can select whether you wish to import all existing languages of the text of the
product data (parameter dialogs, etc.) in your database or only those you have selected.
If you do not import all languages, the import process is faster and your database remains
smaller.
Before the start of the import process, a summary shows you again what you have
selected.
1.9.2 Project import
The import of projects follows the same pattern as the product data import. During the
project import, all project design data such as building structure, comments, group
addresses, individual addresses etc. of the corresponding project is imported. In addition,
all required product data of the devices contained in this project is imported as well.
You can retrieve the project import function on the Dashboard via the “Quick Actions” bar
and under the Projects tab via the Import….button.
1.9.3 Particularities for plug-in software
The following explanatory notes concern both product as well as project data imports for
projects containing devices with plug-in software.
For many products, additional software is installed when importing the manufacturer data
in the ETS database, called ‘plug-in software’. You can now decide whether these plugins should always be installed immediately after the import or at a later date or after a
Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
18/41

KNX BASIC COURSE
single request. They are only required by ETS when the device is retrieved for the first
time. If a plug-in had not yet been installed, this can be done at this point. This however
frequently requires administrator rights. Many users therefore prefer plug-ins to be
installed immediately. Sometimes installation of plug-ins can require a considerable
amount of time. In this case, the immediate installation of the plug-in is skipped,
particularly if all products of a manufacturer should be imported at once.
Whether the plug-in should be installed immediately or not, can be set in the Settings tab
under the Import submenu on the dashboard (see section 1.8.5).

1.10 The export functions
You can export product data and entire projects from an ETS database.
Product data export
Product data export is possible from two windows: from the Catalogs tab on the
dashboard and in the project design from the Product Finder window. Depending on
the selection in the respective window, individual products, whole product groups, all
the products of a manufacturer or all the products of this database are exported. A file
with the extension .knxprod is created.
The data format of this file is XML and the products can be imported back into an ETS
database. It is not possible to create product data for importing into older ETS
versions.
Project export
if in the project administration area and by selecting the Projects tab on the
dashboard, one is able to export a project. All the project-related data is exported into
a file with extension .knxproj. This file also contains the entire product data of all
devices used in this project, so that you can work on the project immediately after
importing it into an empty database.

Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
19/41

KNX BASIC COURSE

2 Opening a project with ETS

Figure 13: Creating a new project

2.1 Creating a new project
A new project can be created on the dashboard via the New Project function of the “Quick
button. The New Project dialog
Actions” bar or under the Projects tab via the
appears on the screen. A name must be entered in this dialog window. The medium that
has been used is also specified here (TP for Twisted Pair, PL for Powerline and IP for
Ethernet). If you have selected the function Create Line 1.1, the area 1, main line 1.0 and
line 1.1 are created immediately. Otherwise the project has no topology structure.
Finally, one can set the group address style.

Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
20/41

KNX BASIC COURSE

Double click

Click

Mark project

and press

Figure 14: Opening an existing project

2.2 Opening existing projects
From the dashboard, there are several options to open a project:
Clicking on a project under Recent projects in the “Quick Actions” bar.
Overview tab: Double click on a project in the Projects Overview container.
Projects tab: Open the project marked in the list via the

Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

button.

KNX Association
21/41

KNX BASIC COURSE

Figure 15: Project details

2.3 Project details
In the Projects tab on the dashboard, you can see the details of the project marked in the
list. The details are given in three index cards that can be selected via tabs.
2.3.1 General index card
On this index card, you can change the name of the project and there are further fields for
specifying the project.
You define here which group address view should be used for this project and you can
assign a project password and a BCU password for BCUs supporting this feature. With a
project password, a project can be protected against unauthorised access. Each time the
project is opened, the password is requested.
With the BCU password (BCU=bus coupling unit), BCUs supporting this feature can be
protected against unauthorised tampering. The entered BCU password is applies to all
BCUs within this project.
The BCU password consists of 8 hexadecimal digits (possible values 0 to F).
Caution: If you forget the project password, it is no longer possible to access the project
as the password in encrypted in the database.
Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
22/41

KNX BASIC COURSE
2.3.2 Project log index card
This index card is used to structure, check and evaluate the project history. With the help
of the Add button, the project history can be extended. You need to mark the
corresponding line in order to modify an entry or to see the exact description. The entry
can then be edited.
2.3.3 Project files index card
Under Project files, you can add other files to the project, which should be saved together
with this project in the database. They can be e.g. Word or Excel files or files with
drawings.

2.4 Project design views
When you open up a project, you access the project design view of ETS. The following
screenshot shows the elements of this view.

Figure 16: Project design view

The numbers in the screenshot designate the following elements:
1: Menu bar
2: Toolbar
3: Panels
4: Navigation bar (side bar)
5: Status bar
Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
23/41

KNX BASIC COURSE
To a large extend, the project design of a KNX installation is done in the panels. They can
be used simultaneously. Panels can be arranged according to the editing process. The
following panels are available:
Buildings,
Group Addresses,
Topology,
Project Root,
Devices,
Catalogs
and as a special case
Side Bar

Figure 17: Panels

Elements of the panels are:
1: Title bar. By clicking on the title, you can select which panel should be displayed.
2: Toolbar. The tools available depend on the respective panel (context-sensitive)
3. Tree view
4: List view. The list view can have up to three index cards which you can select via the
tabs below.
Further panels can be opened via the toolbar: View / Open New Panel.
Projects can be ordered according to building, function or bus structure hierarchies. One
uses the Buildings and the Topology view to structure one’s project more clearly.
A combination of panels and their exact appearance can be saved as a Workspace. You
select the workspaces via the Workspaces container in the side bar. Further information
about the creation and storage of workspaces is described in the section on complex
project design.

Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
24/41

KNX BASIC COURSE

Figure 18: Buildings window

2.4.1 Buildings window
The Buildings view is the central view of ETS. The Buildings view is used to structure the
KNX projects according to the actual building structure and to insert the KNX devices.
The following elements are available to structure the building:
Buildings,
Building parts,
Floors,
Corridors,
Stairways,
Rooms and
Cabinets
The buildings, building parts and floors are only used for structuring and cannot directly
contain devices.
Devices can be inserted in rooms, corridors, stairways or cabinets.
A hierarchical view is very useful for maintaining an overview in the case of large projects.

Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
25/41

KNX BASIC COURSE

Figure 19: Group Addresses window

2.4.2 Group Addresses window
The Group Addresses window is used to generate and define group addresses. This view
is required together with the Building view to link the group addresses to the
corresponding group objects. The group addresses in the Group Addresses window are
represented in a two-level, three-level or free style, depending on the preset option.
The representation of the group addresses in different levels has no functional effect. It
only enhances lucidity. The 3-level structure is used in this documentation. If you select a
subgroup, the group objects that have been assigned to the group address are displayed
in the right-hand list view.
The tree view (left-hand side) displays the available group addresses (in this case group
addresses on three levels).

Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
26/41

KNX BASIC COURSE

Figure 20: Topology window

2.4.3 Topology window
The Topology window is used to define the actual bus structure and the assignment of
individual addresses to the devices. This view can be used simultaneously with other
views and displays the KNX project as regards bus structure. The view shows the devices
as they are assigned to the different lines. Twisted Pair, Powerline and IP lines and areas
are represented with different symbols.
The tree view (left-hand side) shows the existing bus topology of the KNX project while
the right-hand side displays a list view of the elements marked in the left-hand window.
The structure of the topology is normally generated automatically when individual
addresses are assigned elsewhere. All higher-order elements such as areas and main
lines are inserted according to the assigned addresses.

Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
27/41

KNX BASIC COURSE

Figure 21: Devices view

2.4.4 Devices window
All devices of your project are displayed in the Devices window, including those that have
not yet been assigned to a room, function or line. As a result, you can often gain a good
overview of your project, for example whether there are devices without an assigned
individual address.
This list can be very large. It can therefore be very useful to set a filter. Further
information on filters is explained in the section on complex project design.
With the devices displayed in this window, you can carry out all the tasks that can also be
performed in the Buildings window or Topology window: editing devices, editing objects
etc.
2.4.5 Project Root window and Catalogs window
The Project Root window combines together the Buildings, Group Addresses, Topology
and All Devices windows in one window.
One often opens the Catalogs window indirectly when inserting devices in the Buildings
window or in the Topology window.
2.4.6 Side Bar
The Side Bar bundles functions and information one frequently requires during project
design and commissioning.
The side bar is always displayed, except in conjunction with the dashboard. It is located
on the right-hand or left-hand side of the screen and can be selected via the menu
function Workplace / Side Bar /... . On the dashboard under Settings / View, you can
select whether only one container is open in the side bar or several simultaneously.

Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
28/41

KNX BASIC COURSE

3 Quick project design with ETS

Figure 22: Creating a new project

3.1 Starting the project design
On the basis of this example, the project design of small KNX projects is explained.
The project Goethe School is an example of a “quick project design”.
The New Project window has been opened on the dashboard via the “Quick Actions” bar.
The project name must be entered in the Name: field (in this case: Goethe School). The
Group Addresses view is set to three levels (main group / middle group / subgroup).
Pressing the OK button after entering the name opens the new project (with two panels
Topology and Group Addresses, provided that the Default workspace is set in the side
bar).
For practical reasons, you should change the Topology panel to the Buildings panel by
clicking on Topology in the title bar of the window and then selecting Buildings. You thus
have two relatively large Buildings and Group Addresses panels to work in.

Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
29/41

KNX BASIC COURSE

Figure 23: Creating a building structure

3.2 Creating a building structure
In the Buildings window, devices can only be inserted in rooms, corridors, stairways or
cabinets. Hence, a minimum building structure must be created first. You must proceed in
the following way:
1. Select Buildings in the Buildings window in the left half (tree structure).
2. Click on the symbol
in the toolbar. A window opens in which you
can enter the name of the new building. If you do not enter a name, the building is
designated as New building by ETS. This building should be given an appropriate
name, in order to maintain the overview of one’s project.
3. You can rename this building at any time. To do so, double click on the
corresponding building in the tree structure. The Properties container of the
building opens in the side bar, provided it is not already open. You can now enter
a new name for the building in the Name field.
You can now introduce building parts and floors into the building as system structures.
However, to keep this example as simple as possible, we will only insert one room.

Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
30/41

KNX BASIC COURSE

Figure 24: Adding a room

This can be done e.g. via the right mouse button function Add/Rooms. This opens the
dialog Add Rooms, where you can immediately give the room a useful name.
Further rooms as well as corridors, stairways or cabinets can now be added to the
building. You can now also insert devices.

3.3 Product Finder
To insert devices, use the Catalogs window. Via the Catalogs window you can insert the
device in the currently marked object. It may therefore be useful to select e.g. a room in
the device window before opening the Product Finder. You can call up the Catalogs
window via the symbol
Catalogs window is opened.

in the toolbar of the Buildings window. A further

Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
31/41

KNX BASIC COURSE

Figure 25: Catalogs window

3.3.1 Finding products
Various functions are available to select the required product/device. On the one hand,
you can choose a manufacturer and a product group in the tree structure in the left half of
the window: this will limit the number of devices displayed in the list view considerably. It
is however also possible to limit the display in the list view with the search function or the
filter function (both in the right-hand corner of the toolbar). The selection in the tree
structure hereby overrides the search function and the filter function. The narrower the
search selection, the fewer products are displayed.
3.3.2 Inserting devices
To insert a product with the corresponding application, select the product in the list view
of the Catalogs window with the mouse. Then press the Add button (or double click on the
product with the mouse). It is possible to insert in one go a device several times by
entering the number of elements that are to be inserted.
The individual addresses are automatically assigned by ETS in ascending order in the
respective current line. The topic ‘current line’ is rather complex. If required, consult the
help feature of ETS for further information.
You can change the individual addresses at any time under the properties of the devices.

Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
32/41

KNX BASIC COURSE

Figure 26: Properties container of the devices in the side bar

3.4 Properties of the devices
The inserted device is displayed in the list view if the associated room has been marked.
It will also be shown in the tree structure of the Building view underneath the room.
The Properties container in the side bar is opened by double clicking on the inserted
device. This container has up to three index cards, which can be selected via tabs. Some
index cards only contain information i.e. you cannot make any changes. The Settings
card is the most important.
It is possible here to change the individual address of the device. A change in the
“Individual address” field automatically assigns the device to another line and/or another
area in the bus topology.
Note: Only free addresses can be assigned!
It is also possible to add comments about the device in the Description field. A description
along the lines “what is the device, where is it installed and what is it used for” is good
practice. Collating information here pays off later during commissioning and fault
diagnosis.
3.4.1 Product information
The Properties container of the devices contains further information about a product
under the Information tab.
Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
33/41

KNX BASIC COURSE
Here you can find information about the application of the device. It is also possible to
change the application of a device in this container. There is also an index card with
catalog information about the respective product.

Figure 27: Device parameters

3.5 Device parameters
You access the device parameters via the Parameters tab at the bottom of the list view in
the Buildings window. To do so, a device must of course be marked in the tree view in the
left-hand side of the window. The device parameters can be set here. The parameters
define the concrete function of the application program - e.g. in the above example, the
sending delay after bus voltage recovery - can be specified.
The “Parameters” window is product-dependent. More detailed information about the
individual parameters, application descriptions are available from the manufacturers.
The parameters are divided into groups which are listed in the left-hand column of the
parameter window. By selecting the individual groups in this list, you access the
associated parameters in the right-hand side of the window.
The parameters can be reset to the original values as set by the manufacturers via the
Default parameters button in the toolbar. The Show Parameter Changes button marks all
parameters modified by the user with a red exclamation mark.

Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
34/41

KNX BASIC COURSE

Figure 28: Editing objects

3.6 Editing group objects
The group objects of devices (further down referred to as ‘objects’) are displayed in the
tree view (left half of the window) below the devices and in the list view (right half of the
window) if you have marked a device in the tree view.
If you have marked an object in the tree view, you see under the “Associations” tab in the
list view all group addresses that are assigned to this object. You can also make
modifications e.g. you can delete the assignment to this object.
By double clicking on the individual objects in the list view or by marking an object in the
tree view, you open the Properties container of the objects. The properties of the objects
can be set here.
It is possible to change the default priority of the transmitted telegrams for group objects,
as originally set by the manufacturer. The following priorities are possible:
Low
High
Alarm

Low priority for non critical time functions
Normal priority for manual functions
High priority for critical time functions

Note: The priority should only be changed in special cases.
The flag of the group objects can moreover be set here.

Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
35/41

KNX BASIC COURSE

Figure 29: Representation of the flags

3.6.1 Setting the flags
The behaviour on the bus can be set for each group object with the help of the flags (data
flow regulation).
Below you will find the 4 most important basic settings, depending on the object type:

Figure 30: Minimum settings of the flags for actuator objects

Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
36/41

KNX BASIC COURSE

Figure 31: Minimum settings of the flags for sensor objects

Figure 32: Minimum settings of the flags for status objects

Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
37/41

KNX BASIC COURSE

Figure 33: The update flag

For certain masks (System B), it is also possible to set the “Read at Init” flag: if set, the
group object will automatically send a Read Value telegram after voltage recovery to
initialise the value of the group object.

Figure 34: Configuring group addresses

3.7 Configuring group addresses
In the case of KNX, devices that should perform a specific function together are “logically
wired” via group addresses.
Group addresses can be divided into two or three levels or one can create one’s own
structuring of group addresses.

Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
38/41

KNX BASIC COURSE
In the two-level style, the group address consists of a main group (0 to 31) and a
subgroup (0 to 2047).
In the three-level style, it consists of a main group (0 to 31), a middle group (0 to 7) and a
subgroup (0 to 255).
The group address is specified by separating the levels by a “/” (slash) (e.g. 1/0/2).
The levels of the group addresses can be set on the dashboard in the Projects tab under
Details / General.
It is advisable to use the structure of the group addresses as an organisational feature.
The group addresses are generated in the Group Addresses window.
The group address structure displayed in the screenshot (left window half of the Group
Addresses window) is generated via the corresponding buttons of the toolbar in the same
way as the building structure of the Buildings window.

Figure 35: Assignment of group addresses

3.8 Assignment of group addresses
In order to ensure that sensors and actuators know which of their group objects should
communicate with each other to realize a specific function, the group addresses must be
assigned to the group objects. The group objects are linked logically with each other via
the corresponding group addresses (“wired”).

Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
39/41

KNX BASIC COURSE
In order to assign the group addresses to the objects, it is useful to have two panels open
at the same time: the Group Addresses window and e.g. the Buildings window. There are
several ways to assign group addresses.
The fastest method is via drag and drop:
You drag the required group address from the Group Addresses window onto the
corresponding object in the Buildings window (or the object onto the corresponding group
address) with the mouse – keeping the left mouse button held down – and then release it.
In this way, group addresses are assigned to objects.

Figure 36: Sending group address

3.8.1 Sending group address
A group object may have multiple connections by assigning several group addresses. If
the group object has the function of a sensor, then the first assigned group address is
used as a target address in the telegram (sending group address). If you wish to modify
which group address should be the sending group address, this can be done in the
Buildings window via the right mouse button, i.e. in the list view (right window half) of the
group objects.
Note: There are also sensors, permitting only one address per group object. The number
of group addresses that can be assigned to a group object and the number of maximum
associations (number of assignments per product) are product-dependent.
It is only possible to create connections with group addresses between group objects of
the same type (1 bit, 4 bit, etc.). The group address receives the type of the group objects
with the first assignment.

Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
40/41

KNX BASIC COURSE

Figure 37: Group speaker flag

3.8.2 Group speaker flag
In the case of Powerline devices, the group speaker flag must be set for one object per
group address. To do so, you select an object in the Group Address view and click in the
list view on the field in the ACK column (PL). A pull-down menu then opens, in which you
click on Yes, in order to set the group speaker flag for this object.

Home and Building Management Systems
KNX Project Design ETS4: Basic
ETS4_Planning_basic_E1212b

KNX Association
41/41

KNX Project Design with ETS:
Advanced

KNX Association

KNX BASIC COURSE

Table of contents
1
2

Foreword ....................................................................................................................4
Workspaces, toolbars and Favorites ..........................................................................4
2.1
2.2
2.3

3
4

Which properties of the screen elements are stored in a workspace? ................5
How can you now create your own workspaces? ...............................................5
Other modifiable properties that are not saved in workspaces: ..........................6

Shortcut keys .............................................................................................................8
Advanced topology...................................................................................................11
4.1
4.2

Structuring and planning reserves ....................................................................11
Support from ETS when setting up larger size topologies: ...............................12

4.2.1
4.2.2
4.2.3
5
6

Different media (Powerline, TP, IP) ..........................................................................14
Interlinked building structures ..................................................................................16
6.1
6.2

7

Inserting devices, systematic descriptions ........................................................16
Examples of device descriptions: .....................................................................18

Group addresses Advanced .....................................................................................18
7.1

Structure of the addresses ...............................................................................18

7.1.1
7.2
7.3
7.4

Directly in ETS: .............................................................................................22
Via export to / import from EXCEL:...............................................................24
Free address structure .................................................................................25

Professional functions and tools...............................................................................26
8.1
8.2
8.3
8.4

Copying with options ........................................................................................27
Undo function ...................................................................................................30
Dynamic folders................................................................................................31
Checking and editing filter tables, permitted group address ranges .................32

8.4.1
8.4.3
9

3-level address structure ..............................................................................19

Description format ............................................................................................20
Group address settings ....................................................................................21
Creating large numbers of group addresses ....................................................22

7.4.1
7.4.2
7.4.3
8

Creating several areas .................................................................................12
Creating several lines ...................................................................................13
Find and replace - Strategy ..........................................................................14

Automatic filter table .....................................................................................33
Using a dummy application...........................................................................34

Checking the project ................................................................................................36
9.1

Device check ....................................................................................................36

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
2/59

KNX BASIC COURSE
9.2
9.3
9.4
9.5
10

Bus hierarchy ...........................................................................................................38

10.1
10.2
10.3
10.4
10.5
10.6
11

Group address check .......................................................................................37
Topology check ................................................................................................37
Product information check ................................................................................37
Limits of the ETS project check ........................................................................37

General considerations.....................................................................................38
Taking the building structure into account ........................................................38
Inclusion of customer requirements ..................................................................39
Consideration of system limits, planning of reserves ........................................39
Line coupler or IP router? .................................................................................40
Data rates and cyclical processes ....................................................................41

Planning a project: Example.....................................................................................42

11.1
11.2

Requirements / regulations (specification text) .................................................42
Task definition ..................................................................................................43

11.2.1
11.2.2
11.3

Determining the bus loads ................................................................................45

11.3.1
11.3.2
11.3.3
11.4
12

Summary of the bus load calculation ................................................................48

Reports ............................................................................................................48
Exporting group addresses...............................................................................50
Export OPC ......................................................................................................51
Data types ........................................................................................................52

Database handling, project backup ..........................................................................53

13.1
13.2
13.3
13.4
13.5
14

Scenario 1: ...............................................................................................45
Always set the line/backbone coupler to “filter”! ........................................46
Scenario 2: ...............................................................................................46

Administration functions, project documentation and archiving ................................48

12.1
12.2
12.3
12.4
13

Parts list for solution 1: .............................................................................43
Parts list for solution 2: .............................................................................44

General ............................................................................................................53
Using one database per project ........................................................................53
Creating regular backups .................................................................................54
Master database and project reconstruction .....................................................54
Central database memory and master database ..............................................55

Complete project documentation..............................................................................55

14.1 Guidelines according to the German contracting procedure for building works
(VOB) 56
14.1.1
14.1.2
14.1.3

Contents of the project documentation .....................................................57
Handover to the client ...............................................................................58
Duties / behaviour of the contractor after handing over the project ...........59

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
3/59

KNX BASIC COURSE

Advanced project design with ETS
NOTE: THIS CHAPTER IS INTENDED TO BE USED IN UPGRADE COURSES OR AS INFORMATIVE
ANNEX TO BASIC COURSES. THE CONTENTS IS NOT PART OF THE EXAM AT THE END OF THE
BASIC COURSE. ALL SUBSEQUENT SECTIONS REFER TO VERSION 4 OF ETS (ENGINEERING
TOOL SOFTWARE).

1 Foreword
The intention of this chapter is to show the advanced user of the KNX system the
possibilities of working even quicker with the “ETS” tool. It moreover contains important
advice about preliminary considerations during the planning stage and deals with the
responsibilities of a project engineer as regards documentation.

2 Workspaces, toolbars and Favorites

Figure 1: Example of a workspace

ETS enables you to create so-called workspaces. One is already “supplied” and is
available when installing the software (called “Default” or “Standard”). A workspace is a
project-independent, user interface template. You can achieve the following with the help
of workspaces: each project designer will only see the information on his screen that he
needs for his work. All unnecessary data is not displayed. The various views (e.g. building
structure, topology, group addresses) as well as their structure and lists are arranged
according to your personal needs.

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
4/59

KNX BASIC COURSE
The same project can look completely different when using different workspaces. A
project designer needs different information compared to someone who is merely doing
commissioning. The concept of workspaces takes these differences into account.

2.1 Which properties of the screen elements are stored in a
workspace?
All open windows e.g. Topology, Group Addresses, Building View
The position and size of these windows
The internal columns and structure of areas
The visible columns and their layout (sequence)

2.2 How can you now create your own workspaces?
This is extremely simple: As soon as you have found the desired placement of screen
elements (number / type / size / layout of the windows, number of columns, order,
content), you open the “Workspaces” (1) box in the side bar. You click on the “plus”
symbol (2) in the footer and then assign a useful name (3) to this workspace.

1

3

2

Figure 2: Saving a workspace

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
5/59

KNX BASIC COURSE
Adjusting the presentation of the window:

Figure 3: Adjusting the window

Click with your right mouse button on a column heading in the editing window. A pop-up
menu will appear, in which you select “Columns”. With “Resize Column” or “Resize All
Columns”, the optimum width is set for each column (so that no text is hidden).

Figure 4: Resizing columns

2.3 Other modifiable properties that are not saved in workspaces:
a) Toolbars:

Figure 5: Customising toolbars (1)

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
6/59

KNX BASIC COURSE
Click on the toolbar with the right mouse button. It is possible to choose to display “Icons
and Text” or “Icons only”. By clicking on “Customise Main Toolbar”, all required icons can
be dragged onto the toolbar (or removed again).

Figure 6: Customising toolbars (2)

b) Favorites list: In this view, links can be created to objects in all possible views
which you use frequently (similar to bookmarks or Favorites in a browser). The
Favorites list is opened via View – Open New Panel - Favorites. Examples: a line
which you are currently editing, a main group in which you are currently
continuously making changes or a single central group address that you
constantly need for linking to switch actuator objects.

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
7/59

KNX BASIC COURSE

Figure 7: Open Favorites window, display contents

The ‘Favorites’ however cannot be created separately for individual workspaces since
they are global links. Thanks to the tool tips displayed, you can however easily recognise
which project the respective “Favorite” belongs to. The tip is then displayed, when the
associated project is not active.

Figure 8: Information about the origin of the Favorite

3 Shortcut keys
Practised users of a software package can carry out working steps quicker when using
the keyboard instead of the mouse. If you wish to use the functions of the main menu,
they can all be accessed via the keystroke combination “Alt” + < underlined letter> of the
menu item name (context-sensitive shortcut keys). There is also a whole collection of
absolute shortcut keys, which can also be displayed and modified via Settings / Shortcuts.
Example: You wish to link a new group address with a displayed object. The object is
located in a Favorites list.

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
8/59

KNX BASIC COURSE
The keystrokes are as follows:
Ctrl + F9: Opens the Favorites window (this however only works when at least one
window is already open)
You then select the required object – in this case: Switch object A – Push-button
By pressing: “Alt” + B + B; then “Shift” + Tab + Space you access the input line for the
new address.

Figure 9: Creating a manual address link via the keyboard

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
9/59

KNX BASIC COURSE

Figure 10: All global shortcuts

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
10/59

KNX BASIC COURSE

4 Advanced topology

Figure 11: Max. expanded topology with proposed text

4.1 Structuring and planning reserves
In the diagram above, you can see how to create many areas and lines in a project: 15
areas, and in each area 16 lines. You can see by the name how the topology could be
aligned to the building structure. This of course depends on the size and structure of the
relevant project. There is no single model solution for this! It is advisable to design a
larger project completely without topology and to establish the assignment in the topology
after completion of the project design. What is the best way to proceed?
Observe a reserve of approximately 20% per line segment (i.e. for maximum 64 bus
devices, this amounts to approximately 50 bus devices).
Central devices should be installed in main lines or in backbone lines.
Devices of connecting room groups should also be put in the same line segment
(under no circumstances several segments in a room should be mixed, unless the
upper limit of 64 (or 50 with reserve) has been exceeded. In that case, this should be
clearly documented!)
On the same floor (or in the same house) you should if possible only install one area
(do not fill up when 1 or 2 lines are free).

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
11/59

KNX BASIC COURSE

4.2 Support from ETS when setting up larger size topologies:
4.2.1

Creating several areas

Figure 12: Creating several areas (1)

Simply click on the “Topology” symbol in the “Topology” window with the right mouse
button and enter the areas in succession in the dialog box. If desired, the strategy of
generating the addresses must be customised; the settings are adopted by pressing OK
and the areas are created.

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
12/59

KNX BASIC COURSE

Figure 13: Creating several areas (2)

4.2.2 Creating several lines
The same procedure can also be applied to lines. In this case, click with your right mouse
button on the relevant area, and proceed as in the paragraph above!

Figure 14: Creating several lines

Note: If the same line structure is required in all the areas, it is advisable instead of first
creating all the areas and then all the lines per area to create and label an area
completely including its lines and then to duplicate it using copy and paste.

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
13/59

KNX BASIC COURSE
4.2.3 Find and replace - Strategy
Text alterations can be carried out very conveniently using “Find and Replace”: First mark
a line in the list that is to be modified, then activate the “Find and Replace” function. Enter
the search text and replacement and then click on the appropriate button underneath.

Caution!

Figure 15: Find and replace

This process should however be used with care; e.g. text can also be modified
inadvertently by pressing the “Replace All” button. It is better to first locate the text that
needs to be modified with “Find” and then to correct one after the other with “Replace”.

5 Different media (Powerline, TP, IP)
Three media types are supported directly by ETS: Twisted Pair, Powerline and IP. This
can also be distinguished in the topology. All line types can be freely combined with each
other. In order to link them, you need the appropriate media coupler. The project engineer
shall however ensure that settings are meaningful: if Powerline lines are created for
example, the overlying connecting line (the main line) must be of type TP.
Then again, the media setting does not necessarily have something to do with the coupler
that is being used: Even if an IP router is used as a line coupler, the line must be set as a
TP line! The media that is supported by a device or on which it can be operated can easily
be seen in the Catalogs view in the column “Medium Type”.

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
14/59

KNX BASIC COURSE

Figure 16: Error message when inserting an IP router in an IP line

The respective transmission medium can be selected in the “Medium Type” column; in the
case of Powerline, the necessary domain address is automatically generated via a
random generator. It can be edited at a later date, if necessary.
All non-TP lines are also marked by corresponding symbols, so that they can immediately
be distinguished from the standard TP lines.

Figure 17: Topology with different media

Figure 18: Media types of the devices

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
15/59

KNX BASIC COURSE

6 Interlinked building structures
The Building View is indispensable for the project designer of a larger project, for
documentation purposes alone. Only in the Building View, can it be completely
understood where each component is installed. You have to maintain the following
structure in ETS: buildings – building part (floor) – rooms/cabinet. However, there is an
exception to the rule: room/cabinet can also be located directly under a building. Devices
can be inserted in four locations, in a room / distribution cabinet, in the “Devices” view, in
the “Project Root” view or in the “Topology” view. All the devices that are not created via
the building structure (in the topology and trades) are inserted first. They should be linked
in the correct place in the Building View at the latest when the project is completed.
A problem regularly occurs if a building has not been built according to the “standard” e.g.
in other words it does not have clearly recognisable floors. In this case, the interlinking of
the building parts will help you further. This structural element can be freely subdivided;
moreover rooms/cabinets can also be inserted directly in buildings. This may be
necessary when you need to design a project for a sports centre for instance. The rooms
are inserted in the building and there are no floors.

Figure 19: Example of an interlinked Building View

6.1 Inserting devices, systematic descriptions
The devices are inserted after setting the structure of the building (see Project Design,
Basic). Four fields can be used to describe each device: Name, Description, Comments
and Installation Notes.
The differences lie in the field size and the presentation in the columns or in the download
dialog.

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
16/59

KNX BASIC COURSE

Figure 20: Text description fields for the devices

The description field has only 80 characters, the name can however be 255 characters
long, whereas comments and installation hints can have an unlimited length. Moreover
they can be formatted (bold, italic, underline, and colour). The name and the description
are also displayed in the display columns of the device views such as line view, room view
or all devices (unless they have been “hidden” via the workspace setting). They are also
displayed when downloading.
The installation notes and the comments can however only be viewed in the Properties
dialog or printed out in the documentation. They are generally used (as the name already
indicates) to make detailed comments about the commissioning or installation. However,
in the case of devices with a large number of channels, it is often necessary use these for
commenting as the name and description fields cannot take all channel designations due
to their size limits.
Finally, there is also an editing status below the description field, which you should use to
document the current editing state of the respective device. Via a dynamic folder with the
criterion “Completion status is not accepted”, you can then view at any time all the
devices that have not yet been accepted by the customer.

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
17/59

KNX BASIC COURSE

Figure 21: Editing (completion) status

6.2 Examples of device descriptions:
You should use a systematic legend when creating the description. It should contain the
following data in an abbreviated format:
Place of installation, e.g. DB1
Device type, number + number of channels (e.g. SDA 1f = 1-fold switch/dim actuator,
ShA 4f= 4-fold shutter actuator, SwitchA 8f= 8-fold switch actuator, PB 2f= 2-fold
push-button
Channel number + its function, e.g. Ch1_on/off
Functioning location of channel, e.g. R12
Example:
SubDB_H1F3_ SwitchA_4f(1)_R12_Ch1_L05,
Ch2_L06,Ch3_L07,Ch4_L08_on/off
Means: Lights 5-8 in room 12, 3rd floor of the first house, switching, executed at
switch actuator no. 1, which is installed in the distribution board on the 3rd floor.

7 Group addresses Advanced
7.1 Structure of the addresses
ETS offers 3 options for structuring addresses:
a) 2-level (historically from ETS1, practically not used anymore)
b) 3-level (used in ETS2 and ETS3, also suitable for larger projects, fixed folder sizes
and quantities on 3 hierarchical levels)
c) Free address structure: The user can set up his own, interlinked structures within
the entire 16 bit address range.

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
18/59

KNX BASIC COURSE
7.1.1 3-level address structure
On the basis of years of experience, the author recommends the following structure for a
single building:






MaGrp. 0 Central functions
MiGrp. 0/0 – 0/7: Function-dependant subdivisions of the central functions
MaGrp. 1 – 13: Floor no.
MiGrp: 0-7 Functions per floor
SGrp: 0-255: Room features per function and floor

Figure 22: Example of group address structure and designation

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
19/59

KNX BASIC COURSE

7.2 Description format
A group address describes a function. It is therefore also directed at the operational
equipment and not at the bus devices concerned performing this function (sensors –
actuators). For instance, you want to dim light 5 on the 1st floor in the 2nd room. It is not
appropriate to give a group address such a long description. That is why you should
establish a scheme before starting a project. It should contain abbreviations with all the
necessary information about
location where the function takes effect, e.g. Building-floor-room
controlled equipment or equipment group, e.g. Light 1, Shutters 1-4, Heating for
whole floor
Type of function (e.g. dimming, switching, set value, shutter movement)
(see also the comments in the device lists).
Example: A block of 3 buildings, 4 floors per building, and up to 20 rooms per floor:
1) H1F3R12_L05_on/off = means: Lights 5 in room 12, 3rd floor, building 1,
switching.
2) H3F2R08_L01-04_dim = means: Lights 01 – 04 in room 8, 2nd floor, building 3,
dim continuously.
3) H2F3R07_Shu01-03_stop = means: Shutters 1-3 in room 7, 3rd floor in building 2,
stop
4) H2F0R03-06_Shu_mov = means: Move all shutters (up/down) in rooms 03 – 06,
ground floor, building 1
5) H1-3_Light_central_on/off = means: Central switching of all the lighting in
buildings 1, 2 and 3.
6) H1F1R14_Heat_SetPt= means: Heating information – desired setpoint
temperature in room 14, 1st floor, building 1.
The examples mentioned above illustrate how you can establish self-explanatory
descriptions with only few characters. Please note that the name for the location and
equipment group should be re-used for the actuator (see Inserting / Copying devices).
This makes the assignment much easier afterwards.

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
20/59

KNX BASIC COURSE

7.3 Group address settings

Figure 23: Address settings

When designing a project, different options allow you to determine how group addresses
are to be handled.
a) Pass through Line Coupler: When a group address is set to ‘pass through’, it is
entered in the filter tables of all line couplers. It is therefore not filtered when
telegrams containing this group address do not actually belong in the line they are
sent to. You can choose this option to enable e.g. central functions that are used
in almost every line. In this case, it will not be necessary to re-program line
couplers, when the installation is extended in the future.
b) Central function: This property only has significance inside the ETS. Group
addresses that are set as such will be taken over unchanged in newly created
devices when you “Copy with options”. This will of course save you considerable
copying work since only the local group addresses will have to be newly assigned;
the central functions will be kept.

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
21/59

KNX BASIC COURSE

Figure 24: Setting the group speaker: ACK (PL) = Yes

c)

Group speaker: Only relevant for Powerline. In Powerline systems, only one
device must be available for each group address to send an acknowledgement
(Acknowledge) when receiving a group telegram with this address. A group
speaker property must be assigned to a Powerline device, i.e. in the object which
is linked to the corresponding group address. Please note: Just as the sending
address in the case of a “Transmit” flag is an object property assigned to this
specific group address, the same applies to the group speaker flag: you first select
the device (in Topology view or in another view), expand the objects in the tree
structure and select the object with the corresponding group address, so that it
appears in the right window pane. The option “Yes” can then be set in the ACK
(PL) column (see figure above).

7.4 Creating large numbers of group addresses
7.4.1 Directly in ETS:
As in the topology, the “Object generator” can also be used for the address structuring.
You can use 2 strategies:
1. Complete each main/middle/subgroup individually with addresses.
2. Copy an existing structure from a main group into another.
Example for strategy 1: Creation of new floor-related main groups

Figure 25: Creation of main groups (1)

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
22/59

KNX BASIC COURSE

Result:

Figure 26: Creation of main groups (2)

The text must still be edited e.g. the floor numbers must be inserted. This can be done
however without subsequent editing if you use the row expansion option (and then only 1
instance per row):

Figure 27: Creation of main groups (3)

Example of strategy 2:
Copying an existing structure:

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
23/59

KNX BASIC COURSE

Figure 28: Copying (middle) group addresses (1)

Then click in the desired main group and press “Ctrl + V”.
Result:

Figure 29: Copying (middle) group addresses (2)

7.4.2 Via export to / import from EXCEL:
Group addresses can be directly exported from the Group Addresses window and then
re-imported. Professionals can use this to generate the address lists conveniently outside
ETS e.g. in a spreadsheet program such as EXCEL. This section briefly describes the
process: To obtain a suitable CSV file for further processing as a template, one should
first generate a small starting structure in ETS. This is then exported as a CSV file in 3/3
format with a header line. In EXCEL, it is important that separators are immediately
recognised, TAB being the most suitable, so that EXCEL also creates the 6 columns
required for a 3-level group address structure. The required addresses can now be
generated in EXCEL. The sequence is of no importance. One should however avoid
ambiguities or address numbers outside the defined range.
Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
24/59

KNX BASIC COURSE

Figure 30: Exporting a group address – CSV file to EXCEL – Format setting

Figure 31: View of the CSV file in EXCEL

7.4.3 Free address structure
With the introduction of the fourth generation of ETS, the option was also created to freely
arrange group addresses. The 2- or 3-level structures that were randomly created in the
early years of the KNX/EIB system have certain limitations, as the addressable group
ranges are numerically restricted. If someone has created e.g. a “Central” middle group
and only requires approx. 10 addresses, he “wastes” the remaining 246 in this middle
group (which he could for instance have used for the “Lighting” middle group).
The free address structure can now be organised as desired. The structure is also not
limited in terms of number of levels. A planner can thus use up all available addresses
without gaps.
Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
25/59

KNX BASIC COURSE
It should however be noted that export and import is only possible via the XML format.
You therefore require an XML editor instead of a standard spreadsheet. It is also not
possible to change from the 2/3-level format to the free structure and back again.

Figure 32: Representation of free group addresses

8 Professional functions and tools
Currently many of the announced functions are still unavailable. This can be seen when
looking at the licence directory. The copying and pasting of entire building structures is for
example currently being expanded, so that after a copying process you will no longer
have the time-consuming task of amending the text and other properties of the copied
objects. The fact that it is currently not possible to copy a product including its group
addresses 1 to 1 between different projects will then also be rectified. Hence, this chapter
will be constantly changed and expanded in the following months.

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
26/59

KNX BASIC COURSE

Figure 33: Licence directory, current options

8.1 Copying with options
You can basically copy all elements in a project, i.e. group addresses, buildings, building
parts, rooms, lines etc. You can do this either with drag & drop (hold down the Ctrl key) or
just as in Windows using the Ctrl+C, Ctrl+V key (or by selecting copy and paste in the
menu bar).

Figure 34: Example: Copying devices (1)

Starting point: The linked room thermostat 1.2.1 should be copied 5 times.
First select it, then simply press “Ctrl + C” (or click on “Copy” in the context dialog via the
right mouse button).
Important: The newly created group addresses all receive identical names i.e. without
the addition “Copy of” etc. It is therefore advisable to use the same type of text element
e.g. the room name which is saved in the “Description” column in this case. The
Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
27/59

KNX BASIC COURSE
screenshot shown below has already “prepared” the 5 other rooms as regards group
addresses. As the ETS will create 10 new addresses per device, they will be inserted
precisely in the gaps between the headings!

Figure 35: Example: Copying devices (2)

Now mark e.g. the target line (in this case 1.2 again) and press “Ctrl + V”. The following
dialog opens:

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
28/59

KNX BASIC COURSE

Figure 36: Paste Special dialog

When you are copying devices, there are various options.
The marked devices can be duplicated with all additions and properties (e.g. also group
addresses, modified parameters etc.). This saves time as the new devices are
automatically inserted and their parameters and address links are taken over from the
original device 1 to 1. There are three strategies: to create, keep or omit group
addresses.
1. Keep: This option is suitable for copying totally identical devices (for instance a
switch in a corridor or staircase). No new group addresses are created, just one
new individual address. The parameter settings are taken over from the source
object.
2. Create new: This option saves you from manually creating and linking new group
addresses. However, you should prepare this option very carefully. Reason: Each
open address link is indeed newly created, but if you have not copied its
communication partner, ETS is unaware of this. After subsequent copying of the
forgotten device, further new addresses are created, which do not match those
created during the previous copying process. This means that whenever you copy
with the option to create new addresses, all involved devices must be copied in
one go. Exceptions to this are the “central addresses”: they are not changed when
copying. You can use this feature to your benefit to avoid the “cloning” of
addresses that do not have a sender or receiver. Real central functions are of
course also not created as new copies when using this option.
3. Do not create address links: Choose this option when you only need a device that
does not have the standard parameters from the catalog, but those you previously
configured.

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
29/59

KNX BASIC COURSE
The result of the copying operation is too extensive to show here. However, the
description of the new devices and their addresses still need to be adapted. As we have
selected the room name for all elements, it is now simple to create the correct text using
“Find and Replace” (as shown earlier).

8.2 Undo function
When you are working on a project, you often face the issue of restoring an intermediate
state, when wishing to do certain things in a different way.
The function called “Undo / Redo” can be used for this purpose. It allows reversing a
number of steps or restoring them under certain conditions.

Figure 37: Undo/Redo in the toolbar / List of reversible actions

For this, ETS saves all the actions of the project engineer. The maximum number of
actions that are saved can be set via “Settings” – “Presentation General” between 0 and
200. If this number is reached and there are further entries, the oldest entry is always
overwritten. Since all the previous actions are also displayed in a list, you are able to
reverse a series of actions in one go, especially if they are directly linked to each other
(example: Find and Replace steps). This function however also consumes performance
resources. When you for instance use the complex “Copy with options” function described
before for entire building structures, you have to basically calculate about twice the time
for this action compared to when not using this option. The option can therefore also be
switched off (with the value 0).

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
30/59

KNX BASIC COURSE

Figure 38: Setting the Undo Level

Please also note: This function has global repercussions. The saved working steps can
relate to different projects and / or databases: when undoing them, the function will
access this data, even if no longer available or no longer opened.
Which options are available?
On the one hand, it is possible to click on the two buttons in the main menu bar. You can
however also open the “Undo History” in the “Side Bar” to see what has been saved
there. An entire sequence of steps can in this way be reversed or restored in one go - if
appropriate. Actions that are greyed out have already been reversed once but can still be
restored.

8.3 Dynamic folders
The contents of “dynamic folders” can be stored according to specific filter conditions e.g.:
Bus devices that still need to be programmed
Lines without bus devices
Group addresses without object associations
Download lists (if you are editing certain devices across all the structures and wish to
program them collectively, they are stored in the dynamic folder called “Modified
devices”).
All bus devices of a specific manufacturer
All bus devices which have a switch function
…. and much more.
The benefit of dynamic folders is that they are always “up-to-date”.

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
31/59

KNX BASIC COURSE

Figure 39: Example of a dynamic folder: all devices whose status is not yet “accepted”

8.4 Checking and editing filter tables, permitted group address ranges
Line / backbone / or media couplers must be inserted for logical coupling, as soon as two
or more bus lines are created in a project. In order to avoid that group telegrams of one
line are sent unnecessarily on another line, each line coupler must be loaded with a filter
table. The filter table consists of a bit matrix in the (permanent) memory of the line /
backbone coupler. Each bit represents exactly one group address. If the coupler receives
a group telegram, it will check in the filter table if the bit has been set for this group
address. If so, it will redirect the telegram to another line. If not, it will do nothing.

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
32/59

KNX BASIC COURSE

Figure 40: Coupler parameters

All theoretically possible group addresses can now be used in ETS, including the main
groups from 16 to 31. The filter tables of the line couplers have however not been
extended until now – this is due to the fact that manufacturers preferred to remain
compatible with old installations rather than cause possible conflicts. Occasionally a
warning is therefore displayed in ETS that main groups above 15 cannot be used. The
message shown here refers to a plug-in device; most plug-ins only allow linked products
with “regular” addresses < Main Group 16.

Figure 41: Warning when using the “high” group addresses

For test purposes, parameters can be set in such a way that couplers will route or block
all group telegrams, whereby both transmission directions Line  main line or vice versa
can be set separately. You will find sufficient details about setting the parameters and the
function of the coupler in the chapters “Topology” or “Bus devices”.
You will find a detailed explanation in the project design example below as to why filter
tables should be activated in normal mode.
8.4.1 Automatic filter table
The project designer does not have to deal with the correct creation of filter tables
provided that the project contains all information regarding in- and outputs (=senders and
receivers). In this case, ETS automatically generates the correct table. The creation of the
Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
33/59

KNX BASIC COURSE
table starts with the download of the coupler. That is why filter tables are not displayed,
but are loaded straight away in the coupler.
8.4.2 Manually created addresses in the filter table:
Nevertheless, there are cases, in which the tables cannot be generated correctly because
of the fact that devices receive or send telegrams, whose parameters cannot be set in
ETS, for instance gateways or visualisation programs. In this case, a solution is needed to
correctly set the filter tables, just for these addresses.
There are two options available:
a) Manual configuration of the filter table
b) Use of a dummy application
To a): In topology, in addition to the devices created in the line, you can also insert the
group addresses which are to be linked manually.

Figure 42: Manual filter table entries

You can do so simply by dragging the group addresses
from the Group Address view into the Topology view. If
you drop them onto a line, the Properties entry “Manual
filter table entries” appears.
Alternatively, you can also use the input field “From” and
“To” below this list.
This procedure is not appropriate for a larger number of
lines, as one personally has to keep track of where
group addresses need to be inserted manually.
b) is for sure the better method:

8.4.3 Using a dummy application
A dummy application is set as a virtual placeholder for the real visualisation. In the
Topology view, it does indeed look like a bus device but is not really installed. It merely
represents a sort of “calculation aid” for ETS for the setting of filter tables. Let us suppose
a visualisation needs to be used in main line 1.0. You then insert a dummy application in
Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
34/59

KNX BASIC COURSE
this line and link all group addresses used in the visualisation with this application. The
great advantage of this application is that it again ensures that all the filter tables in a
project are calculated automatically.
A dummy application normally has a very large address capacity and variable object
types, so that it is possible to assign any number of addresses.

Figure 43: Parameters / objects of the dummy application

Ideally, this dummy application can have the interface address of the visualisation and an
appropriate comment can be entered as device description:

Figure 44: Dummy product for visualisation

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
35/59

KNX BASIC COURSE

9 Checking the project

Figure 45: Structured project check

After termination of the engineering work on project, before the first commissioning work
starts, even before ordering the material, it makes sense to check the whole project
structure if all requirements really have been met.
ETS can support here to a limited extent, by means of the integrated, structured checking
algorithm.
4 categories of properties are checked:
a) missing or wrong / wrong number of system devices such as power supplies,
chokes, line and area couplers. ETS will show an error for lines that have
attributed bus devices but do not have any system devices. Lines without
attributed devices are not evaluated  Device check
b) missing group address assignments (group addresses to device and vice versa).
ETS requires that a group address is at least assigned to 2 group objects, and
that one bus device has at least 1 object link to a group address  Group address
check
c) missing individual addresses (inserted devices not yet assigned to a line) 
Topology check
d) Product information check
The individual steps in detail:

9.1 Device check

Figure 46: Device check options

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
36/59

KNX BASIC COURSE

9.2 Group address check

Figure 47: Group address check options

9.3 Topology check

Figure 48: Topology check options

9.4 Product information check

Figure 49: Product information check

The test results illustrate very clearly what is missing or has been forgotten and by
clicking on the hyperlinks in the results screen, you can jump to the objects with errors.
The product information check is particularly interesting if a manufacturer has several
applications per device. The check then shows which update options should be used if
possible.

9.5 Limits of the ETS project check
ETS can really only detect very rough errors. It is obvious, that such an automated check
cannot find logic errors of the project engineer. If e.g. the group addresses have been
assigned incorrectly or uncompleted or a device has been assigned to the wrong line, this
cannot be detected.
For example, it is also not possible to guarantee that parts lists are complete as
accessories such as connectors, data rail, bus terminals and above all bus couplers (for
all flush-mounted devices requiring them) can indeed be inserted from the catalog but are
not compulsory.
On the other hand, detected but uncorrected errors will not prevent configured bus
devices from being downloaded, as long as they have an individual address and the line
is powered by a suitable power supply unit.
Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
37/59

KNX BASIC COURSE

Figure 50: Division of lines in a medium-sized project

10 Bus hierarchy
10.1 General considerations
Before you finally start the actual ETS project design work, you should have made a
rough draft for the later assignment of the bus devices. Assignment means: area and line
addressing. Moreover, it is about translating project requirements put forward by the client
into the functional scope of the available bus devices. For instance, a requirement could
be: “Emergency function for lighting and blinds must be guaranteed in the event of a bus
failure”. In this case, the corresponding actuators must be selected under these
prerequisites. Devices without manual operation are hence excluded right from the
beginning. We will deal with this issue later.
If higher data throughput is to be expected, one should contemplate to create TP lines as
islands, connected to an Ethernet network via TP/IP routers, which has a significantly
higher transmission rate.

10.2 Taking the building structure into account
In order to maintain a clear overview, also during later extensions and servicing work, the
division of the KNX system into lines and areas should be optimally adapted to the real
building structure. The easiest way would be that a building could represent an area and
the floors could represent the lines.
If however the number of bus devices that are placed in these individual segments
deviates significantly from the requirements regarding cost efficiency, you need to modify
the structure accordingly, resulting in the most cost-effective but nevertheless convenient
solution.
Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
38/59

KNX BASIC COURSE

10.3 Inclusion of customer requirements
Client demands can moreover considerably affect the to be installed bus structure. These
may include:
Actuators should all be principally installed in distribution boards, accessible from the
outside in order to reduce interruptions in the event of service and maintenance work.
To make cabling easier and therefore have fewer load circuits, actuators should
always be installed as close to the load as possible.
In larger buildings with standard room types, all bus devices of a room should be
installed together in the same environment (e.g. room control box).
Instead of perhaps 4-fold or multiple push-buttons, only single or 2-fold push-buttons
should be installed, as these are easier to operate and label.
The operation costs for bus lines (i.e. supply of energy, uninterruptible power supply
and so on) should be reduced if possible, while accepting the disadvantages in terms
of safety.

10.4 Consideration of system limits, planning of reserves
In order to be prepared for any possible changes in the course of the planning phase and
also for the future expansion of the system, you should include reserves in your
calculations. In plain language, this means – taking into account the general conditions
given above – that a bus segment should be equipped with at least 30 bus devices in the
first stage with a maximum of 50. Bus lines can each be supplied with a single or even 2
power supply units or 2 segments can share a power supply unit with 2 chokes. In special
cases, even devices with a distributed supply can be used (see chapter ‘Topology’).
Please also ensure that the available energy is sufficient for further expansions! It is not
always possible to install the upper limit of 64 bus devices, when the current consumption
of the devices exceeds the capacity of the power supply unit. On the other hand, a
stronger power supply unit (e.g. 1280 mA) cannot guarantee that you can operate 64
devices, as the total impedance of the line is reduced due to the higher total current
consumption, thus negatively influencing the signal form and transmission range. Until
now, the manufacturers have refrained from providing detailed information on this topic
since it is impossible to describe all exceptions and find a reliable functioning solution for
each possible case. You are therefore expressly reminded here again, that the limits
mentioned in other chapters (64 devices but no more than 640 mA no-load current) must
always be respected.

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
39/59

KNX BASIC COURSE

10.5 Line coupler or IP router?

IP router as a line coupler
Line 1.5

Line 2.5
Floor 5
Line 2.4

Line 1.4
Floor 4
Line 1.3

Line 2.3
Floor 3

Line 1.2

Line 2.2
Floor 2
Line 2.1

Line 1.1
Floor 1

Area 2 (East wing)

Area 1 (West wing)
Data network (LAN)

Figure 51: IP routers replacing line couplers

For many years now, more and more IP routers are installed, next to the classic TP-TP
line couplers. Nowadays, they are still significantly more expensive but offer several
benefits that should not be underestimated:
In addition to the standard multicast routing function, each IP router offers one or
more so-called IP tunneling links.
These tunnelling links can be used for ETS remote access as well as for access by
visualisation programs.
If you access the associated line directly with ETS via an IP tunnelling connection, you
always have the fastest possible communication link available.
The visualisation can also be made considerably quicker if it can be linked to all IP
routers simultaneously via a single data interface.
In the vertical communication KNX to Visualisation, speeds of up to factor 225 can be
achieved (225 lines in parallel equals 225 x 9.6 kbit/s = 2.16 Mbit/s)
In principle one can say that the more lines that are needed and the more data points that
are centrally monitored, the more worthwhile the use of IP routers becomes.

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
40/59

KNX BASIC COURSE

10.6 Data rates and cyclical processes
The data rate, which can occur on average or in critical cases, should also be calculated
right from the beginning. Time-critical functions requiring a quick reaction (real-time
applications) should if possible not be planned and designed across lines. In this case
valuable tenths of seconds could be lost when passing through line/backbone couplers.
This applies to dimming, especially cyclical dimming. If such local functions are realized
across several couplers, this will affect the linearity of the variation of light intensity.
Moreover, the start and end delay of the function may in some cases be too high.
You should also pay attention to the total data rate for all devices with cyclical sending.
Cyclical transmitters are all alarm sensors (e.g. wind and rain detectors, weather control
units, smoke detectors, window contacts), which should be continuously monitored to
ensure that they are functioning correctly.
The security level of the bus system does not always increase when setting such a device
to “sending” as often as possible, but more by choosing a rate that is adapted to the
potential bus load.
Even more critical are devices and software packages that cyclically poll the status of
their communication partner. The fact is that this will result in at least two bus telegrams
per data point –the polling telegram as well as the corresponding answer.
In addition, normal bus load can be endlessly “increased” by incorrectly configured line
and backbone couplers. The following section will outline an example, taking into account
the aspects mentioned above. It shall however be noted that with this example is only
able to touch upon a small proportion of all possibilities of a flexible and variable system
as KNX!
Further below (11.3), you can find a calculation example for planning or calculating bus
telegram loads.

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
41/59

KNX BASIC COURSE

11 Planning a project: Example
11.1 Requirements / regulations (specification text)
A bus line contains the equipment of a floor with 8 rooms. The functional requirements for
each individual room are:
3 dimmable lighting circuits; 4 x 58 W; can be manually switched both separately as
well as together, changeover switch to automatic operation
2 shutters, proportionally adjustable, can be manually controlled both separately as
well as together
1 radiator, with proportional control and the corresponding heating controller
2 window contacts, which lower the temperature when the windows are opened
1 room information and control panel, displaying the functions and values of the
temperature controller (setpoint and current temperature, night/day operation mode),
indicating storms and displaying the state of the shutters and lighting control
(manual/automatic) and also allowing to control the latter
for the operation 2-fold or 4-fold push-buttons, also realizing a central function: basic
lighting (2 of 3 strips of lights) on; all lights off + shutters up.
Moreover, a weather control unit is used, which amongst other things has the following
functions for the rooms:
Wind sensor: raising shutters in the event of a storm
Light sensor: when a pre-determined brightness limit is exceeded, closing of shutters,
switching on lighting control and proportional control of slats, raising the shutters at
nightfall
In addition, a central time switch is used, which
controls the room temperature profile centrally on a weekly basis
switches off lights at night when still turned on
An information panel is used per floor, which displays for each room
whether a window is opened
current temperature values and setpoint
whether a light has been left on somewhere
position of shutters (has limit of 30% been exceeded?)
On a summary page for each floor, the following should be displayed:
at least 1 window open – yes/no?
at least 1 light on – yes/no?
at least 1 shutter lowered (more than 30%)?
In order to generate group signals, appropriate logic modules must be used. The
automatic slat function depending on external brightness is implemented stepwise (3
steps) by means of an analogue threshold value converter.
All status signals – including the group signals – should run centrally in a building
visualisation.

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
42/59

KNX BASIC COURSE

11.2 Task definition
Now, you have to assess, if
one bus line segment is sufficient or if two are needed
which bus telegram load can be expected?
The underneath explanations show that this assessment can lead to substantial
differences, which can influence the success and failure of the KNX technology.
You can now use ETS first in order to select possible bus devices:
From the great quantity of available devices, the following could have been selected:
11.2.1 Parts list for solution 1:
Per room:
3 switch/dimming actuators (1-channel)
1 brightness controller
1 valve drive
1 contact interface with 2 inputs
1 heating controller
1 display with at least 6 display functions
1 x 2-channel shutter actuator
4 x 2-fold push-buttons
1 logic module for the light/shutter group signals
1 logic module for the connection of the window contacts
___________________________________________________________________
15 devices
x 8 = 120 devices

In addition:
1 logic module for the conversion of analogue threshold values into binary signals
(shutter)
3 logic modules for - all windows, - all shutters, - all lights
1 information panel
1 time switch
1 weather control unit
_______________________________________________________________________
makes exactly 127 devices
When taking into account the reserves, 2 lines and a main line are therefore
necessary

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
43/59

KNX BASIC COURSE
The following solution would however also be possible:
11.2.2 Parts list for solution 2:
Per room:
1 x 3-fold switch/dimming actuator with integrated brightness controller
0.25 x 8-fold shutter actuator (used for 4 rooms)
1 valve drive with 2 integrated contact inputs
1 heating controller with integrated 2-fold push-button
1 x 4-fold push-button
1 display with at least 8 display and operating functions
___________________________________________________________________
Total per room 5.25 devices x 8 = 42!
In addition:
1 logic module for the conversion of analogue threshold values into binary signals
(shutter)
1 logic module for all binary connections for the group signals
1 weather control unit (as above)
1 information panel (as above)
1 time master (because the time clock functions can also be detected by the analogue
threshold value generator, when it receives the time on a regular basis).
___________________________________________________________________
This totals only 47 bus devices! Only 1 line remains, instead of 3 as in the first
case!
Conclusion: Through an accurate survey to determine which optimum device
configuration is possible, you can save up to 50% of the costs!

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
44/59

KNX BASIC COURSE
Presuming that solution 2 is implemented, we now proceed to the second part of the
study:

11.3 Determining the bus loads
11.3.1 Scenario 1:
According to the parameterisation of the components, the specified functions can lead to
a noticeable telegram load on the planned bus line.
Status signals that are sent automatically in a 3-row lighting circuit with a sampling rate of
one 1 second, also generate between 3 and 6 telegrams (!) per second. That makes 3x
the 8-bit brightness value + (when switching on/off) the 1-bit switching state. We know
that there can never be more than approximately 48 telegrams per second and with
maximum cable length only 24 telegrams per second (the latter is however not the case
here). However, we have 8 lighting circuits. If you multiply this with the numbers above,
this already results in 48 in the worst case. However, many other bus devices also send
out telegrams simultaneously on a regular basis! The scenario could look like this in the
worst case:
Each room display unit polls the status 1x per minute (6x) = 12 tel./min.
The logic module (56 inputs) is also set to cyclical polling of all inputs, with an interval
of 30 seconds per polling cycle = 224 tel./min.
The analogue threshold value converter polls 16 (shutter) states 1x per minute (= 32
tel./min.)
The building visualisation polls the state 1x per second (= 120 tel./min.)
The wind sensor sends 1x per minute (= 1 tel./min.)
The brightness sensor sends 1x per minute (= 1 tel./min.)
The floor information display polls up to 10 states every 10 seconds (= 120 tel./min.)

Figure 52: Spreadsheet in EXCEL for determining the bus load / transmission time per
minute

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
45/59

KNX BASIC COURSE

These were by far not all of the telegrams sent on this bus line, only those that were
created by the automatic control loops and those devices returning statuses.
Nevertheless, the 7 points listed above result in a total of 502 tel./minute or 8 –9 tel./sec.,
which represents a bus load of approximately 20%! Together with the lighting
control without modification of the switch status, this already amounts to 70%!
11.3.2 Always set the line/backbone coupler to “filter”!
The following however adds to the problem: (unfortunately quite frequently) the filter
tables of the line/backbone coupler are made “inactive”, by setting the standard
parameters from “filter” or “normal” to “route everything”. This can lead to a serious
problem. This leads to the following estimate:
The system above exists exactly twice. Both lines are connected via the main line, in
which the weather station and the visualisation are located. The couplers are “unlocked”,
i.e. they let all group telegrams through unfiltered.
Now the following happens: all telegrams listed above are also channelled in the
neighbouring line and vice versa. However, in this line there is no receiver. Consequence:
The coupler repeats these telegrams after the initial transmission another 3 times. If bus
loads above 100% were possible - we already reached 100% without lighting control –
this would theoretically result in 350% bus load with lighting control. This is of course
limited to 100% and as a consequence frequent losses of telegrams and delays when
transmitting.
ETS supports quick calculation as well as optimized short download of filter tables: they
are constantly updated in the background; only bytes that differ from “00” are taken into
account when downloading the coupler. This process is made possible by a fast-erase
algorithm, which first sets the old filter table to “zero” before the new one is loaded.
Now it still needs to be verified whether the cyclical polling intervals need to be as short
as mentioned above or whether cyclical polling is necessary at all. Let us look at an
alternative:

11.3.3 Scenario 2:
Underneath another solution that offers almost the same security, but a substantially
lower bus load: (we assume that all changes to the corresponding bus devices are sent
automatically and that they basically do not need to be polled at all)
The 8 lighting controllers now only poll every 5 seconds = max. 576 tel./min. (or 288
without change in the switching state)
The room information displays poll 1x every 5 min. (= 2.4 tel./min.)
The logic module now only polls every 5 min. as an additional security measure (=22.4
tel./min.)
The analogue threshold value converter also polls every 5 min. as an additional
security measure (=6.4 tel./min.)
The visualisation does not poll at all, as all important information is already either sent
event driven by the bus devices themselves in the line or is additionally polled (= 0
tel./min.)
Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
46/59

KNX BASIC COURSE
The floor information display now only polls 1x per minute (= 20 tel./min.)
___________________________________________________________________
Result now: 627 tel./min. or 339 tel./min. or approx. 11 (22%) or 6 (12%) tel./sec.
The difference is remarkable! What is more, not one function is unacceptably delayed,
and all signals are generated immediately as before! It is still possible to reduce this rate
even further, how can be determined by the reader himself, in accordance with the here
outlined specifications.

Figure 53: Spreadsheet in EXCEL for determining the bus load / Scenario 2

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
47/59

KNX BASIC COURSE

11.4 Summary of the bus load calculation
If we should draw a conclusion here again:
The optimum function of the KNX network depends directly on the most accurate
estimation of the data rate in the most unfavourable and average condition. You should
always take into account, that the bus system is first and foremost event-driven and
cyclical repetitions of unchanged states are only necessary as back-up functions with a
relatively long time interval.
Lines or backbone couplers shall be set to “normal” mode, when normal operation is
adopted, i.e. the filter tables must be loaded, and the evaluation algorithm for the filtered
transmission must be activated.

12 Administration functions, project documentation and
archiving
12.1 Reports
In order to document a project, a series of reports are at your disposal.
There are different perspectives to create documentation:
a) Building structure with allocated devices
b) Parts list (important for orders!)
c) Bus topology overview
d) Detailed lines and device lists
e) Group addresses
f) Commissioning status
A detailed printout of the Building View with all available information would already be
sufficient in theory. However, it would be very difficult to quickly find out from this report purely arranged according to the building structure - information for instance about the
equipment of a bus line, about the whole topology structure and about the number and
structure of the group addresses used. The information as to which devices was
downloaded and with which result can also not be deduced from that.
The device details, i.e. configuration of flags, object flags, comments and assigned
addresses, should not be printed out in the Building View but in a detailed line printout.
How to proceed?
It shall be first noted that ETS reports always produce a global view of the project. Print
outs of certain parts of the installation are only possible via partial printouts or by
exporting to a file format other than ETS (see below).

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
48/59

KNX BASIC COURSE

Figure 54: Starting the documentation tool

Currently only the here displayed toolbar icon is available for accessing the printing and
report generation window.

Figure 55: Report dialog

The process is clear: you select a report (on the left-hand side) and press the button
“Generate Report”. The preview is thereby created, which can then either be saved as a
PDF file or printed out.
Examples:

Figure 56: Building details – Topology overview – Parts list

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
49/59

KNX BASIC COURSE

12.2 Exporting group addresses
Group addresses can be exported in different text formats for processing outside ETS. To
do so, click in the Group Address window with the right mouse button on the “Group
Addresses” header and then on “Export Group Addresses”. Then select the CSV format
and the most suitable delimiter. As tabs are not part of text descriptions, they are the
most suitable delimiter to use. In order to be able to edit or expand well the data later on
in EXCEL, you should also select the format “3/3” and “Export with header line”.

Figure 57: Export of group addresses as a CSV file

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
50/59

KNX BASIC COURSE
Result in Excel:

Figure 58: Group addresses - Export data in Excel

12.3 Export OPC
Many KNX installations are also equipped with a SCADA system (=visualisation). The
OPC server is increasingly used to display central system-independent data or to operate
functions.

Figure 59: Data export

In most cases, current building management systems use more than one communication
system. Apart from KNX, other field bus systems are used for different tasks. On the
processing and management level, it should however be possible to link and present all
data together. The operating and monitoring programs that are used here (SCADA
software) do not have special “low-level” data exchange drivers in order to communicate
directly with the relevant bus system, but use a so-called OPC server. (OPC Object
Linking & Embedding for Process Control). The OPC standard defines the most important
data types, which are identical in all systems. For instance, data types that can be
presented in a 1 bit, 8 bit, 16 bit and 32 bit format. The OPC servers are driver programs,
which on the one hand guarantee bus access via the available interfaces (for KNX:
RS232, FT 1.2, IP or USB) and on the other hand, if possible, convert the data that is
sent or received, in such a way that it can be clearly understood and interpreted on both
sides. These programs can be implemented either on standard PCs or in special
Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
51/59

KNX BASIC COURSE
hardware with direct bus access. In the case of hardware-based OPC servers, the data
exchange nowadays is ensured via an IP network; in the case of software-based OPC
servers, it is generally the same, but they can of course also run directly on the server
PC, on which the SCADA software is installed.
How can data from a KNX system get into the SCADA software?
It is not possible to use the export function of group addresses as outlined in 12.2, as the
data types are missing in this case. ETS however offers you an easy way to first export
the complete project data in the appropriate OPC format. The export contains related to
group addresses:
Name of the main group
Name of the middle group
Group address (2 or 3 levels)
Name of the subgroup
Data type (EIS data type)
Priority (this is important for sending telegrams via the OPC server)
All other group addresses, which can be influenced directly or indirectly via device
objects (e.g. all separate functional addresses in case of central addresses. This
ensures that when operating a central command, the correct value will also be
assigned to all separate functions).
This file is created in ASCII format – format with the extension “ESF” (=EIB Session File)
and can thus not only be read from an OPC server (an additional program, which can be
obtained from KNX members), but also from any other appropriate server program, which
understands this format.

Figure 60: Export file contents

12.4 Data types
The already discussed data types (display format of the data) can be checked and also
changed in ETS. You should clearly make the distinction between pure information
(number of bits) and their interpretation (formatting, translation). In order not to create any
non-practice-oriented restrictions, all group objects of KNX devices with the same data
size can be linked to each other via group addresses. A functional unit, which for instance
creates threshold value switching telegrams from the information of analogue value
sensors, does not have a default data type for its associated objects.
The relevant objects of most KNX devices do not have a data type set by default. If you
manually change these settings, they will only affect the relevant object to which the
change is made. What is this used for?
Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
52/59

KNX BASIC COURSE



When exporting data (group addresses), this additional information can be of
importance later on;
When recording data with the telegram recorder, the values are displayed
correctly.

Figure 61: Object data types in the Properties dialog

13 Database handling, project backup
13.1 General
Managing data correctly is essential to any professional company nowadays. Also for
KNX projects, possibilities exist to save them in such a way, that they are largely
protected against data loss or damage, particularly while editing the project.

13.2 Using one database per project
When you start working with ETS, one normally starts by importing all possible product
databases of the different KNX manufacturers. This however produces very large
databases. The result is that the reaction speed of these databases decreases as the
number of products increases. Moreover, it is not advisable to use a single ETS4
database, as all data would be lost in the case of a database crash.
Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
53/59

KNX BASIC COURSE
The best procedure is
defining per project which products should be used
importing these products into a project-specific ETS4 database
in this way you kill two birds with one stone: you produce a small, slimline database
that is quick to edit, while also restricting any possible losses to one single project.

13.3 Creating regular backups

Figure 62: Database backup settings

In addition to the usual project export, ETS of course offers data security via backup and
restore. This backup can be carried out automatically and with a date and time stamp, the
latter ensuring that a new file is created each time ETS is closed. This method does
however require a great deal of space, therefore only applicable when working according
to the option as set out in the above clause 13.2.
If the backup path points to a central data server, which is in itself regularly backed up,
you also have additional security.

13.4 Master database and project reconstruction
In order to check specific device functions and parameters quickly, it is advisable – in
contrast to the recommendation under 13.2 for individual projects – to create a database
with all products one regularly works with. This database is used for reference purposes
and not for project design. It has the benefit that you can put it to good use if you have to
reconstruct a project at a later date as it contains a large number of products. A

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
54/59

KNX BASIC COURSE
reconstruction via a supplementary ETS function (currently not yet available in ETS4)
requires this product data to restore the project.

13.5 Central database memory and master database

Check in

Check out

Local copy

Local copy

Local copy

Figure 63: Example of central database management

The central data server mentioned above is also essential for workgroups. All project
databases can thus be managed comfortably and edited by all employees and copied
back again. This process is called “checking out” and the opposite is “checking in”. If a
database is only located on the central server, it is called “checked in”. If a project
engineer retrieves the database for editing, it is “checked out”. The checked out database
can only be edited by one person; however at that moment a copy is kept on the central
server in the form of a backup. This can be restored if the local copy gets lost.
However it is no longer possible to match a restored backup database with the checked
out original!

14 Complete project documentation
Which documentation should be drawn up by the contractor? When can documentation
be considered complete? What is the customer entitled to? And when?
These questions are regularly asked by many training participants. However, also in this
case there is no standard answer. You can however at least refer to the relevant
regulations and ordinances, which define an approximate scope of the documentation to
be provided. In the end, it is always the duty of the parties under contract to define at the
initial planning and design stage and before the placing of the order, what constitutes a
completely delivered “work”.
Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
55/59

KNX BASIC COURSE
The following text was written based on the German “VOB” (a volume of contracting
procedures for building works). The author assumes that these national regulations also
apply in other countries.

14.1 Guidelines according to the German contracting procedure for
building works (VOB)
The following text describes the situation in Germany:
Part A of the VOB, § 9 “Work specifications” and § 10 “Submittal documents”, refers to
the “documentation” according to §10 sect. 4 (1). In the VOB, Part B, reference is made in
§1 “Type and scope of the activity” to the fact that it initially depends on the contract
between the contractor and the client. If there are inconsistencies in the contract, all the
available documentation – ranging from the technical specification as a basis for the
specific and additional contract conditions to the technical contract conditions in
accordance with the VOB, Part C – is then used for clarification purposes. This means in
plain txt that the work specification can already contain information directed at the later
implementation of the documentation and in case of doubt can also be used to assert the
rights of the client. An interesting factor in this context is represented by §3 no. 6 of the
VOB, Part B: This deals with the rights of the client as regards the use of data processing
programs, specifically required to display/or print the documentation. Open quote: “With
regard to data processing programs, the client has the right to use software on the
specified hardware with the specified properties in unmodified format. The client may
make two copies for data security.” Close quote.
If this is related to KNX, only the ETS software can be meant as a “data processing
program”. The “specified properties in unmodified format” are nothing other than the ETS
project itself or the types of documentation that can be derived from it. It is more precisely
detailed in the VOB, Part C – DIN 18382 “General contracting conditions for building
works, low and medium voltage installations with nominal voltages up to 36 kV”
(Reference: Issue December 2002).
Paragraph 3 “Implementation” contains the following:
Section 3.1.3 “The contractor must make all information available to the client necessary
for the correct operation of the system.” And also: “This includes in particular:
Wiring diagrams
Address lists
Parts lists
.......
Functional descriptions
Interpretation: A wiring diagram in a bus system in the broadest sense is the topology,
which can be created both in the form of a table as well as in graphical format. Address
lists are nothing other than the individual addresses and group addresses of our KNX
devices. A parts list is self-explanatory. Functional descriptions are the brief notes in the
device comments and address comments as well as - if there is insufficient space - the
installation notes for each individual device.
And finally:
Section 3.1.6 of DIN 18382: “The contractor must produce all necessary operating and
maintenance instructions and necessary inventory plans as well as hand over this and
individual project-specific data to the client”. It is thereby categorically stated that the
Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
56/59

KNX BASIC COURSE
customer has a legally recoverable right that this data and plans are handed over,
including those that are more or less “hidden” in a KNX ETS database. The contractor or
the project designer of a KNX project should therefore be prepared to produce the
underneath listed data and documents and issue them to the client in an appropriate and
usable format.
14.1.1 Contents of the project documentation
Database: It seems at first the easiest way is to copy the ETS database of the project
onto a CD or USB stick and then hand it over to the customer. This is possible in
principle but only in the BACKUP format! The database that is being edited consists of
several components as well as PC-dependent data, so it would be completely
pointless to copy this data.
The customer cannot however do anything with it without an appropriate ETS
program. In other words, he must have an appropriate ETS license! Moreover, there
may be a need for supplementary data, e.g. DLLs and help files or supplementary
files of individual products, which may be indispensable if one wishes to change the
products at a later date. Since ETS 3 and according to the manufacturers, all data
from the “Baggage” directory can also be found in the relevant ETS database. For
security, these “Baggage” files can also be copied. You can find these – if ETS has
been installed in the standard directory”C:/Program Files/ETS” – in the subdirectory
“C:/Program Files/Common files/EIBA sc/Baggage”, arranged according to the
manufacturer codes.

Figure 64: Baggage (=supplementary) files

Project export: the project exported in full generally contains the supplementary files
and dll’s. It should however always be checked anyway, whether this is indeed the
case (re-import in an empty database).
Supplementary programs (SETUP): some KNX devices require additional setups
(their own configuration programs). For completeness sake, such programs should
also be put on the CD for the customer. These programs are normally supplied free of
charge by the relevant manufacturers and can be copied without any restriction.
Supplementary files (DLL, text etc.): see points 1 and 2!
Parts lists
Topology
Building structure
Group addresses
ETS offers an elegant way to archive all project data – including plans and data from
other programs, tenders, functional specification etc. – in the project export file under
Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
57/59

KNX BASIC COURSE
“Project files”. If you click on “Add”, an Explorer window opens, where you can search for
files and insert them.

Figure 65: Inserting additional files

Note: All data that is handed over in electronic format requires specific program and
operating system versions. This data is also part of the complete documentation.
The contractor of course does not need to issue licensed programs such as ETS or
Windows.
14.1.2 Handover to the client
Finally, the documentation mentioned above must be handed over to the client in any
case. The eib.db + supplementary files and export file are normally of equal value, i.e. you
can limit yourself to one of them. What however is frequently discussed is how you can
protect your rights as a contractor towards the client? 2 comments must be made:
According to paragraph 3.1.7 of the German contracting procedure for building works/DIN
18382, the examination of the building as regards operational reliability (evidence of each
individual function) and according to the relevant DIN norms (or relevant international
standards, for KNX e.g. EN 50090) must take place with appropriate documentation of
the test results. The minutes of this examination must normally be handed out to the client
before his acceptance for a possible re-check.
A technically skilled client could now make changes in the project later on, if he has the
complete ETS project data.
In order to protect yourself as a contractor, it is advisable to activate the project password
and to hand it over to the client separately in a sealed envelope. If any problems should
occur after the handover, which should be remedied within the warranty conditions by the
contractor, he could check to see whether the envelope is damaged or not. If the seal
should have been removed, the contractor would not be liable for any malfunctions.

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
58/59

KNX BASIC COURSE
14.1.3 Duties / behaviour of the contractor after handing over the project
The contractor must observe the legally stipulated warranty periods as common for the
trade. What does that have to do with the “completeness of the documentation”?
Well, a contractor has to safeguard himself against unauthorised warranty claims by the
client, once the installation has been completed. Many electronic data storage media are
completely unsuitable for saving data over a longer period of time. Unfortunately this
issue is often not considered sufficiently. The handling of critical data is often done too
carelessly e.g. ETS projects are frequently created and saved in the same database. This
database is also saved only now and then. If there is a computer crash, e.g. because of a
hard drive defect, or a virus has deleted all the files, big problems arise. One may too
easily assume that the client might still have the data, because it has already been
handed over and could therefore be easily recovered.
But what happens, if the client has in the meantime also lost data? Or the client has
initiated a lawsuit because there are differences of opinion regarding warranty issues
etc.? Without your own evidence, you are in trouble if you are the accused.
Therefore – in his own interest – the contractor should save all data on special media for
long life storage, and moreover store it in a safe place, e.g. in a locked vault at a bank. In
large projects, where small mistakes can still cause a significant loss of money, it is
recommended – even, if it costs money – to have the data legally certified, sealed and
then deposited at a bank. In case of warranty issues, the validity of this data can then not
be put into question.

Home and Building Management Systems
KNX Project Design with ETS: Advanced

ETS4_Planning complex_E0411b

KNX Association
59/59

KNX Commissioning ETS4

KNX Association

KNX BASIC COURSE

Table of Contents
1
2

General ..................................................................................................................... 3
Commissioning ......................................................................................................... 3
2.1
2.2

3

Starting the commissioning ....................................................................................... 6
3.1
3.2
3.3
3.4
3.5
3.6
3.7
3.8

4

Bus access ........................................................................................................ 7
Configuring the interface ................................................................................... 8
Configuring the local device..............................................................................12
Opening a project .............................................................................................13
Selecting a view ...............................................................................................14
Downloading ....................................................................................................15
Assigning individual addresses .........................................................................17
Loading the application (application software) ..................................................18

Reconfiguration ........................................................................................................19
4.1
4.2
4.3

5
6
7

Commissioning requirements ............................................................................ 3
Local or imported projects ................................................................................. 4

Implementing project design changes ..............................................................19
Reprogramming filter tables..............................................................................20
Commissioning devices ....................................................................................20

Unloading devices ....................................................................................................21
Resetting devices .....................................................................................................22
KNX Powerline commissioning.................................................................................23
7.1
7.2
7.3

Checking the local domain address (System ID) ..............................................23
Checking the domain address (System ID).......................................................24
Loading the basic configuration (setting the repeater status) ............................24

Home and Building Management Systems
ETS Commissioning

ETS4_Commissioning_E1212a

KNX Association
2/24

KNX BASIC COURSE

1 General
All PL 110 information in this chapter is only for informative purposes. The PL 110 content
is not part of the exam at the end of the basic course.

2 Commissioning
2.1 Commissioning requirements
The commissioning of a KNX installation does not necessarily require the complete set-up
of the bus installation with all the bus devices. In larger projects (several building
sections), it does make sense to pre-program e.g. bus couplers in one’s office or in the
workshop. Since it is not an absolute requirement during the commissioning stage for the
complete data set to have been loaded into the bus coupler, it may be useful to already
load only the individual addresses into the bus couplers and the remaining relevant data
when the bus couplers have been installed in the installation. Regardless of whether the
commissioning is carried out in the office, workshop or on the building site, the application
modules of the flush-mounted devices should not yet be mounted, so that programming
button and programming LED remain accessible. In distribution boards, covers should be
removed so that also for these KNX devices, the programming button and LEDs remain
accessible. In the case of built-in devices in suspended ceilings or luminaires, it is
advisable to already assign them with their individual address in the workshop, since such
devices are generally only accessible with a great deal of effort once they have been
installed.
The stipulated checks must have been carried out successfully during and after the
installation.
The commissioning can be carried out via
a serial interface (not with 64 bit operating systems)
a USB interface
or a network connection
of the commissioning PC. The required settings are explained in more detail under “Bus
access” and “Configuring the interface”.
If the serial interface of the PC is a 9-pole plug, the serial cable to the KNX data interface
must link the contacts directly (Pin1 to Pin1, Pin2 to Pin2, …, Pin9 to Pin9). Since ETS3, it
is also possible to commission a KNX installation via USB. In both cases, the
corresponding settings must be carried out (see also “Configuring the interface”).
All functions in ETS can either be called from the menu bar or via the context menus (right
mouse button). A large number of functions can also be started directly via icons in the
toolbar. ETS thus behaves like the majority of programs running under the WindowsTM
operating system. All subsequent screenshots only show examples. The functions do not
necessarily have to be called in exactly the same way as described here. During the first
steps with ETS, it is worthwhile using the right mouse button as frequently as possible as
in many cases it leads directly to the desired dialog.

Home and Building Management Systems
ETS Commissioning

ETS4_Commissioning_E1212a

KNX Association
3/24

KNX BASIC COURSE

2.2 Local or imported projects
The project of the KNX installation must be contained in the database for commissioning
purposes. If the project has been configured on a different PC, there are two possibilities:
The first option is to import the exported project with ETS onto the commissioning PC. The
necessary steps are described in the “Project design” chapter. It is however necessary to
ensure that all additional installed programs e.g. for touch panels are also installed on the
commissioning PC.

Figure 1: Local or imported projects

Home and Building Management Systems
ETS Commissioning

ETS4_Commissioning_E1212a

KNX Association
4/24

KNX BASIC COURSE
The second option is to copy the entire database. To do so, the database file must first be
created in ETS (e.g. “knx.bak”) through the backup function. This file can thus be copied
from the first PC to the second PC and recovered. This process has the benefit that all the
products are contained in the database, should you wish to extend the project at a later
date. The disadvantage is that the database can become under certain circumstances
very large (several 100 MB). The database must either be burned onto a CD or copied
with the help of a network connection or via another data carrier. One shall also pay
attention whether the database contains products which can only run with additional files
(DLLs, parameter files etc.). These additional files must be copied as well to the correct
path. The recommendations of the manufacturers must be observed.

Create backup

Restore backup

Figure 2: Copying a database

Home and Building Management Systems
ETS Commissioning

ETS4_Commissioning_E1212a

KNX Association
5/24

KNX BASIC COURSE

3 Starting the commissioning
You access the embedded commissioning dialog via the Buildings view, Topology view or
Device view. In the corresponding window, the following menu icons appear for the
commissioning or diagnostics purposes (alternative access: menu bar):
“Download”

Opens the download menu for individual
addresses and programs

Download individual address

Downloads the individual address

Download application

Downloads the application program

“Reset”

Sends a restart command to a bus device

“Unload”

Resets an already commissioned device to
its original state

“Info”

Reads out the information of a device

“Individual address diagnostic”

Checks existing bus devices in the
installation against the project design

Home and Building Management Systems
ETS Commissioning

ETS4_Commissioning_E1212a

KNX Association
6/24

KNX BASIC COURSE

Figure 3: Starting the commissioning

3.1 Bus access
Before it is possible to start the commissioning process, it is necessary to firstly link the
interface for bus communication with an appropriate cable connection to the
commissioning PC and then to correctly select the settings on the commissioning PC.
This can either be a serial interface (RS232), a USB interface or an IP network
connection. The communication settings in ETS should be checked at any rate prior to the
initial commissioning, regardless of the interface used.
The “Communication” submenu is located under the “Settings” dashboard tab. The
corresponding setting options can be found here.

Home and Building Management Systems
ETS Commissioning

ETS4_Commissioning_E1212a

KNX Association
7/24

KNX BASIC COURSE

Figure 4: Bus access

3.2 Configuring the interface
If the “New” button is pressed in the “Communication” view, the dialog window “New
connection” opens. It is possible to choose between the following connection options:
USB
RS.232 Standard
RS.232 FT1.2
IP (EIBlib/IP)
KNXnet/IP
KNXnet/IP Routing

Communication via USB
Serial standard connection
Serial BCU2 connection
Communication via iETS
IP communication (tunnelling)
IP communication (routing)

If communication should be ensured via an RS232 connection, the COM-PORT on which
the connecting cable from the commissioning PC to the RS232 is located must be
selected under the communication parameters (normally COM 1).
When using a USB interface, the required KNX USB driver is installed directly the first
time a connection is made to the PC.
Note: This occurs for each USB port i.e. if the USB cable is inserted in another USB port
of the PC, the driver is installed again. Possibly, the connection pop-up menu must be
opened once more, to ensure that communication functions again.
Home and Building Management Systems
ETS Commissioning

ETS4_Commissioning_E1212a

KNX Association
8/24

KNX BASIC COURSE

Figure 5: Configuring the interface

The communication type IP (EIBlib/IP) requires a device with a built-in iETS client. This is
a software available in some IP gateways. For this type of communication, it is essential to
know the IP address of the IP gateway.

Figure 6: IP (EIBlib/IP)

Home and Building Management Systems
ETS Commissioning

ETS4_Commissioning_E1212a

KNX Association
9/24

KNX BASIC COURSE
IP couplers (IP routers) can be addressed using the KNXnet/IP protocol, also referred to
as “tunnelling”. KNX telegrams are wrapped into TCP/IP and sent by ETS to the required
IP coupler, which again removes the TCP/IP envelope and routes the KNX telegram to a
subordinate lower TP area or TP line.

Figure 7: KNXnet/IP Tunnelling

Home and Building Management Systems
ETS Commissioning

ETS4_Commissioning_E1212a

KNX Association
10/24

KNX BASIC COURSE
With the communication type “KNXnet/IP Routing”, pure KNX IP devices can be
addressed. These are devices that only have an IP connection. The communication type
can also be used to carry out a diagnosis of the IP network connection (e.g. bus monitor).

Figure 8: KNXnet/IP Routing

Home and Building Management Systems
ETS Commissioning

ETS4_Commissioning_E1212a

KNX Association
11/24

KNX BASIC COURSE

3.3 Configuring the local device
If one of the created connections is marked in the “Communication” view, the “Local
settings” button appears which opens the “Local Interface Settings” dialog window. The
individual address of the interface is entered here. The address must be set in such a
way, that the area and line number match the current installation location of the interface.
The device number must be an address not in use in the project. “255” is the most
suitable device number as this high number is probably not present in the installation.

Figure 9: Settings of the local interface

If a flush-mounted interface is used for programming, which is removed from the
installation after commissioning and replaced e.g. by a switch sensor, one shall
immediately set the individual address of the device that will later be part of the
installation.
If the local device is a Powerline mains coupler, a System ID must also be loaded. A
corresponding value can be defined in the “System ID” field (see also chapter ‘Powerline’).
Note: Also when using an IP coupler as an IP interface, which will function as a line or
backbone coupler during later operation, the local interface must be set. In this case, the
IP coupler must adopt an individual address during commissioning, which matches its
installation location in terms of the area and line (e.g. 1.1.255) and an individual address
during normal operation which suits its function as a coupler (e.g. 1.1.0).

Home and Building Management Systems
ETS Commissioning

ETS4_Commissioning_E1212a

KNX Association
12/24

KNX BASIC COURSE

3.4 Opening a project
Once the commissioning requirements have been carried out, you access the projects via
the “Projects” button on the dashboard. The “Open” button opens the project to be
commissioned.

Figure 10: Opening a project

If one sets the interface options, it is of course not needed to close any opened projects. It
is however advisable to only keep one project open during commissioning, as it can
otherwise quickly lead to confusion.

Home and Building Management Systems
ETS Commissioning

ETS4_Commissioning_E1212a

KNX Association
13/24

KNX BASIC COURSE

3.5 Selecting a view
All views types can in principle be used during the commissioning phase. Each has its
particular benefits. The Building view has the benefit that even if the individual addresses
of the devices are not consecutive, it is not necessary to walk great distances on the
building site. The Topology view has the advantage that several rooms can be
commissioned in one go. In the Topology view, it is also possible to select a line and
program it entirely in one go.

Figure 11: Modified devices

With the exception of the Group Addresses view, one has access in every view to the
“Modified devices” via the “Dynamic Folders”. Here only those KNX devices are shown, of
which the properties have been modified by the user since their last download.

Home and Building Management Systems
ETS Commissioning

ETS4_Commissioning_E1212a

KNX Association
14/24

KNX BASIC COURSE

3.6 Downloading
You can access the embedded commissioning dialog via the “Download” button, whereby
the following functions are available (alternative access: menu bar  Download):
“Download All”

Download of the individual address and the application
program (press the programming button)

“Download Partial”

The missing data is downloaded (Programmed flag not
set)

“Download Individual
address”

Download of the individual address (activation of the
programming button)

“Overwrite Individual
address”

Enabling on selection of a device whose individual
address should be overwritten (no activation of the
programming button)

“Download Application”

Download of the application program

In order to download the individual addresses to the devices, it is necessary to click on
“Download Individual address”. After starting the download process, the “Pending
Operations” view opens in the side bar. You are now requested by ETS to press the
corresponding programming buttons of the devices. The progress of the download
process is then displayed in this view.
Note: If a coupler is present, it should always be at the top of the list and thus also be
programmed as the first device with the individual address.
Then click on “Download Application” and the program, group addresses and the
parameters (including in case of line/backbone couplers, the filter table) are loaded into
the devices.
Alternatively, the downloading of the individual address and application program can be
processed in one step via the option “Download All”.
A partial download can be selected via the “Download Partial” menu. This download
option can be applied if only modified data such as group addresses or parameters should
be downloaded.
It is possible to continue working in ETS during the entire download process. Only those
devices currently being downloaded are blocked for editing.

Home and Building Management Systems
ETS Commissioning

ETS4_Commissioning_E1212a

KNX Association
15/24

KNX BASIC COURSE

Figure 12: Download

Note: If a flush-mounted interface is used for commissioning which is mounted onto a bus
coupler that will later serve as a switch sensor, it must first be downloaded locally. The
ETS program automatically detects that it is this type of device and queries in a dialog
whether the programming of the local device should be carried out.

Home and Building Management Systems
ETS Commissioning

ETS4_Commissioning_E1212a

KNX Association
16/24

KNX BASIC COURSE

3.7 Assigning individual addresses
During the commissioning of a KNX installation, it is important that after the interface any
couplers available in the KNX project are assigned a correct individual address, before
any other device is programmed. The right strategy is to address the coupler in a star
pattern; then to download first the coupler(s) of the local line and then all subsequent
couplers. Otherwise, communication errors may occur.
Alternatively, it is possible to first disconnect all couplers and individually program the
lines. The couplers are then re-connected and programmed one after the other. After
selecting the “Download individual address” option, ETS checks whether the device
already exists on the bus and then asks you to press the programming button.
As the application program also contains the filter table in the case of a line coupler, it is
essential in case of couplers to load also the application program.

Figure 13: Assigning individual addresses

Home and Building Management Systems
ETS Commissioning

ETS4_Commissioning_E1212a

KNX Association
17/24

KNX BASIC COURSE

3.8 Loading the application (application software)
A KNX device is only fully functional once the application has been loaded into the KNX
device in addition to the unique address (individual address). If the individual address has
been loaded, this is shown by the “Adr” entry in the column “Adr Prg Par Grp Cfg” when
selecting the Commissioning Tab.
To load the application, the corresponding KNX devices must be marked in the Buildings,
Topology or Devices view via the embedded commissioning dialog. The “Download”
button then appears in the bar. The download process is started by clicking on “Download
Application”. The current progress of the download can be tracked using the text and
status bar (Figure 14).
If after loading, one establishes that changes to the application are still necessary, it may
be in many cases sufficient to load the modified applications only partially (“Download
Partial” button).
Once the application has been loaded, ETS indicates the download status with the
corresponding entries in the column “Adr Prg Par Grp Cfg”:
“Adr”

Individual address is downloaded

“Prg”

Application program has been loaded

“Par”

Parameter settings have been loaded

“Grp”

Group addresses have been loaded

“Cfg”

Media type specific settings have been loaded (set when downloading the
individual address)

Home and Building Management Systems
ETS Commissioning

ETS4_Commissioning_E1212a

KNX Association
18/24

KNX BASIC COURSE

Figure 14: Loading the application

4 Reconfiguration
If you need to modify a KNX installation, processes are similar to those during project
design. When working on a PC, it may however turn out that certain products that are
necessary for carrying out the modifications are not contained in the database. This is
particularly the case when two different PCs are used for the project design and
commissioning e.g. when a desktop PC is used in the office during the project design and
a laptop is used on the building site during commissioning. In this case, the missing
devices must be imported at a later date.

4.1 Implementing project design changes
With ETS, it is possible to implement project design changes during the commissioning
phase. Please proceed precisely as already described in the “Project design” chapter.
Changes to all relevant settings can be carried out:
Application program
Parameters
Group addresses
Flags
Home and Building Management Systems
ETS Commissioning

ETS4_Commissioning_E1212a

KNX Association
19/24

KNX BASIC COURSE

4.2 Reprogramming filter tables
If changes still need to be carried out to individual devices during commissioning affecting
several lines, it is necessary to reprogram the filter table. This is ensured by partially
reloading the group addresses in the affected line couplers. Of course, alternatively, the
complete application can be loaded into the couplers. Only if additional group addresses
have been linked to a line, does ETS display the entry “Manual filter table entries”. If
manual changes have been carried out here, the corresponding couplers must likewise be
reprogrammed (partial: group addresses). Group addresses are manually added to the
filter table, by dragging them onto a physical line via drag & drop (Figure 14.1).
Note: ETS automatically updates the project filter tables in the background.

Figure 15: Manual filter table entries

4.3 Commissioning devices
Once the project design changes have been carried out, the affected devices must be
recommissioned. To do so, please proceed as described in the first part of this chapter.
Please bear in mind that it is also possible to download the devices partially. This can
save a great deal of time e.g. if only time related parameters need to be modified for 20
dimming actuators, it is a good idea to download just the parameters rather than the entire
application.

Home and Building Management Systems
ETS Commissioning

ETS4_Commissioning_E1212a

KNX Association
20/24

KNX BASIC COURSE

5 Unloading devices
If a device has been loaded by mistake, it is possible to unload it completely in the
commissioning menu via the “Unload” submenu, whereby there are two possibilities for
this function. The first option is to select “Unload application”: this will leave the individual
address untouched in the device. This process will not delete the entire program but
simply set all possible error flags. The other option includes the additional unloading of the
individual address. To do so, select “Unload address and application” from the menu
(Fig.16/1.). For security purposes, ETS will prompt you before each unload process,
whether the device should really be unloaded. In addition, the programming button must
also be pressed (Fig.16/2.).
If a device has been fully unloaded, the individual address is reset to the original state. An
unloaded device has the individual address 15.15.255.
The progress of the unloading process can be monitored in the side bar under “Pending
Operations” (Fig.16/3.).

Figure 16: Unloading devices

Note: It is not possible to unload couplers (the individual address is set to 15.15.0).

Home and Building Management Systems
ETS Commissioning

ETS4_Commissioning_E1212a

KNX Association
21/24

KNX BASIC COURSE

6 Resetting devices
The command “Reset device” can be called as context-sensitive (right mouse click on the
corresponding device), via the embedded commissioning dialog or via the commissioning
menu. This process is also shown in the side bar under “Pending Operations”.
The reset of a device will restart the bus coupler (operating system and application
program).

Figure 17: Resetting devices

Home and Building Management Systems
ETS Commissioning

ETS4_Commissioning_E1212a

KNX Association
22/24

KNX BASIC COURSE

7 KNX Powerline commissioning
7.1 Checking the local domain address (System ID)
Before a Powerline installation can be commissioned, the local interface should always be
checked for its domain address (System ID). The local interface must always have the
same domain address as assigned in the topology during the project design phase. The
domain address of the interface can be found under “Local interface settings”.

Figure 18: Checking the local domain address (System ID)

Home and Building Management Systems
ETS Commissioning

ETS4_Commissioning_E1212a

KNX Association
23/24

KNX BASIC COURSE

7.2 Checking the domain address (System ID)
Before commissioning a Powerline KNX installation, it must be checked whether the
domain address is unique. The same domain address may not be present in the vicinity of
the installation. Powerline devices can only be programmed after checking the
uniqueness. The corresponding line in the bus topology must be selected to check this.
The domain address is displayed in the side bar under properties. A new domain address
can be created here or changed manually.

Figure 19: Checking the domain address (System ID)

7.3 Loading the basic configuration (setting the repeater status)
If a Powerline installation is extended by a repeater at a later date, the device must first be
inserted in the ETS project from the database. ETS will subsequently reset the “Cfg”
entries for all Powerline devices. All Powerline devices must be provided with the new
information that a repeater has now been installed. This means that the application must
be reloaded into all devices.
Note: It must of course also be set in the configuration menu of the local interface that a
repeater is present in the installation.

Home and Building Management Systems
ETS Commissioning

ETS4_Commissioning_E1212a

KNX Association
24/24

ETS4 Diagnostics

KNX Association

KNX BASIC COURSE

Table of Contents
1
2

Diagnostics and fault location .................................................................................... 3
Diagnostics: Individual addresses... .......................................................................... 4
2.1
2.2
2.3

3
4

Devices in Programming Mode .......................................................................... 4
Checking if an address exists and locating the device ....................................... 5
Listing all existing addresses in a line ................................................................ 5

Diagnostics: Device Info, reading out devices ........................................................... 8
Diagnostics: Bus monitoring and Group monitoring ..................................................10
4.1
4.2
4.3
4.4
4.5

Starting and stopping a telegram recording ......................................................11
Bus Monitoring .................................................................................................11
Group monitoring ..............................................................................................12
Properties of individual telegrams .....................................................................14
Options for telegram recording .........................................................................16

4.5.1
4.5.2
4.5.3
4.5.4
4.6
4.7
4.8
4.9
5
6
7

General ........................................................................................................16
Recording .....................................................................................................17
Colouring ......................................................................................................18
Conditions ....................................................................................................19

Saving telegrams..............................................................................................19
Opening telegrams from file..............................................................................20
Clearing the telegram list ..................................................................................20
Replaying telegrams .........................................................................................22

Group addresses: Read value ..................................................................................23
Group addresses: Write value ..................................................................................24
Diagnostics: Project Check ......................................................................................25
7.1
7.2
7.3
7.4

8
9
10

Device Check ...................................................................................................26
Group Address Check ......................................................................................26
Topology Check ...............................................................................................27
Product Information Check ...............................................................................27

Diagnostics: Online Error Diagnostics ......................................................................28
Diagnostics: Online Installation Diagnostics Wizard .................................................32
Diagnostics: Tool Diagnostics ..................................................................................34

Home and Building Management Systems
ETS Diagnostics

ETS4_Diagnostics_E0111b

KNX Association
2/37

KNX BASIC COURSE

Figure 1: Diagnostics and fault location

1 Diagnostics and fault location
If a KNX installation does not function optimally, errors shall be localized as quickly as
possible and rectified. When doing so, it is important to describe problems that arise as
precisely as possible. Detailed and up to date documentation of the installation is vital to
be able to detect such types of errors.
As the diagnostics function of ETS requires direct bus access, the PC or notebook must
be connected to the KNX installation via an interface/local interface (e.g. RS232, USB or
IP).
During fault location, it is extremely advisable to work systematically. First of all, it is
necessary to rule out the possibility that the error is located in the electrical power system
(230/400 V) of the installation (e.g. faulty luminaries) or in the cabling of the installation.
After establishing that a certain function cannot be executed, one should proceed step by
step to locate the error, starting with the sending bus device (sensor) and finishing with
the receiving device (actuator), in order to be able to correct the error.
Possible causes for bus devices not responding within a line can include:
wire breakage on the bus line;
polarity reversal of the bus line at a device;
pre-programmed devices installed in the wrong line;
bus devices incorrectly configured and/or parameterised;
incorrectly programmed device;
faulty device;
Home and Building Management Systems
ETS Diagnostics

ETS4_Diagnostics_E0111b

KNX Association
3/37

KNX BASIC COURSE

Figure 2: Diagnostics/Test: Individual addresses

2 Diagnostics: Individual addresses...
The diagnostics function “Individual addresses…” is used to:
check whether devices with a specific individual address exist in the installation;
Locate devices:
Check whether the individual addresses in the project match those loaded in the bus
couplers.

2.1 Devices in Programming Mode

Figure 3: List all existing addresses in a line

If the programming LED of one or several devices has been switched on, the
corresponding individual address(es) appear(s) in the selection window under “Device(s)
in Programming mode”.
The ETS program continually checks which devices are in programming mode.
Home and Building Management Systems
ETS Diagnostics

ETS4_Diagnostics_E0111b

KNX Association
4/37

KNX BASIC COURSE

2.2 Checking if an address exists and locating the device

Figure 4: Check whether individual address exists

In order to check whether an individual address exists, enter the individual address in the
field “Individual address” and press the “Check Existence” button.
The ETS program indicates the following result after a short period.

Figure 5: Device exists

Figure 6: Device does not exist

Another possibility to locate a device in the installation is to have the device LED set to
“Flash”, “On” or “Off” via the buttons under “Device LED”.

2.3 Listing all existing addresses in a line

Figure 7: List all existing addresses in a line

Home and Building Management Systems
ETS Diagnostics

ETS4_Diagnostics_E0111b

KNX Association
5/37

KNX BASIC COURSE
If one wishes to establish, which individual addresses have already been assigned in a
line or a line segment, this can be checked via the “Scan” button. The addresses that
have been found are displayed as well as the mask version of the bus coupler.

Figure 8: comparing addresses with project

When the corresponding project is opened in ETS, it is possible to compare the addresses
in the line with those of the project (button “Compare to Project”). The following results are
possible:
Device found and configured in ETS
Device found but not configured

OK

Device not found but configured
Via the button “Update Prog Flags”, the identifier “Adr” (individual address programmed) is
set for all devices in the current project that were found when scanning a line.

Home and Building Management Systems
ETS Diagnostics

ETS4_Diagnostics_E0111b

KNX Association
6/37

KNX BASIC COURSE

Figure 9: Update Prog. Flag

Home and Building Management Systems
ETS Diagnostics

ETS4_Diagnostics_E0111b

KNX Association
7/37

KNX BASIC COURSE

Figure 10: Device info

3 Diagnostics: Device Info, reading out devices
In order to check whether the correct application program has been downloaded to a bus
coupler or the appropriate application module has been mounted, the commissioning
engineer can make use of the diagnostics function “Device Info…”.
The function can be activated either via the main menu “Diagnostics” or via the contextsensitive menu Info / Device info (With Group Communication) or just by selecting “Device
Info” in the Dashboard of ETS.
When selecting the option “Read group communication part”, the group addresses
assigned to the group objects are also read out.
The reading process is started by hitting the “Read” button.
The device information is shown in formatted and unformatted form, i.e. once as
numerical value and once as interpretation of the numerical value (e.g. name of
manufacturer of the read device and the manufacturer code).

Home and Building Management Systems
ETS Diagnostics

ETS4_Diagnostics_E0111b

KNX Association
8/37

KNX BASIC COURSE

Figure 11: Content device info

If the device has been read successfully, the following information is displayed in the
window “Device Info…”
General
Mask version:
Individual address
Device manufacturer
Bus voltage
Programming mode
Run error
Hardware PEI type
Application Program
Program

Device type
Version
Run state
Software PEI type

Current mask version of the bus coupler
Individual address of the read bus coupler
Name of the manufacturer of the read bus device
Bus voltage in the bus coupler
Status of the programming LED
Error while executing the program in the bus coupler
(if no error ->OK)
Adapter type of the hardware

The ID of the application, consisting of the “Manufacturer
ID” of the device manufacturer, “Device Type” and the
“Version”
Manufacturer-specific application number typically stored
in the device memory
Version number of the application
status of the application program
Designation of the configured adapter type (if PEI type =
01, then invalid adapter type)

Home and Building Management Systems
ETS Diagnostics

ETS4_Diagnostics_E0111b

KNX Association
9/37

KNX BASIC COURSE

Group Communication
Per group object

(if “Read group communication part” was selected)
Indication of the object number; in brackets the object
size, the set flags and the priority of the group object as
well as all the group addresses assigned to the group
object

If errors occur when executing “Device info”, which are not remedied by renewed
downloading of the KNX device, one should contact the hotline of the relevant
manufacturer.

Figure 12: Bus monitoring and Group monitoring

4 Diagnostics: Bus monitoring and Group monitoring
Two tools are available in ETS for the recording, displaying, analysing and sending of
telegram traffic in an installation as well as for reading or sending of group address values
from a PC or notebook.
Bus monitoring:

Recording and analysis of all the telegrams on the bus

Group monitoring:

Recording and analysis of group telegrams.
Reading and sending of group address values

The “Bus monitoring” and “Group monitoring” diagnostic functions are available via the
menu item “Diagnostics” or via the tools bar.

Home and Building Management Systems
ETS Diagnostics

ETS4_Diagnostics_E0111b

KNX Association
10/37

KNX BASIC COURSE

4.1 Starting and stopping a telegram recording

Figure 13: Bus monitoring

By clicking the “Start” button, the ETS program will activate the connection to the bus,
making it possible to record and play telegrams.
During telegram recording, the “Start” button is greyed. By clicking with the mouse on the
“Stop” button, the KNX connection is again closed and recording is stopped.
By selecting your project (in this case “Test Project) in the field “Current Project” the
device descriptions for the individual addresses as well as the designations of the group
addresses are displayed in the recording, provided the corresponding project has been
opened in ETS. When project data is not available, one should select one of the “no
project -..” options.
In the status bar at the left hand side it is possible to set the type of connection between
the PC and the KNX installation (ETS default, PEI16, USB…). Setting the connection is
only possible in offline mode (no recording started).

4.2 Bus Monitoring
The bus monitor requires an own exclusive bus access for the duration of the recording.

Figure 14: Bus monitoring – filter functionality

The ETS program shows the information about the recorded telegrams in the form of a
table. The width and the arrangement of the columns can be modified. It is moreover
possible to filter for specific information. Only information complying with the filter criteria
entered in the right upper field will be displayed in the bus monitor window.
The following information is displayed:
#
Time
Service
Flags
Prio

Telegram number
Time and date of the telegram (computer time!)
received from or sent to the bus/start and stop of the trace
Additional information (data package nr.,…)
Priority of the telegram

Home and Building Management Systems
ETS Diagnostics

ETS4_Diagnostics_E0111b

KNX Association
11/37

KNX BASIC COURSE
Source.adr.
Source

Dest.adr.

Dest

Rout
Type
DPT
Info

ACK

Source address (individual address of the sender)
Descriptive text of the sender (if available)
Only visible when in “Current project” corresponding project is
selected
Target address
(individual address when programming,
group address in normal bus operation)
Name of the group address (subgroup)
Only visible when in “Current project” corresponding project is
selected
Value of the routing counter
Telegram type (Write, Read...)
Data point type of the sending group object
Useful data of the telegram
(preceded by $ sign -> hexadecimal or given according to DPT type
definition - if DPT was set in project)
Acknowledgement

4.3 Group monitoring
During the diagnostics function “Group Monitoring”, other ETS functions accessing the
bus are still possible. The diagnostic function “Group Monitoring” does not need an
exclusive use of the connected interface as is the case for the function “Bus Monitoring”.

Figure 15: Group monitoring

The following information is displayed:
#
Telegram number
Time
Time and date of the telegram (computer time!)
Service
received from or sent to the bus/start and stop of the trace
Flags
Additional information (data package nr. ...)
Prio
Priority of the telegrams
Source.adr.
Source address (individual address of the sender)
Source
Descriptive text of the sender (if available)
Only visible when in “Current project” corresponding project is
selected
Dest.adr.
Target address
(individual address when programming,
group address in normal bus operation)
Dest
Name of the group address (subgroup)
Home and Building Management Systems
ETS Diagnostics

ETS4_Diagnostics_E0111b

KNX Association
12/37

KNX BASIC COURSE

Rout
Type
DPT
Info

Only visible when in “Current project” corresponding project is
selected
Value of the routing counter
Telegram type (Write, Read .)
Data point type (DPT)
Useful data of the telegram
(preceded by $ sign -> hexadecimal or given according to DPT type
definition - if DPT was set in project)

The acknowledgement (ACK,…) is not shown in the “Group Monitoring” function.

Home and Building Management Systems
ETS Diagnostics

ETS4_Diagnostics_E0111b

KNX Association
13/37

KNX BASIC COURSE

Figure 16: Telegram properties

4.4 Properties of individual telegrams
By marking a specific telegram in the list it is possible to display the telegram information
in extended format in the “Properties” window. The different properties can be sorted
alphabetically when clicking on the Property header

Figure 17: Sorting telegram properties

Depending on whether the Bus monitoring or Group monitoring is used, the following
information is displayed:
Type
Transport Layer service
System Broadcast
Source Name
Source Address
Service
Routing counter
Repeated
Raw DP Value
Raw data
Priority
Message code
Frame format
Destination name

read, response, write
T_Data, T_Connect, T_Disconnect
yes, no
Name of the sending device (if project is open)
individual address of sender
from/to bus
value of the routing counter
yes/no
raw value of the data point
Telegram in hexadecimal form
Low, High, Alarm, System
Type of service and which layer
Standard/Extended
Name of group address or name of addressed device

Home and Building Management Systems
ETS Diagnostics

ETS4_Diagnostics_E0111b

KNX Association
14/37

KNX BASIC COURSE
Destination address
Decoded DP Value
Datapoint type
Busmonitor status
Application Layer service
AI
Acknowledge

Destination Group or individual address
Data interpreted according Data Point Type (if project is
open and if assigned)
Name of Data point type (if project is open and if
assigned)
sequence counter value
type of application layer message
Bus monitor additional information field, e.g. time stamp
Acknowledged/not Acknowledged

Figure 18: Telegram information

An overview of the recorded telegrams can be displayed when selecting the “Information”
button in the Properties window.
Duration
Bus load
Telegrams per second (avg.)
Total telegrams
Unconfirmed or repeated telegrams
Top x sender

Top x group

Total duration of the recording
Average bus load on the bus
Average number of telegrams per second on
the bus
Total number of recorded telegrams
Number of unconfirmed or repeated telegrams
Source address of the device that sent the
most telegrams on the bus (and how many
times it did)
Most used destination address (and number of
times it appeared on the bus)

Home and Building Management Systems
ETS Diagnostics

ETS4_Diagnostics_E0111b

KNX Association
15/37

KNX BASIC COURSE

Figure 19: Options for telegram recording

4.5 Options for telegram recording
Telegram repetitions or faulty telegrams are displayed in ETS with a background colour.
Via the “Options” button it is possible to modify the text and background colour of the
various telegrams. In order to be able to open the “Options” window, it is imperative that
recording of telegrams has been stopped.
4.5.1 General
Timestamp Format:
Under the “General” tab, it is possible to select the desired format of the time stamp (date
and time or time only) for the display of telegram information.
Caution: The time stamp is the time information of the diagnostics PC!
Maximum number of telegrams being displayed while capturing:
The maximum number of telegrams that can be displayed while capturing can be set here.
The default value is set to 1000 telegrams.
Warn if closing telegram monitor containing unsaved telegrams:
When deactivating this checkbox, the program will close the monitor window without
warning the user whether recorded telegrams need to be saved first.

Figure 20: Unsaved telegrams will be lost

Home and Building Management Systems
ETS Diagnostics

ETS4_Diagnostics_E0111b

KNX Association
16/37

KNX BASIC COURSE
Capture filter condition
Telegrams are filtered according to the set criteria (see below). When selecting the “None”
options, all telegrams whether invalid, acknowledged, not acknowledged,... will be shown.

Figure 21: Capture trigger condition

Capture trigger condition
When a specific trigger condition is set, telegrams are displayed only if the set trigger
condition is met. Once can specify the number of telegrams that will be captured before
the trigger condition is met as well as limit the number of packets captured after the trigger
condition is met.
4.5.2 Recording

Figure 22: Options - telegram recording

Recorded telegrams can be logged to a file on your computer or on a network computer
for later analysis. This is ensured by setting the field “Enable live logging of monitored
frames to a file”.
In the field “Start a new log file”, it is possible to determine when ETS decides to start a
new log file, i.e. based on number of the telegrams, every hour, every day, every week,

Home and Building Management Systems
ETS Diagnostics

ETS4_Diagnostics_E0111b

KNX Association
17/37

KNX BASIC COURSE
every month or every year. When selecting the “number of telegrams” option, it is possible
to enter a value in the field underneath.
The name of the log files can be made unique by appending either “Date and time”, “Date
and consecutive number”, “Date only” or just “Consecutive number”. By setting the option
“Automatically delete old log files” one can determine whether or not old log files should
be deleted. If the option “Based on number of files” is selected the field “Maximum number
of log files” is enabled.
Example: Enter “3” in the field “Maximum number of log files” and start a telegram
recording session 4 times. The ETS will first create the following files:
1) Telegrams 2010-11-16_142814.xml (whereby 14 = hour, 28 = minutes, 14 = seconds)
2) Telegrams 2010-11-16_143012.xml
3) Telegrams 2010-11-16_143142.xml
Upon starting the 4th recording session, the 1st and oldest telegram recording (i.e.
142814.xml) will be deleted and a new log file will be created, i.e. Telegrams 2010-1116_143214.xml.
4.5.3 Colouring
The text and background colour of
invalid, not acknowledged,
acknowledged telegrams can be set
here.

Figure 23: Telegram colouring

Home and Building Management Systems
ETS Diagnostics

ETS4_Diagnostics_E0111b

KNX Association
18/37

KNX BASIC COURSE
4.5.4 Conditions

Figure 24: Options - Conditions

It is possible to add more conditions to the default set of recording conditions.
The conditions can be ANDed or ORed. When e.g. selecting “source address” it is
possible to filter telegrams on a specific individual address.
This filter however has no influence on the recording of telegrams, but only on which
telegrams are displayed. With this option, the commissioning engineer can determine the
number of telegrams that are displayed, a useful function especially in larger installations
with higher bus traffic. Per default ETS displays all telegrams.

Figure 25: Saving telegrams

4.6 Saving telegrams
Recorded telegrams can be saved via the menu “Save” in the toolbar of the monitor
window. ETS will prompt to save either “all telegrams” or “only the selected telegrams”.
The file extension is xml, allowed to edit the stored telegrams by means of an xml editor.

Home and Building Management Systems
ETS Diagnostics

ETS4_Diagnostics_E0111b

KNX Association
19/37

KNX BASIC COURSE

Figure 26: Opening telegrams from file

4.7 Opening telegrams from file
Saved telegram recordings can be opened via the menu “Open” in the toolbar of the
monitor window. ETS can display files with the extensions “*.xml,*.trx (ETS3) or *.hlg (ETS
2).

Figure 27: Clearing the telegram list

4.8 Clearing the telegram list
The list of previously recorded telegrams can be deleted via menu “Clear” in the toolbar of
the monitor window, e.g. to start a new recording.
Home and Building Management Systems
ETS Diagnostics

ETS4_Diagnostics_E0111b

KNX Association
20/37

KNX BASIC COURSE
When deleting the recorded telegrams ETS will prompt that any unsaved telegrams will be
lost (provided the relevant check box in Options/General has been set).

Figure 28: Warning for deleting telegrams

Figure 29: Select telegram file for replaying

Home and Building Management Systems
ETS Diagnostics

ETS4_Diagnostics_E0111b

KNX Association
21/37

KNX BASIC COURSE

4.9 Replaying telegrams
In order to verify more complex processes, ETS also allows replaying telegrams
previously recorded and saved to file. This is only possible using the “Group Monitoring”
function.
In order to replay the recorded telegrams, make sure that the PC is connected to the bus
and hit the “Replay Telegrams” button. The “Play Telegrams Options” window is opened:
the file that shall be replayed must be entered in the “File name” field or must be selected
via the “Search” button.
The time regime can also be specified. It is possible to play the telegrams “as recorded” or
“without delay”. The option “without delay” is the best option, when time interval between
recorded telegrams is longer in the selected file.

Figure 30: Replaying telegrams

Home and Building Management Systems
ETS Diagnostics

ETS4_Diagnostics_E0111b

KNX Association
22/37

KNX BASIC COURSE

Figure 31: Group addresses: Read value

5 Group addresses: Read value
The diagnostics function “Group Monitoring” also offers the possibility to reading the
current status of a group object.
Select the menu Diagnostics / Group Monitoring and hit the “Start” button. Click on the
field ‘Group Functions”. A group address can be entered in the field “Group Address” or
selected via the symbol
from the list of existing group addresses in the current
project.
A read request is sent on the bus via the “Read” button: the resulting telegram shows the
type “Read’ in the column ‘Type’ AND does not show any value in the “Info” column. The
indicated source address is the individual address of the interface to the bus. The value of
the response telegram (Column “Type” indicates “Response”) is displayed in the “Info”
column.
Values with a preceding $ sign are hexadecimal values.
If a datapoint type (DPT) has been set in the project for the group object with the queried
group address, the values are interpreted on the basis of the corresponding DPT
standard, e.g. DPT_Switch (1.001) -> On/Off.
It is only possible to read out group objects for which the read flag has been set. If group
addresses are queried, which are not specified as sending group addresses in the group
objects, the reply will be send with a different group address (the allocated sending one)
than the one used in the read request.

Home and Building Management Systems
ETS Diagnostics

ETS4_Diagnostics_E0111b

KNX Association
23/37

KNX BASIC COURSE

Figure 32: Group addresses: Send value

6 Group addresses: Write value
The diagnostics function “Group Monitoring” also offers the possibility to overwrite the
current status of a group object.
Select the menu Diagnostics / Group Monitoring and hit the “Start” button. Click on the
field ‘Group Functions”. A group address can be entered in the field “Group Address” or by
selecting the symbol

from the list of existing group addresses in the current project.

The window also allows setting the data point type as well as the value of the useful data.
Moreover, a delay can be set so that the telegram is only sent after the indicated delay.
Checking the field “Send cyclically will automatically enable the “Cyclic time in sec.”
option. In the latter case, a telegram will be written e.g. every two seconds.
Once the telegram has been sent, ETS shows the sent telegram and possible response
telegrams in the list field.

Home and Building Management Systems
ETS Diagnostics

ETS4_Diagnostics_E0111b

KNX Association
24/37

KNX BASIC COURSE

Figure 33: Diagnostics: Project Check

7 Diagnostics: Project Check
The “Project Check” submenu item is part of the menu “Diagnostics”. The project check
wizard will guide you through the process of checking your project against common KNX
planning and design rules.
Note: This is an offline test. ETS will not connect to the bus.

Home and Building Management Systems
ETS Diagnostics

ETS4_Diagnostics_E0111b

KNX Association
25/37

KNX BASIC COURSE

7.1 Device Check

Figure 34: Device Check

Was an individual address attributed to the device?
Is this attributed individual address unique in the line?
Does the attributed individual address correspond to the line or area, in which the
device is mounted?
Is the individual address within the range of 0 to 255?
Have group addresses been attributed to the available group objects?

7.2 Group Address Check

Figure 35: Group Address Check

Does the group address have a correct value?
Are all created group addressed attributed to a certain group object of a device
contained in the project?

Home and Building Management Systems
ETS Diagnostics

ETS4_Diagnostics_E0111b

KNX Association
26/37

KNX BASIC COURSE

7.3 Topology Check

Figure 36: Topology Check

Is there minimum 1 power supply, maximum two power supplies available in all line
segments?
Does the number of chokes correspond to the number of power supplies?
Are attributed individual addresses of the line/backbone couplers correct?
Is there a possible mismatch between actual power consumption and the current
supplied by the power supply?
Are there enough repeaters for the projected devices?

7.4 Product Information Check

Figure 37: Product Information Check

The product information check generates a list of application programs used by the
products contained in the project. Moreover it generates a list of application programs
requiring an update of the product database.
Home and Building Management Systems
ETS Diagnostics

ETS4_Diagnostics_E0111b

KNX Association
27/37

KNX BASIC COURSE

8 Diagnostics: Online Error Diagnostics

Figure 38: Online Error Diagnostics

A new feature of ETS is the “Online Error Diagnostics” wizard. This wizard can be started
via the submenu item “”Online Error Diagnostics” in the menu “Diagnostics”. Please note
that there should be an online connection to the bus in order to perform the error
diagnostics.
In order to invoke the “Online Error Diagnostics Wizard”, select a specific group address
(sub group), middle group or device linked to several group addresses.

Home and Building Management Systems
ETS Diagnostics

ETS4_Diagnostics_E0111b

KNX Association
28/37

KNX BASIC COURSE

Figure 39: Online Error Diagnostics - Check Device

In order to verify that the listed devices are all programmed correctly, press the “Check All
Devices” button. It is possible to abort the check by pressing the “Abort Check” button. If
devices are programmed correctly, a green circle is set in the “Status” column behind
each product. If not programmed correctly, the device in question will have a red circle in
the “Status” column.
To locate the device in the installation, just select the device and press the “Flash LED”
button.

Home and Building Management Systems
ETS Diagnostics

ETS4_Diagnostics_E0111b

KNX Association
29/37

KNX BASIC COURSE

Figure 40: Online Error Diagnostics - Send/Receive

The next step in the Wizard is the Send/Receive Diagnostic function.
This diagnostics function offers the possibility of setting the datapoint type as well as the
value of the useful data and sending it on the bus via the “Write” button. When pressing
the “Read” button, the different values received can be read in the “Received Values”
window.
Group addresses that are blocked by line couplers (as not contained in the relevant filter
table, e.g. because one is not connected to the correct line), can be added to those filter
tables by clicking the button “Temporarily modify filter tables”.

Home and Building Management Systems
ETS Diagnostics

ETS4_Diagnostics_E0111b

KNX Association
30/37

KNX BASIC COURSE

Figure 41: Online Error Diagnostics - Bus Traffic Analysis

The last step of the “Online Error Diagnostics Wizard” is the “Bus Traffic Analysis”. This
function analyses the number of telegrams sent on the bus. Bus load figures are given as
relative values (%) and confirmation problems are listed.
“Current” constitutes the current bus load percentage, “Average” informs you about the
average bus load since the start of the recording, “Max” indicates the maximum load
during the recording.
The window part ‘confirmation problems’ informs on
which group address is not acknowledged by at least one receiver (and hence
repeated);
is negatively acknowledged by at least one receiver;
whether a group address message is answered by a Busy acknowledge by at least
one receiver.
The bottom of the window informs which devices contribute to the bus traffic.
Caution: A bus load exceeding 50% may lead to an increase in communication problems
(sporadic malfunctions) in the KNX installation.

Home and Building Management Systems
ETS Diagnostics

ETS4_Diagnostics_E0111b

KNX Association
31/37

KNX BASIC COURSE

9 Diagnostics: Online Installation Diagnostics Wizard

Figure 42: Online Installation Diagnostics Wizard

Another new feature of ETS is the “Online Installation Diagnostics Wizard”. This wizard
verifies that all necessary commissioning steps have been successfully completed. It is
possible to perform this check for all devices in the project, for a specific device or for all
devices linked to a specific group address. All depends on what you have selected before
starting this wizard.
If the device in question can be reached and if the application program has been
downloaded correctly, the following result will appear on the screen.

Figure 43: Online Installation Diagnostics Wizard - Basic Checks – Everything OK

Home and Building Management Systems
ETS Diagnostics

ETS4_Diagnostics_E0111b

KNX Association
32/37

KNX BASIC COURSE
If the device in question cannot be reached or if e.g. no application program is loaded into
the device, the following will be displayed.
Errors are marked with a red bullet in front of the problem description.
Warnings are marked with an orange bullet in front of the problem description
If no problems are detected a green bullet will be displayed behind the field “Result”.

Figure 44: Online Installation Diagnostics Wizard - Basic Checks - Occurred errors

The next step of the wizard allows you to perform “Extended [Diagnostics] Checks”. These
verify whether the configured group addresses in the devices are the same as those in the
project.

Figure 45: Online Installation Diagnostics Wizard - Extended Checks

Home and Building Management Systems
ETS Diagnostics

ETS4_Diagnostics_E0111b

KNX Association
33/37

KNX BASIC COURSE

10 Diagnostics: Tool Diagnostics

Figure 46: Tool Diagnostics

The “Tool Diagnostic” wizard allows you to collect diagnostic information on your installed
ETS.

Figure 47: Tool Diagnostics - Operation

If you want to submit a support case to KNX Association, it is advisable to first clear up all
diagnostic information before reproducing a problem. This will help the support team to
analyze your problem more efficiently. To collect diagnostic information, select “Collect
diagnostic information”. Check the field “Print diagnostic output” if you want to print out the
diagnostic information or check “Export diagnostic output as ZIP” to export the diagnostic
output in a compressed ZIP file.

Home and Building Management Systems
ETS Diagnostics

ETS4_Diagnostics_E0111b

KNX Association
34/37

KNX BASIC COURSE

Figure 48: Tool Diagnostics - System

To analyze the problem KNX needs the system configuration settings of the PC or
notebook, on which you are running the ETS. Please note that no private data is collected.
If you do not want to send this information just unmark the “Including system information”
checkbox.

Figure 49: Tool Diagnostics - Diagnostic files

ETS and your operating system write information about possible problems that occur at
runtime into log files. When checking these fields, you will provide the KNX Association’s
support team with more information to analyze your problem(s).

Home and Building Management Systems
ETS Diagnostics

ETS4_Diagnostics_E0111b

KNX Association
35/37

KNX BASIC COURSE

Figure 50: Tool Diagnostics - Licenses

In order to analyze the problem it is also very important to include information on your
active license. The information about the installed licenses helps KNX Association to
identify installation issues and licensing problems, for instance should you have inserted a
dongle not corresponding to the license key on your PC.
Important: By exporting license information, you will not deactivate active license keys.
The export function will simply export information on licenses currently valid on your
machine.

Figure 51: Tool Diagnostics - Components

To make a thorough analysis of the problem at KNX, the Diagnostic Wizards further
collects information on the build version of the installed ETS, version of installed product
specific software and other installed software components on your PC.
Tick the checkbox to include version information on software components used by ETS.
Home and Building Management Systems
ETS Diagnostics

ETS4_Diagnostics_E0111b

KNX Association
36/37

KNX BASIC COURSE

Figure 52: Tool Diagnostics - Summary

As soon as the “Finish” button is pressed, the diagnostic information will be stored as a
ZIP file in an output folder of your choice, which you can then provide to KNX via the ‘My
Support’ menu item in your KNX Online shop account.

Home and Building Management Systems
ETS Diagnostics

ETS4_Diagnostics_E0111b

KNX Association
37/37

